---
title: "How to make an export API request"
date: 2022-02-21T07:56:00-05:00
draft: true
weight: 13
---

<!-- begin comment block (when active)-------------------- -->
{{% notice warning %}}
The API Reference is currently under construction and its contents should not be used until further notice.
{{% /notice %}}
<!-- end comment block (when active)-------------------- -->

{{% notice info %}}
The **Swagger UI** can be used to make an export request. See the [*How To Use the Swagger UI*](https://twdocs.netlify.app/dev/API_Reference/How_Tos/Use_the_Swagger_UI/) document for further information.
{{% /notice %}}

- [Request Types](RequestTypes)
- &nbsp;&nbsp;&nbsp;&nbsp;[Synchronous Request Type](#SynchronousRequests)
- &nbsp;&nbsp;&nbsp;&nbsp;[Asynchronous Request Type](#AsynchronousRequests)
- [Checking the status of a long lasting asynchronous export](CheckStatus)
- &nbsp;&nbsp;&nbsp;&nbsp;[Requesting the export status](#RequestingExportStatus)
- &nbsp;&nbsp;&nbsp;&nbsp;[Status responses](#StatusResponses)
- [Obtaining information about asynchronous exports](#ObtainingInfo)
- [Identifying value classes](#IdentifyingValueClasses)
- [Controlling the information returned](#ControllingInfoReturned)
- &nbsp;&nbsp;&nbsp;&nbsp;[Filtering rows](#FilteringRows)
- &nbsp;&nbsp;&nbsp;&nbsp;[Skipping rows](#SkippingRows)
- &nbsp;&nbsp;&nbsp;&nbsp;[Maximum returned rows](#MaxReturnedRows)
- &nbsp;&nbsp;&nbsp;&nbsp;[Sorting the returned rows](#SortReturnedRows)
- [Support information returned](#SupportInfoReturned)
- [Export API Name/Id Cross-Reference](#NameIdXref)

---

## **Request Types** {#RequestTypes}

Export API requests can be of either *synchronous* or *asynchronous* type.

#### <font color=#008AE8>**Synchronous Requests**</font> {#SynchronousRequests}

If the request is of the *synchronous* type, you'll receive a response within 90 seconds which will either notify you that the request completed successfully or that your request contained an error.

If the export ended with the **timeout** error, you'll need to add filtering to the request to decrease the time needed to process the request.

Teamwork cannot guarantee that the data returned in the synchronous reply will be present in the database upon returning.

#### <font color=#008AE8>**Asynchronous Requests**</font> {#AsynchronousRequests}

If the request is of the *asynchronous* type, you’ll receive a response indicating that the request is *in progress*. One or more additional requests will need to be made to check the status of your initial request. That is, so long as the **in progress** response is returned, you will need to continue checking the status of the initial request until either a **success** or **error** response is returned.

When checking the status of an export request you must provide the initial export request's **ApiDocumentId** value. The **ApiDocumentId** is represented by a **GUID** which can, optionally, be generated by you and supplied in the initial export request. If you do not an id in the export request, a **GUID** for the request will be generated by Teamwork and will be included in the initial *In Process* response. Whether the id is generated by you or Teamwork, that id **must** be provided in subsequent status check requests.

---

## **Checking the status of a long lasting asynchronous export** {#CheckStatus}

#### <font color=#008AE8>**Requesting the export status**</font> {#RequestingExportStatus}

An export status request is made by supplying the following:

- Request URL: ***\<chq-url\>*/chqapi/status**  
- Request method: **POST**  
- HTTP Headers: Content-Type: **application/json**

***\<chq-url\>*** is the URL for your copy of CHQ as supplied by Teamwork.

In addition, you would supply the appropriate **APIDocumentId** value in the **documentId** field to check the status of the document. For example:

~~~
5bb3bfe9-b721-4c2e-99b0-78c12d14607b
~~~

The image below shows the user interface for checking the status:

{{% gimg src="APIDOC/HowTos/MakeAnExportRqst/GetStatus.png" title="Get Request Status" width="800px" %}}

#### <font color=#008AE8>**Status responses**</font> {#StatusResponses}

The response returned by a *status* request would indicate that the original *export* request is in one of three states:  
- Successful  
- In Progress  
- Error 

**Example 1: Success**
~~~
{
  "Id": "5bb3bfe9-b721-4c2e-99b0-78c12d14607b",
  "Status": "Successful",
  "Progress": null,
  "TotalRecords": 157,
  "TotalRecordsSerialized": 157,
  "AcceptedRecords": null,
  "ErrorRecords": null,
  "ElapsedTime": null,
  "ErrorMessage": null,
  "Lines": null,
  "ApiType": "location-export",
  "Source": "string"
}
~~~

**Example 2: In Progress**
~~~
{
   "Id":"5bb3bfe9-b721-4c2e-99b0-78c12d14607b",
   "Status":"InProcess",
   "Progress":null,
   "TotalRecords":null,
   "AcceptedRecords":null,
   "ErrorRecords":null,
   "ElapsedTime":null,
   "ErrorMessage":null,
   "Lines":null,
   "ApiType":"location-export",
   "Source":"string"
}
~~~

**Example 3: Error**

~~~
{
  "Id": "60fd68ab-b6ac-4c8d-8315-e989a095b7df",
  "Status": "Error",
  "Progress": null,
  "TotalRecords": null,
  "AcceptedRecords": null,
  "ErrorRecords": null,
  "ElapsedTime": null,
  "ErrorMessage": "Conversion failed when converting date and/or time from character string.",
  "Lines": null,
  "ApiType": "location-export",
  "Source": "string"
}
~~~

---

## **Obtaining information about asynchronous exports** {#ObtainingInfo}

#### <font color=#008AE8>**Requesting the information**</font> {#RequestingInfo}

An information request is made by supplying the following:

- Request URL: ***\<chq-url\>*/chqapi/getdata**  
- Request method: **POST**  
- HTTP Headers: Content-Type: **application/json**

***\<chq-url\>*** is the URL for your copy of CHQ as supplied by Teamwork.

#### <font color=#008AE8>**Information Request body**</font> {#RequestBody}

{{% gimg src="APIDOC/HowTos/MakeAnExportRqst/InfoRqstBody.png" title="Get Request Status" width="800px" %}}

{{% notice info %}}
Each time you want to interact with the *getdata* API, you need to provide an API key for Teamwork to recognize this as a valid operation. For information on how to get the API key, see the [*How To Create and Manage API Keys*](https://twdocs.netlify.app/dev/API_Reference/How_Tos/HowToManageApiKeys_6.41/) document.
{{% /notice %}}

**Example 4: The result for a successful export**
~~~
{
   "ApiDocument":{
      "ApiDocumentId":"FD0AE5F6-9A04-4D7D-A937-36F9C05C022E",
      "Status":"Successful",
      "TotalRecords":5,
      "RecordsCount":2,
      "ElapsedTime":"00:00:00.0300000",
      "StartDateTime":"2019-04-22T13:03:10.803",
      "EndDateTime":"2019-04-22T13:03:10.833",
      "Response":{
         "Locations":[
            {
               "RecCreated":"2013-11-08T15:02:20.987",
               "RecModified":"2017-03-15T17:52:02.697",
               "LocationId":"EF72D4C2-CE5E-4C33-8A6A-0756EEA2D254",
               "Name":"",
               "Name2":"",
               "Code":"TEMP",
               "LocationNo":31,
               "ExternalId":"",
               "NodeId":"504D4554-0A08-0E0C-1012-1416181A1C1E",
               "IsActive":true,
               "IsArchived":false,
               "Area":"",
               "TimeAdjust":0,
               "TimeZoneIdentifier":"Ukraine time zone",
               "PriceLevelIdentifier":"",
               "AvailabilityGroupIdentifier":"ALL LOCAT",
               "TransferGroup":"",
               "Warehouse":false,
               "AvailableForStorePickup":true,
               "ECommerce":"NonEc",
               "ECommerceFlag":false,
               "CustomFlag1":false,
               "CustomFlag2":false,
               "CustomFlag3":false,
               "CustomFlag4":false,
               "CustomFlag5":false,
               "CustomFlag6":false,
               "CustomFlag7":false,
               "CustomFlag8":false,
               "CustomFlag9":false,
               "CustomFlag10":false,
               "CustomFlag11":false,
               "CustomFlag12":false,
               "CustomDecimal1":0,
               "CustomDecimal2":0,
               "CustomDecimal3":0,
               "CustomDecimal4":0,
               "CustomDecimal5":0,
               "CustomDecimal6":0,
               "CustomNumber1":0,
               "CustomNumber2":0,
               "CustomNumber3":0,
               "CustomNumber4":0,
               "CustomNumber5":0,
               "CustomNumber6":0,
               "ContactInfo":{
                  "Address1":"",
                  "Address2":"",
                  "Address3":"",
                  "Address4":"",
                  "City":"",
                  "State":"",
                  "PostalCode":"",
                  "Contact":"",
                  "EMail":"",
                  "Fax":"",
                  "HomePage":"",
                  "Latitude":0,
                  "Longitude":0,
                  "Phone1":"",
                  "Phone2":"",
                  "Phone3":"",
                  "Telex":""
               },
               "Schedule":{

               }
            },
            {
               "RecCreated":"2013-10-25T13:06:23.997",
               "RecModified":"2017-03-15T17:52:02.697",
               "LocationId":"D023BF71-108A-47B6-A30B-0F54E6723665",
               "Name":"Mitya",
               "Name2":"",
               "Code":"MITYA",
               "LocationNo":29,
               "ExternalId":"",
               "NodeId":"5954494D-0A41-0E0C-1012-1416181A1C1E",
               "IsActive":true,
               "IsArchived":false,
               "Area":"",
               "TimeAdjust":0,
               "TimeZoneIdentifier":"Ukraine time zone",
               "PriceLevelIdentifier":"",
               "AvailabilityGroupIdentifier":"ALL LOCAT",
               "TransferGroup":"TRAINING",
               "Warehouse":false,
               "AvailableForStorePickup":true,
               "ECommerce":"NonEc",
               "ECommerceFlag":true,
               "CustomFlag1":false,
               "CustomFlag2":false,
               "CustomFlag3":false,
               "CustomFlag4":false,
               "CustomFlag5":false,
               "CustomFlag6":false,
               "CustomFlag7":false,
               "CustomFlag8":false,
               "CustomFlag9":false,
               "CustomFlag10":false,
               "CustomFlag11":false,
               "CustomFlag12":false,
               "CustomDecimal1":0,
               "CustomDecimal2":0,
               "CustomDecimal3":0,
               "CustomDecimal4":0,
               "CustomDecimal5":0,
               "CustomDecimal6":0,
               "CustomNumber1":0,
               "CustomNumber2":0,
               "CustomNumber3":0,
               "CustomNumber4":0,
               "CustomNumber5":0,
               "CustomNumber6":0,
               "FranchiseGroupIdentifier":"TRAINING",
               "ContactInfo":{
                  "Address1":"",
                  "Address2":"",
                  "Address3":"",
                  "Address4":"",
                  "City":"",
                  "State":"",
                  "PostalCode":"",
                  "Contact":"",
                  "EMail":"",
                  "Fax":"",
                  "HomePage":"",
                  "Latitude":0,
                  "Longitude":0,
                  "Phone1":"",
                  "Phone2":"",
                  "Phone3":"",
                  "Telex":""
               },
               "Schedule":{

               }
            }
         ]
      }
   }
}
~~~

**Example 5: The result for an error export**
~~~
{
  "Message": "API document was not successfully prepared"
}
~~~

---

## **Identifying value classes** {#IdentifyingValueClasses}

Most, if not all, export API requests can include a *settings* parameter. This is a group parameter containing zero or more items identifying which value (field) is to be used for a particular value class.

For example, the **Catalog Export API** has the **Setting** item **VendorIdentifierSetting**. This setting indicates which of the possible fields (“Name”, “Code”, or “TeamworkId”) is to be used to identify vendors while the export request is being processed.

Each export API has its own settings (or perhaps no settings at all). The settings that can be used for a given API will be described in that API’s documentation. The documentation will list the available settings along with the valid values for that setting, and the default value if the setting is omitted.

---

## **Controlling the information returned** {#ControllingInfoReturned}

The amount of information returned by an export API and the order that that information will appear in the response be can be controlled.

#### <font color=#008AE8>**Filtering rows**</font> {#FilteringRows}

Supplying one or more filters establishes selection criteria. Only those rows which match the selection criteria will be returned. 

A filter is comprised of a field name, a comparison operator, and a value to be compared against. Possible operators are: “Greater than”, “Greater than or equal”, “Less than”, “Less than or equal”, “Equal”, or “Contains”. Not every operator will apply to every field.

Each export API has its own set of filters (or perhaps no filters at all). The filters that can be applied for a given API will be described in that API’s documentation. The documentation will list the fields which can be used for filtering for that API and what comparison operators are applicable for that field.

#### <font color=#008AE8>**Skipping rows**</font> {#SkippingRows}

The number of rows which meet the selection criteria which are to be skipped (I.E., not returned) is indicated using the **Skip** parameter. For example, **"Skip": 5** will skip the first five rows which meet the selection criteria. If omitted, all records which meet the selection criteria will be returned. If omitted, the default is 0 (no rows skipped).

#### <font color=#008AE8>**Maximum returned rows**</font> {#MaxReturnedRows}

The maximum number of rows which can be returned is indicated using the **Top** parameter. If the number of rows which match the selection criteria is greater than the **Top** value only the **Top** number of rows will be returned. If **Top** is omitted, all rows which match the selection criteria (and which are not skipped) will be returned.

#### <font color=#008AE8>**Sorting the returned rows**</font> {#SortReturnedRows}

Most export APIs allow the rows which are returned to be sorted. The sort orders are defined in the **SortDescriptions** parameter. The **SortDescriptions** parameter is an array with each element consisting of two fields, **Name** and **Direction**. The **Name** field is the field name on which the returned rows should be sorted. The **Direction** field indicates the direction of the sort, “Ascending” or “Descending”.

If a given API supports sorting, the documentation for that API will list the fields which can be used for sorting.

---

## **Support information returned** {#SupportInfoReturned}

In addition to the data in those rows which match the selection criteria (which is returned in the **Response** parameter), other values may also be returned. These values are:

**Field** | **Description** |
--- | --- |
ApiDocumentId | A unique identifier of the API document being processed. |
ApiRequestType | A value indicating the API which was requested (I.E., "catalog-export"). |
ElapsedTime | The time it took for the export to execute. |
EndDateTime | The timestamp of when the export completed. |
RecordsCount | The number of records exported, I.E., that satisfy the selection criteria taking into account the **Top** and **Skip** parameters, if supplied. |
StartDateTime | The timestamp of when the export began. |
Status | A code indicating the status of the export. |
TotalRecords | The total number of records which meet the selection criteria ignoring the **Top** and **Skip** parameters, if supplied. |

The calculation of the **RecordsCount** and **TotalRecords** values is as follows.

**RecordsCount** is set to the **TotalRecords** minus the **Skip** value (which could be zero).

If the **Top** parameter is supplied, **RecordsCount** will be set to the previously calculated **RecordsCount** value minus the **Top** value.

If the final **RecordsCount** value is less than the **Top** value, the calculated **RecordsCount** will be returned.

If the final **RecordsCount** value is greater than or equal to **Top**, the **Top** value will be returned.

**Example 6:**

There are 10 records that satisfy the selection criteria and the **Top** and **Skip** parameters are not specified. The response will contain the fields: **"TotalRecords": 10** and **"RecordsCount": 10**.

**Example 7:**

There are 10 records that satisfy the selection criteria and the **Top** parameter is set to 5 (**"Top": 5**). The response will contain the fields: **"TotalRecords": 10** and **"RecordsCount": 5**.

**Example 8:**

There are 10 records that satisfy the selection criteria and the **Skip** parameter is set to 3 (**"Skip ": 3**). The response, will contain the fields: **"TotalRecords": 10** and **"RecordsCount": 7**.

**Example 9:**

There are 10 records that satisfy the selection criteria , the **Skip** parameter is set to 8 (**"Skip ":8**), and the **Top** parameter is set to 5 (**"Top ": 5**). The response, will contain the fields: **"TotalRecords": 10** and **"RecordsCount": 2**.

## **Export API Name/Id Cross-Reference** {#NameIdXref}

**Import API Name** | **Import API Id**
--- | --- |
<font color="Crimson">***??????????***</font> | <font color="Crimson">***??????????***</font> |

<font color="Crimson">***?????????? We have such a list for import APIs so we should have one for export APIs as well. ??????????***</font>
