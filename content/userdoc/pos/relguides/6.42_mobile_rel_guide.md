---
title: "Version 6.42"
date: 2022-12-07T17:45:39+02:00
draft: false
weight: 89
---
[OPEN PDF](https://storage.googleapis.com/twc-pedia-prod-bucket/pdf/relguides/POS%20PRO%20Release%20Guide%20Version%206.42.pdf)

## Feature Descriptions

### Scandit integration

`Build 6.42.100: PRO-13524` 

We’ve made updates to allow the user to use Scandit as the scanning mechanism in POS PRO. 

Scandit integration enables scanning customer barcodes, item barcodes, gift card barcodes, and QR codes using both frontal and rear cameras of the iPad.

#### Configuration in CHQ

To configure Scandit integration, in CHQ, go to `settings > company settings > general settings > barcode scanning`. 

In the **barcode scanner** dropdown menu, choose `Scandit`. In the **data capture SDK license key** field input the key. 
{{% notice note %}}
If no key is defined, POS will use the `standard` setting during scanning. 
{{% /notice %}}

#### Scanning using Scandit 

When configured in CHQ, Scandit is used for scanning in all POS areas that use the device camera. 
{{% notice info %}}
When using Scandit integration, in the camera view, the `Scanning by Scandit` text overlay is visible.
{{% /notice %}}
In the camera view, to switch between the front and rear cameras, tap the round circle icon in the upper left corner:
{{% gimg src="V6.42 POS Rel Guide/6.42_mobrelguide_14.jpg" width="700px"%}}

#### See also

- [V6.42 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.42_chq_relguide/)
- [Mobile Quick Reference Guides](https://twdocs.netlify.app/userdoc/pos/qrg/)

### Purchase history from all fiscal zones

`Build 6.42.100: PRO-12542`

We’ve introduced an update that allows sales associates to view the full customer purchase history, including sales that were made in other fiscal zones. 

This update provides users with better understanding of a customer’s activity within the brand. 

#### Updates in the Purchase History area

Now, after locating a registered customer in the **Customers** area and then tapping **Purchase History** in the customer’s record, the associate can see the customer’s entire purchase history for all fiscal zones:
{{% gimg src="V6.42 POS Rel Guide/6.42_mobrelguide_11.jpg" width="700px"%}}
In **Purchase History**:

- transactions made in the same fiscal zone (in relation to the fiscal zone of the current location) appear against a white background{{% inum "A" %}} 
- transactions made in a different fiscal zone display against a light-gray background {{% inum "B" %}}. The original currency of the purchase is also displayed in the **Price** column
- return transactions display in faded light-gray text {{% inum "C" %}}

#### Returns not available

Performing returns against sales from other fiscal zones is not possible.

Respectively, in the **Purchase History** area, in the **Avail Return** column, `N/A` displays for such transactions ({{% inum "1" %}} in the screenshot):
{{% gimg src="V6.42 POS Rel Guide/6.42_mobrelguide_12.jpg" width="700px"%}}
When selecting a receipt from a different fiscal zone, the **Return** area opens in the read-only mode:
{{% gimg src="V6.42 POS Rel Guide/6.42_mobrelguide_13.jpg" width="700px"%}}
At the top, the `Returns Unavailable. Sale from a Different Fiscal Zone` message displays. 

From this view, it’s possible to:

- reprint the receipt by tapping **Print** in the upper-right corner ({{% inum "A" %}} in the screenshot above)
- view the details of the original transaction by tapping **View** in the **Trans #** field in the right-side panel ({{% inum "B" %}} in the screenshot)

### Verified Return of promo-grouped items

`Build 6.42.100: PRO-11693`

We've added the capability to process Verified Returns of promo-grouped items in POS PRO based on the rules defined in CHQ. 
{{% notice info %}}
Promo-grouped items are items that have been originally sold as a promo set. For example, in **Buy X, Get Y** promotion, items X and Y are promo-grouped and have been sold together on a specific condition.  
Please be advised that the following promotion types include promo-grouped items:

- Buy X, Get Y										
- Spend More, Get More					
- Buy (at least) X, Get Discount					
- Buy Multiples of X, Get Discount

Respectively, the new feature can be configured for each of the above promotions.
{{% /notice %}}
Now, when initiating a Verified Return of a promo-group item, depending on the selected option in CHQ, POS users are:

- warned if the item was sold as part of a promo group but not restricted in how to process the return, or

- required to return all items from the promo group and then resell the items that the customer wants to keep

#### Purpose

Processing returns of items that were sold as part of a promo set can present a challenge to the business, especially since such returns may be subject to fraud. 

For example, in a scenario where two items were sold on Buy 1, Get 1 Free promotion, item A was sold at full price while item B was given free according to the promo rules. If the customer then returns item A, and the promo applied to the original sale is not accounted for, the customer has the opportunity to keep the item that was given for free. 

To prevent losses associated with returns of items purchased under a promotion, POS PRO will now: 

- display a warning if the return item was originally sold as a grouped item on a promotion  

- auto-select all promo-grouped items for return if the requirement to return all items is configured in CHQ

#### Configuration in CHQ

To be able to use the new feature in POS PRO, it must be first configured in CHQ. To configure:

1. Go to `sales > promotion engine` and click **new**.
{{% notice tip %}}
To edit existing promotions, under `sales > promotion engine`, find and click the required one. In the dialog that appears, go to **options** and select **promo returns** under **receipt conditions**. 
{{% /notice %}}

2. Select **promotion type** from the dropdown menu and press **ok**:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_31.png" width="400px"%}}

3. In a dialog that opens, go to **options** and check **promo returns** if unselected (the option will be selected by default for new promotions). 

4. In the **grouped promo items partial return** dropdown menu, select one of the following:

    - **warn and allow**: to allow the POS user to process any combination of returned items with warning of the promotion
    - **require all items returned together**: to constrain the POS user to return all items purchased on the promotion and reprocess items the customer kept
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_32.jpg" width="500px"%}}

5. Save your changes. 

#### Processing returns of promo-grouped items 

In this section, we will outline how to process returns of promo-grouped items in POS PRO. 

##### Partial return

{{% notice note %}}
The steps described below are applicable if the **warn and allow** option is configured in CHQ. If this option is selected, the POS user can accept a partial return.
{{% /notice %}}
Start by initiating a Verified Return in POS PRO:

1. On the **Home Screen**, tap **New Sale**.
​
2. In the **Sales Receipt** area, tap **Find Receipt** at the top of the right-side panel or in the fly-out menu. 

{{% notice tip %}}
Alternatively, you can find the original transaction in the customer's purchase history. To do so, under `Sales Receipt > Customer`, add the customer's record and then tap **Purchase History**.
{{% /notice %}}

3. In the **Find Receipt** area, find the original receipt by:

    - scanning the physical receipt with the camera, or
    - manually entering the **Transaction #**, **Web Order #**, or **RMA Code** from the receipt into the **Search** field and then tapping **Find** in the upper right corner

4. In the **Return** area that opens, the receipt will display the details of the purchase.  
In the **PROMO** column, items linked in a promo group are marked with the **GROUP [number]** tag {{% inum "A" %}}: 
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_33.jpg" width="700px"%}}
{{% notice info %}}
If there are multiple promo groups of items in the original transaction, such groups receive different numbers. For example, if items A and B are grouped in one promo set, and items C and D – in a different one, items A and B will receive the **GROUP 1** tag, and items C and D – the **GROUP 2** tag. 
{{% /notice %}}
If more than one promo is applied to an item, the **PROMO** column will show **MULTIPLE** for that item. Additionally, under the **MULTIPLE** tag, it’s possible to tap **See Promos** to view the list of applied promos.

5. Select the item to return.   
If you select an item from a promo group, the **Promotion Item** message will be displayed:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_34.jpg" width="700px"%}}
Additionally, the above message displays if you first select all items via the **RETURN ALL** option and then unselect an item from a promo group.  
In the message, tap **Okay** to proceed. 

6. Continue with the return as usual: 

    - To select a return reason for an item, in the **RETURN REASON** field, tap **Select Reason**. In the pop-over that appears, select the required option: 
    {{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_35.jpg" width="700px"%}}
    Alternatively, to define the return reason for all items, next to **RETURN ALL** tap **Select Reason**.

    - To define the return quantity, tap the **RETURN QTY** field in an item’s row.

    - To edit the fees that are to be returned, tap the **FEES** value.

7. When finished, tap **Return Item(s)** at the bottom-right.​

8. Back in the **Sales Receipt** area, tap **PAY** at the bottom-right. In the **Payment** area, choose the required refund method and complete the refund.​

9. Tap **FINALIZE** at the bottom-right.

###### Removing items from the Cart

After you’ve added item(s) for the Verified Return, on attempting to remove an item from the Cart, POS will issue a warning `The item selected was sold as part of a grouped promotion.` The user then has an option to **Remove Item**, which removes the item from the cart, or **Cancel**, which returns to the Cart without removing the selected item. 

##### Return all

{{% notice note %}}
The steps described below are applicable if the **require all items returned together** option is configured in CHQ.
{{% /notice %}}
If the store doesn’t allow partial returns at the discretion of the sales assistant, it’s possible to return all items in the sales receipt and resell the customer the item(s) they want to keep. 

To return all promo-grouped items in the receipt: 

1. When in the **Return** area, in the **RETURN ALL** field in the right-side panel, tap **Select Reason**. 

2. In the menu that opens, tap the required reason. The selected reason will be applied to all items in the transaction.   
If you then unselect an item from the promo group, the **Promotion Item** dialog will display:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_36.jpg" width="700px"%}}
Tapping **Return All Items** in the dialog selects all items from the promo group.  

3. When finished configuring the return items, tap **Return Item(s)** at the bottom-right.​

4. Back in the **Sales Receipt** area, tap **PAY** at the bottom-right. In the **Payment** area, choose the required refund method and complete the refund.​

5. Tap **FINALIZE** at the bottom-right.

6. Start a new sale and resell the items that the customer wants to keep.

#### See also

- [V6.42 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.40_chq_relguide/)
- [Mobile Quick Reference Guides](https://twdocs.netlify.app/userdoc/pos/qrg/)

### Country-specific address formats

`Build 6.42.100: PRO-12574`

Starting from version 6.42.100, POS PRO can display addresses based on user-defined format for a specific country.  

For example, if a custom format is defined for France in CHQ, POS now uses that format to display addresses where the country is set to `France`. 
{{% notice note %}}
Custom format is not applied to address *edit* dialogs.  
For example, when adding a new ship-to address under `Sales Receipt > Ship Item > New Ship To Customer`, the order and visibility of address fields are hardcoded. After the new address is saved, it will display in the custom format (if defined), for example under `Sales Receipt > Ship Item > the PREVIOUSLY SELECTED SHIP TO ADDRESSES section`.
{{% /notice %}}

#### Purpose

This update allows users to format addresses based on country-specific standards. For example, in some countries, the postal code is shown before the city name, while in others – after the city name. 

#### Configuration in CHQ

In CHQ, address format is configured at the country level under `settings > company settings > countries/regions > [selected country] > address display`. It's possible to define visibility and order of the fields as well as how certain field combinations should display. 

#### POS areas where custom address format is applied

In POS, custom address format is applied to:

- the **Address** field under `Settings > General Info`
- postal, ship to, and bill to addresses under `Customers > [selected customer]` (full and preview forms)
- customer primary address on the **Customer** tab of the Sales Receipt, Review Order, and Reserve Order:
{{% gimg src="V6.42 POS Rel Guide/6.42_mobrelguide_8.jpg" width="700px"%}}
- customer and pick up location addresses under `Sales Receipt > Ship Item` and `Sales Receipt > [item name] – edit > Ship`:
{{% gimg src="V6.42 POS Rel Guide/6.42_mobrelguide_9.jpg" width="700px"%}}
- company location addresses on the **Document** tab of Transfer Orders, Transfers Out, and Transfers In:
{{% gimg src="V6.42 POS Rel Guide/6.42_mobrelguide_10.jpg" width="600px"%}}
- company location addresses on the **Document** tab of ASNs and Purchase Orders
- company location adresses under `Catalog > Availability > Location Information`
- item-level ship to and pick up addresses under `Shipments > Outgoing > Ship Memo > Items`

Additionally, if custom format is not defined for a country, or if all address fields are marked as not visible in CHQ, POS uses the following standard format:

- Address 1
- Address 2
- Address 3
- Address 4
- Address 5
- City, State/Province Postal Code
- Fiscal Code
- Country

#### See also

- [V6.42 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.42_chq_relguide/)
- [Mobile Quick Reference Guides](https://twdocs.netlify.app/userdoc/pos/qrg/)

### Defining a separate default printer for cash drawer 

`Build 6.42.100: PRO-12319, PRO-14663`

We’ve introduced an update that allows the user to define a separate default cash drawer printer in POS. 

#### Purpose

To use the **Open Drawer** function in POS that automatically opens the cash drawer, POS needs to be connected to a receipt printer. 

Previously, if POS was connected to a standard A4 printer as well as a specialized receipt printer, the cash drawer sometimes failed to open automatically.  

The new **Cash Drawer Printer** setting  allows the user to indicate which printer should be used by default to automatically open the cash drawer. That allows stores to use several different printers without any issues. 

#### Configuration in CHQ

The cash drawer printer can be configured in CHQ at the device level.

To do so, in CHQ, go to `services > device controller > [selected device] > app settings > cash drawer printer` and add the required receipt printer from the dropdown menu. 

#### Configuring a cash drawer printer in POS

To set a cash drawer printer in POS: 

1. On the POS Home Screen, tap **Drawer Memos**. Depending on your custom settings, the **Drawer Memos** button can be located in the navigation bar at the bottom or in the **More** menu. 

2. In the **Drawer Memo** section, tap **Options** in the top right corner and select **Cash Drawer Printer**:
{{% gimg src="V6.42 POS Rel Guide/6.42_mobrelguide_15.jpg" width="700px"%}}

3. In the dialog that opens, in the **Printer** field, set the printer that you want to be used for all cash drawer operations:
{{% gimg src="V6.42 POS Rel Guide/6.42_mobrelguide_16.jpg" width="400px"%}}
{{% notice note %}}
The selected printer must have the open drawer function.
{{% /notice %}}
4. In the upper right corner, tap **Done**.
{{% notice info %}}
The cash drawer printer setting is synchronized between POS and CHQ.  
Also, please be advised that if the user attempts to remove a printer in POS `Settings > Printers`, and that printer is assigned to a cash drawer, an error message will appear. The printer won’t be removed. 
{{% /notice %}}

#### See also

- [V6.42 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.42_chq_relguide/)
- [Mobile Quick Reference Guides](https://twdocs.netlify.app/userdoc/pos/qrg/)

### Review Order: Updated Close option 

`Build 6.42.100: PRO-14269`

We’ve updated Review Orders by changing the behavior of the **Close** button. Additionally, the previously existing **Discard** option has been disabled.

#### New behavior of the Close button 

When the user taps **Close** in a released Review Order, the **Close** dialog appears with the following options: 
{{% gimg src="V6.42 POS Rel Guide/6.42_mobrelguide_17.jpg" width="400px"%}}

- **Cancel**: cancels closing and returns to the Review Order
- **Close Review Order**: closes the Review Order
- **Delete Review Order**: deletes the Review Order from POS after displaying a confirmation dialog. The user is returned to the previous area. This replaces the previously available **Discard** option

{{% notice warning %}}
Selecting **Delete Review Order** does **NOT** automatically refund any taken deposits. The deposit must be refunded manually. 
{{% /notice %}}
{{% notice tip %}}
The **Delete Review Order** option may be used if the customer has returned all review items (without purchasing any), or if the Review Order is no longer needed.  
Deleted Review Orders are archived in CHQ.
{{% /notice %}}

When the user taps **Close** in a unreleased (newly created or held) Review Order, the **Close** dialog provides the following options: 
{{% gimg src="V6.42 POS Rel Guide/6.42_mobrelguide_18.jpg" width="400px"%}}

- **Cancel**: cancels closing and returns to the Review Order
- **Hold Review Order**: holds the Review Order 
- **Discard Changes**: discards unsaved changes to the Review Order after displaying a confirmation dialog
- **Delete Review Order**: deletes the Review Order from POS after displaying a confirmation dialog and returns the user to the previous area. This replaces the previously available **Discard** option 

### Updates to the Ship To Address dialog 

`Build 6.42.100: PRO-14245`

We’ve updated the layout of the **Ship To Address** dialog available in POS under `Sales Receipt > [item name] - edit > Ship > Ship To Address`. In particular, customer addresses are no longer distributed between the **Ship To**, **Bill To**, and **Postal** tabs and instead display as a single list.

Additionally, the user can now apply a ship-to address to all items on the receipt.   

#### Purpose

With this update, when initiating a Ship to Customer transaction, the user can quickly access all saved addresses without having to switch between tabs. 

Additionally, it’s now easier for the user to ship multiple items on the receipt to one location, as it’s no longer required to manually set the address for each item. 

#### Changes to the Ship To Address dialog layout

In the **Ship To Address** dialog, the previous layout with separation into **Ship To**, **Bill To**, and **Postal** tabs has been removed.

Now, all addresses display in a single area and are sorted by their type in the following order:
{{% gimg src="V6.42 POS Rel Guide/6.42_mobrelguide_19.jpg" width="350px"%}}

- addresses not saved on the customer record {{% inum "A" %}}

{{% notice info %}}
Addresses that aren’t saved for the customer display with the `Not saved to customer record` message (see the first address record in the screenshot above).   
An address gets the `not saved` status if the user has selected the address from the **Ship To Address** dialog, saved the item, and then removed the selected address from the customer record.
{{% /notice %}}

- Ship To addresses {{% inum "B" %}}
- Postal addresses {{% inum "C" %}}
- Bill To addresses {{% inum "D" %}}

#### Applying a ship-to address to all items in Cart

After selecting a ship-to address for the first item, the user can apply that address to all other items in the Cart. 

To do so, under `Sales Receipt > [item name] - edit > Ship`, tap **Apply To All Ship Items**:
{{% gimg src="V6.42 POS Rel Guide/6.42_mobrelguide_20.jpg" width="700px"%}}
Note that the existing **Clear Ship To** option has been moved to the left.
{{% notice note %}}
If the user selects **Apply To All Ship Items** while editing a Ship to Customer item, and there are Store Pick Up items in the cart, the Store Pick Up items will be changed to the Ship to Customer type, and vice versa.
{{% /notice %}}

#### See also

- [V6.42 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.42_chq_relguide/)
- [Mobile Quick Reference Guides](https://twdocs.netlify.app/userdoc/pos/qrg/)

### New Device Control Name field added to Initialize dialog

`Build 6.42.100: PRO-14482`

We’ve introduced an update that adds a new **Device Control Name** field to the **Initialize** dialog.

#### Purpose

When the POS app is being initialized to the server, the device name serves as a link between the device and its record in CHQ. That ensures that unauthorized devices cannot send data to CHQ.

On iPads running iOS 15 or older, POS automatically retrieves the device name from iOS settings. However, starting from iOS 16, the device name is no longer accessible to applications. 

To accommodate that change, we’ve added the **Device Control Name** field to the **Initialize** dialog in POS. That allows users to manually enter the device name and establish connection with the server. 

#### The Device Control Name field 

The new **Device Control Name** field has been added to the **Initialize** dialog:  
{{% gimg src="V6.42 POS Rel Guide/6.42_mobrelguide_21.jpg" width="350px"%}}
The **Device Control Name** field is required and allows an alphanumeric value up to 128 characters. For successful init, the entered name must match the device name specified in CHQ under `services > device controller > [your device record] > general` in the **device name** field. 

On tapping **Start**, the entered **Device Control Name** and **Company Code** values are saved to the new App Group data storage. 

If device name and company code are already stored in the App Group storage, the **Device Control Name** and **Company Code** fields are automatically populated. Editing the values in the **Initialize** dialog will write that change to the App Group storage. 

{{% notice info %}}
On iPads running iOS 15 or older, the **Device Control Name** field is automatically populated with the device name retrieved from iOS settings.
{{% /notice %}}
{{% notice tip %}}
To further automate the entry of both device name and company code during initialization, clients can use **Teamwork Certificate** app. The app allows for saving the company code and device name once and then automatically supplies those to any Teamwork app that’s being initialized on the device. That may be especially beneficial for brands that utilize a large number of devices.  
To request installation of Teamwork Certificate app in your environment, contact your Client Success Management team.
{{% /notice %}}

#### See also

[V6.42 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.42_chq_relguide/)

### Prevent hold of Sales Receipts with Verified Return items

`Build 6.42.100: PRO-12225`

We’ve introduced an update that prevents the user from placing a Sales Receipt on hold when there are Verified Return items on the receipt.

If a user selects **Hold** in a Sales Receipt that includes Verified Return items, the following error message displays: `Hold Unavailable – Sales receipts with verified return items cannot be held.`

Please be advised that this change doesn’t apply to Open Return items. If there are Open Return items in the transaction, the **Hold** option is available. 

### Held Sales Receipts queued upon finalization

`Build 6.42.100: PRO-14593`

We’ve updated how Sales Receipts that were put on hold prior to finalization are uploaded to CHQ.

Previously, POS would attempt to upload held Sales Receipts immediately after finalization, and there was no way for POS to further track the status of such transactions (uploaded or failed). If a transaction failed to upload, the following held Sales Receipt in POS could be assigned a duplicate Device Transaction Number (DTN).

Starting from version 6.42.100, held Sales Receipts are assigned the `Finalizing` status and queued upon finalization. That means that a held transaction is saved to the POS database and then uploaded to the server only after CHQ returns a success response for the previous transaction. This helps prevent situations where a duplicate DTN may be generated.

### Added translations of POS launch errors

`Build 6.42.100: PRO-14206`

We've added translations for the following error messages that can appear on POS app launch:

- Application error. The Application version is not compatible with DB version X.XX.X. The Application can’t work correctly
- Application error. The Database is used by another POS app. Please close another POS application and try again
- Application error. Error opening the database

Additionally, as a part of this update, we've fixed the issue where in the `The Application version is not compatible with DB version X.XX.X` message the database version did not display correctly.

### New email receipt options in Sales Receipt and Sales History

`Build 6.42.114: PRO-15204`

We’ve expanded on the existing functionality of emailing receipts by adding:

- an additional option to capture the customer’s email on finalizing a receipt
- the **Email** option to the left-swipe menu in the **Sales History** area

{{% notice info %}}
The above changes are applied only when under `chq > services > device controller > [selected device] > printing options > sales receipt section`, the **type** setting is set to `email`.
{{% /notice %}}

#### Purpose

Effective January 2023, a new law in France requires retailers to default to non-printed sales receipts. In Teamwork Commerce, this can be done by selecting `no print` or `email` in the existing **type** setting located under `chq > services > device controller > [selected device] > printing options > sales receipt section`.

This update expands on the existing functionality by introducing additional receipt emailing options in POS. 

**IMPORTANT**: The new options are not exclusive to France and were introduced for *all countries*.

#### New popup displayed on finalizing a receipt
<a name="new-popup-displayed-on-finalizing-receipt"></a>
In Sales Receipts without a customer or where the customer record does not include a valid email address, the **No Email/Print Option** popup is displayed on tapping **FINALIZE**: 

{{% gimg src="V6.42 POS Rel Guide/6.42_mobrelguide_22.jpg" width="300px"%}}

In the popup menu, the following options are available:

- **Skip Receipt**: skips printing or emailing of the receipt
- **Print Receipt**: prints a receipt
- **Send Email Receipt**: opens the **Send Email Receipt** dialog for entering the customer’s email: 
{{% gimg src="V6.42 POS Rel Guide/6.42_mobrelguide_23.jpg" width="350px"%}}

In the dialog, enter an email address and tap **Send**. On tapping **Send**, the receipt is finalized.

Alternatively, if the email entered is invalid, the following message is displayed:
{{% gimg src="V6.42 POS Rel Guide/6.42_mobrelguide_24.jpg" width="300px"%}}
Upon pressing **Okay**, the user is returned to the **Send Email Receipt** dialog to re-enter the email address or select another option. 

#### New Email option in the Sales History area

In the **Sales History** area, users now have the capability to quickly email a finalized receipt from the left-swipe menu.

To do so, under `Sales Receipts > Sales History`, left-swipe on an item and then tap the **Email** option: 
{{% gimg src="V6.42 POS Rel Guide/6.42_mobrelguide_26.jpg" width="700px"%}}
If there’s no customer on the receipt or the email address is not specified, and the user selects **Email** from the left-swipe menu, the **Send Email Receipt** popup appears where it’s possible to enter an email address (for details, see [New popup displayed on finalizing a receipt](#new-popup-displayed-on-finalizing-receipt)). 

### iPadOS 16 and iOS 16 compatibility

`Build 6.42.114: PRO-15033`

We’ve added support for iPadOS 16 and iOS 16 to the POS PRO app. 

### Global Payments terminal: Display of transaction details

`Build 6.42.129: PRO-11110`

We’ve introduced an option for clients to display Sales Receipt items as well as other sale details on the Global Payments terminal.

With the above update, we’ve added the following to POS:

- a new setting in `Settings > Payment Terminals`

- a warning that appears in **Sales Receipt** if POS doesn’t get a response from the terminal line display or receives an error

#### Purpose

With this feature enabled, the details of a transaction processed in Teamwork POS are displayed in real time on the connected Global Payments terminal. This allows customers to be better informed about their purchase as well as make any potential changes before making a payment. 

#### Configuration in CHQ

To enable Global Payments terminal display, in CHQ go to `device controller > [your device] > app settings > payment terminal`. In the **payment terminal type** field, make sure that `Global Payments` is selected. 

Then, select the **enable shopper display** checkbox.  

#### Configuration in POS

To enable Global Payments terminal display, in POS go to `Settings > Payment Terminals` and then tap **Edit Payment Terminals** in the top right corner.

In the dialog that opens, tap the value in the **Payment Terminal Type** field and select `Global Payments` from the dropdown menu.

Then, select the **Enable shopper display** switch:
{{% gimg src="V6.42 POS Rel Guide/6.42_mobrelguide_25.jpg" width="700px"%}}

#### Information displayed on the terminal

The Global Payments terminal display is activated when the user starts making changes in the **Sales Receipt** area in POS (adds items, a customer, etc.). 

As items are added or removed, the information on the terminal is updated in real time.

The terminal display will feature information on:

- Total number of items added
- Sale item description, quantity, net offer price (includes applied discounts, promotions, and coupons), and tax amount
- Return item description, quantity, net offer price (includes applied discounts, promotions, and coupons), and tax amount
- Applied global (transaction-level) discounts
- Applied item-level and global (transaction-level) fees
- Total discount amount, which includes applied item-level and transaction-level discounts, promotions, and coupons
- Sale total amount

{{% notice info %}}
Please be advised that the terminal display is not activated when viewing finalized receipts, creating a Review Order, viewing a finalized receipt in the **Return** area, or voiding/reversing a receipt.
{{% /notice %}}

#### Shopper display error

If at any time POS doesn’t get a response from the terminal line display or receives an error, the **Shopper Display Error** warning appears at the top of the screen: 
{{% gimg src="V6.42 POS Rel Guide/6.42_mobrelguide_27.jpg" width="700px"%}}

{{% notice note %}}
The **Shopper Display Error** warning doesn’t prevent the user from processing the transaction.
{{% /notice %}}

The warning is visible on all **Sales Receipt** tabs and on the **Payments** screen. When the user takes any action that changes the screen, the warning is dismissed.

#### See also

- [V6.42 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.42_chq_relguide/)
- [Mobile Quick Reference Guides](https://twdocs.netlify.app/userdoc/pos/qrg/)

### Adyen Dynamic Currency Conversion support

`Build 6.42.129: PRO-1686`

We’ve added support for the Adyen Dynamic Currency Conversion (DCC) feature to POS. 

#### What is Dynamic Currency Conversion?

DCC gives shoppers from abroad a choice to pay in the local currency or the currency of the country where their card was issued. 

If the shopper chooses to pay in their own currency, Adyen applies foreign-exchange conversion to the transaction. If the shopper chooses the local currency, the transaction proceeds in local currency. 

DCC is fully controlled by Adyen. When conversion is applied, DCC related data is received from Adyen terminal and stored on the sales receipt (see [DCC related data stored by Teamwork](#dcc-related-data-stored-by-teamwork)). The stored data is available for receipt printing and emailing as well as for reporting purposes. 

{{% notice note %}}
When DCC is applied to the transaction, in POS, the approved payment amount is shown in the local currency.  
For example, if a store’s local currency is Euro, and the customer paid in British pounds with conversion applied, POS will display the approved amount in Euro.
{{% /notice %}}
{{% notice tip %}}
To learn more about Adyen DCC, see [Dynamic Currency Conversion](https://docs.adyen.com/point-of-sale/currency-conversion) on Adyen documentation portal.
{{% /notice %}}

#### DCC related data stored by Teamwork
<a name="DCC-related-data-stored-by-teamwork"></a>
For each credit card payment, the following DCC data is received from the Adyen terminal and stored: 

- Exchange Rate	
- Currency Code	
- Source of Exchange Rate
- Markup (a percentage applied to the charge that is kept by the retailer and added to the transaction amount)
- Shoppers Currency Amount (the currency associated with the shopper’s credit card account)
- Local Currency Amount (the currency of the retailer or location)
- DCC Acceptance Statement

The above data is saved for each card separately as the customer may pay with multiple cards. Saved data is synchronized with CHQ along with the sales receipt.	

#### See also

- [V6.42 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.42_chq_relguide/)
- [Mobile Quick Reference Guides](https://twdocs.netlify.app/userdoc/pos/qrg/)

## Issue Resolutions

### Lock Fill From switch incorrectly excluded when copying ship-to address to multiple items 

`Build 6.42.100: DS-4556, DS-4557`

Prior to version 6.42.100, the state of the **Lock Fill From** switch wasn’t applied to items under `Sales Receipt > Cart` when the user applied an existing ship-to address to multiple items.
{{% notice info %}}
The **Lock Fill From** switch defines whether the resulting Ship Memo can be automatically reassigned to a different location if the requested fill from location rejects (cannot process) the Ship Memo.  
The **Lock Fill From** switch is a part of the shipment details defined at the item level and is available in POS under `Sales Receipt > Cart > [item name] – edit > Ship tab`.
{{% /notice %}}
In particular, the state of the **Lock Fill From** field failed to carry over to other items when:

- the user tapped **Apply To All Ship Items** under `Sales Receipt > Cart > [item name] – edit > Ship tab`

- the user selected a previously configured address for an item under `Sales Receipt > Cart > swipe left an item > Ship Item`

To resolve this issue, we’ve changed how shipment details are applied to multiple items. Now, when selecting the **Apply To All Ship Items** option or an existing address from the **Ship Item** dialog, the state of the **Lock Fill From** switch is carried over. 

### Incomplete printing error logs

`Build 6.42.100: DS-4554, DS-4280`

Previously, information logged when a printing error occurred in POS was incomplete. 

To resolve the issue, we’ve extended printing error logs with the following:

- the number of the mobile printing area where the error occurred

- information about the printing document: MobilePrintingDesignId, MobilePrintingDesignCode, and MobilePrintingDesignDescription

- the name of the exact dataset in the printing document where the error occurred

- the ObjectID parameter passed from POS to the printing document

### Sales tax for exempt item incorrectly added to Payment Due 

`Build 6.42.100: DS-4113`

Prior to version 6.42.100, when an item was marked as exempt from sales tax under `Sales Receipt > Cart`, **Payment Due** could be calculated incorrectly. In particular, **Payment Due** was still incremented by the tax amount as if the item wasn't exempt. 

The issue has been fixed. Now, if an item is assigned the tax exempt status, the respective tax amount is not added to **Payment Due**.

### Item sorting doesn't work in Purchase Orders

`Build 6.42.100: DS-3724`

We've fixed the issue where item sorting didn't work under `Shipments > Incoming > [selected Purchase Order] > Items`. 

### Sales Receipt: The Clear Ship To action doesn't remove the Ship tag on the item 

`Build 6.42.93: DS-4558`

**Issue**    
When the user removed the **Ship to Customer** status at the item level via the **Clear Ship To** option under `Sales Receipt > Items > [item name] - edit > Ship`, the **Ship** tag remained applied to that item under `Sales Receipt > Items`. 

**Resolution**  
The issue has been resolved. Now, when an item's ship status is removed, the **Ship** tag is removed as well.

### POS stops working when a printing error occurs

`Build 6.42.100: DS-4297`

Prior to version 6.42.100, POS PRO could occasionally crash when an error occurred during document printing. Additionally, after the crash incident, app sync would take a long time. 

Now, if printing fails, POS shows a standard printing error and then continues working as expected.

### Global Payments: POS displays error on successful payment

`Build 6.42.100: DS-4603`

Prior to version 6.42.100, POS could display an incorrect payment status when working in conjunction with a Global Payments terminal.

In particular, POS displayed a payment processing error although the payment was actually accepted at the Global Payments side. That led to a second payment attempt resulting in a duplicate charge.

The issue has been fixed. Now, if Global Payments accepts the payment, POS displays **Approved** as expected. 

### POS PRO sync fails with an error

`Build 6.42.100: DS-4548`

We've fixed the issue where POS PRO sync could fail with the `{"errors":{"ReceiptRemotePayment.ReferenceNum":["The ReferenceNum field is required."]}` error.

### Sales Receipt: Inability to save store pick up information 

`Build 6.42.100: DS-4619`

**Issue**  
Users were sometimes unable to save item pick up information under `Sales Receipt > Items > [item name] – Ship Item > the Ship tab`. In particular, tapping **Done** didn't save changes and then close the **[item name] – edit** area as expected. 

**Resolution**  
The issue has been fixed. Now, tapping **Done** saves item pickup information and returns the user to `Sales Receipt > Items`.

### Sales Receipt: Inability to unselect the Email option

`Build 6.42.100: DS-4687`

**Issue**  
Under `Sales Receipt > Payment`, it was sometimes impossible to unselect the **Email** receipt option if **Email** was set as the default method under `Sales Receipts > Options > Print Options`. 

**Resolution**  
The issue has been fixed. Now, as expected, the user can unselect **Email** and choose another receipt option.

### Reprinted Sales Receipts missing transaction details

`Build 6.42.100: DS-4617`

Prior to version 6.42.100, a receipt created against a Sales Order in CHQ and then reprinted via POS could be missing transaction details.

The issue has been resolved. Now, reprinted sales receipts include transaction details as expected. 

### Sales Receipt not printed as expected

`Build 6.42.100: DS-4540`

Prior to version 6.42.100, it was sometimes impossible to print a Sales Receipt with Adyen payment. Instead of printing the full receipt, the printer would produce a short piece of paper with a single printed line. 

The issue has been resolved. Now, Sales Receipts with Adyen payment can be printed normally. 

### POS PRO sync failure

`Build 6.42.100: DS-4528`

We’ve fixed the issue where POS PRO couldn’t sync due to the `Post in and out dates and user should be empty for held transfer memo` error even if there were no held Transfer Memos on that device.

### Fortress member benefits not applied to sales

`Build 6.42.114: DS-4818`

We’ve fixed the issue where the Fortress member discount failed to apply to a sale when the user scanned the QR code from the customer’s member page.

Now, Fortress discounts are applied as expected and are visible in POS under `Sales Receipt > Customer > the FORTRESS CUSTOMER section`.

### Unable to connect RFID Table Scanner

`Build 6.42.129: DS-4551`

We’ve fixed the issue where some users were unable to scan items using F-NEDAP and DENSO-UR 22 RFID readers after upgrading the POS app to a newer version.

### Printed held receipts missing information

`Build 6.42.129: DS-4934`

We’ve fixed the issue where held Sales Receipts that were printed out could be missing sale information.

### Unable to finalize imported held Sales Receipt 

`Build 6.42.138: DS-4720`

**Issue**  
Previously, clients could encounter an issue where POS would crash when finalizing held Sales Receipts imported using the JSON-based Sales Receipt Import API. That prevented clients from successfully recovering and processing held receipts.

**Resolution**  
The issue has been fixed, and imported held receipts are now finalized as expected.

### Missing French translations added 

`Build 6.42.138: DS-4966`

Prior to version 6.42.138, French translations for several UI elements were missing under `Sales Receipt > Payments`. 

With this update, we’ve added French translations for the following: 
- **No Email / Print Option** dialog name (EMAIL_POPUP__NO_EMAIL_PRINT_OPTION) 
- **Skip Receipt** button in the **No Email / Print Option** dialog (EMAIL_POPUP_SKIP_RECEIPT)  
- **Print Receipt** button in the **No Email / Print Option** dialog (EMAIL_POPUP_PRINT_RECEIPT) 
- **Send Email Receipt** button in the **No Email / Print Option** dialog (EMAIL_POPUP__SEND_EMAIL_RECEIPT)  
- **Send Email Receipt** dialog name (EMAIL_POPUP_ENTER_CUSTOMER_EMAIL) 
- **Send** button in the **Send Email Receipt** dialog (EMAIL_POPUP_SEND)

### Transfer Memos: Items with duplicated line numbers

`Build 6.42.142: DS-5168`

We’ve fixed the issue where items on Transfer Memo could have duplicated line numbers (ItemLineNo). 

This happened if one item was deleted and a new one was added to Transfer Memo with several items. In that case, the newly added item received a duplicated line number, as line numbers were assigned based on total item quantity in the document. For example:
{{% gimg src="V6.43 POS Rel Guide/6.43_pos_rel_guide16.jpg" width="450px"%}}

To fix the issue we’ve corrected the logic behind LineNo generation in Transfer Memos. Now, LineNo is calculated as `max existing line number + 1` (see **Expected** in the table above). 

## Impacted Areas

Teamwork Commerce PRO Suite allows for unique client-specific configurations. If the above is your case, we recommend that the areas and workflows listed below be additionally checked to ensure the existing functionality works as expected in conjunction with the newly released features.
{{% notice note %}}
Please be advised that the information below does not include details on the configurations and conditions required for testing the new features. For detailed information, see the respective feature description in this release guide.
{{% /notice %}}
**Feature**|**Impact**|
:-----------|:-----------|
Scandit integration|In CHQ, configure Scandit integration. In POS, test workflows related to scanning item, customer, and gift card barcodes in various areas.|
Purchase history from all fiscal zones|Test workflows related to reviewing a customer's purchase history.|
Verified Return of promo-grouped items|In CHQ, define how Verified Returns of promo-grouped items should be processed. In POS, test workflows related to performing a Verified Return of an item from a promo group.|
Country-specific address formats|In CHQ, define a custom address format for a country. In POS, check that the custom format is applied to addresses with that country, for example, under `Sales Receipt > Ship Item > the PREVIOUSLY SELECTED SHIP TO ADDRESSES section`.|
Defining a separate default printer for cash drawer|In POS, define a cash drawer printer via the Cash Drawer Printer setting. Check that the cash drawer opens automatically when required as well as on tapping the Open Drawer button.|
Review Order: Updated Close option|Test workflows related to creating and managing Review Orders. Pay attention to the updated Close option in released and unreleased Review Orders.|
Updates to the Ship To Address dialog|Test workflows related to initiating a Ship to Customer and Store Pick Up Ship Memo, paying attention to the list of saved ship addresses `Sales Receipt > [item name] - edit > Ship > Ship To Address`. Additionally, check that the Apply To All Ship Items option works as expected.|
New Device Control Name field added to Initialize dialog|Test initializing a POS device to the server paying attention to the new Device Control Name field. On devices running iOS 15 or older, check that the Device Control Name field is automatically populated with the device name from iOS settings.|
Prevent hold of Sales Receipts with Verified Return items|Test workflows related to putting a Sales Receipt on hold. Check that holding a transaction with Verified Return items is now allowed.|
New email receipt options in Sales Receipt and Sales History|Test workflows related to emailing of receipts from the Sales Receipt and Sales History areas. Pay attention to the new dialogs that come up if no customer email address is specified.|
Global Payments terminal: Display of transaction details|Test transaction processing with connected Global Payments terminal. When shopper display is turned on in POS Settings, ensure that transaction details from POS display on the terminal.|
Adyen Dynamic Currency Conversion support|Test transaction processing with connected Adyen terminal. Ensure that, when Dynamic Currency Conversion is applied to the transaction, payment approval is passed to POS without any issues.|

{{% notice warning %}}
WE DO NOT WARRANT AND SHALL NOT BE RESPONSIBLE FOR THE PERFORMANCE OF ANY THIRD-PARTY VENDOR’S PRODUCTS OR SERVICES. ALL SOFTWARE AND HARDWARE IS ACQUIRED SUBJECT TO THE END USER LICENSE AGREEMENT, WARRANTY, AND OTHER TERMS PROVIDED BY THE MANUFACTURER OR SUPPLIER OF SUCH THIRD-PARTY PRODUCT.   YOU AGREE TO BE BOUND BY AND COMPLY WITH ANY SUCH MANUFACTURER LICENSE AGREEMENT, WARRANTY, OR OTHER TERMS AND CONDITIONS, AND YOU UNDERSTAND AND AGREE TO LOOK SOLELY TO THE THIRD-PARTY VENDOR OF THE PRODUCT FOR MAINTENANCE AND SUPPORT, INCLUDING BUT NOT LIMITED TO RESOLUTION OF SYSTEM ERRORS, BUGS, PATCHES, HOT FIXES, ETC. YOUR SOLE AND EXCLUSIVE RIGHTS AND REMEDIES WITH RESPECT TO ANY THIRD-PARTY PRODUCT OR SERVICE, INCLUDING RIGHTS AND REMEDIES IN THE EVENT A THIRD-PARTY PRODUCT OR SERVICE GIVES RISE TO AN INFRINGEMENT CLAIM, WILL BE AGAINST THE THIRD-PARTY VENDOR AND NOT AGAINST US.

TO THE MAXIMUM EXTENT PERMITTED BY LAW, WE DISCLAIM ANY AND ALL PROMISES, REPRESENTATIONS, AND WARRANTIES, EXPRESS OR IMPLIED, WITH RESPECT TO THE VERSION OF THE PROGRAM SET FORTH HEREIN, SPECIFICALLY INCLUDING ANY UNDERLYING THIRD PARTY TECHNOLOGIES AND/OR PLATFORMS USED IN CONJUNCTION WITH SAME, MATERIALS AND ANY OTHER DATA, INFORMATION, OR OTHER MATERIAL FURNISHED TO USER HEREUNDER, INCLUDING, WITHOUT LIMITATION, THE CONDITION THEREOF; AND WARRANTIES OF NON-INFRINGEMENT, TITLE, MERCHANTABILITY, OR FITNESS FOR A PARTICULAR PURPOSE OR USE.
{{% /notice %}}
<br>
<br>
[OPEN PDF](https://storage.googleapis.com/twc-pedia-prod-bucket/pdf/relguides/POS%20PRO%20Release%20Guide%20Version%206.42.pdf)