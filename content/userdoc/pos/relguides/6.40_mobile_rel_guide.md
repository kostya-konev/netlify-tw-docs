---
title: "Version 6.40"
date: 2022-05-10T12:04:22+03:00
draft: false
weight: 91
---
[OPEN PDF](https://storage.googleapis.com/twc-pedia-prod-bucket/pdf/relguides/POS%20PRO%20Release%20Guide%20Version%206.40.pdf)

## Feature Descriptions

### Showing receipt details on Adyen payment terminal

`Build 6.40.84: PRO-9663`

We've added the capability to show receipt details from POS PRO on the display of the connected Adyen payment terminal. 
{{% notice info %}}
Please be advised that this feature may be used in conjunction with the following Adyen terminal models:

- e280
- M400
- P400 Plus
- V400c Plus
- V400m
{{% /notice %}}

#### Purpose

This feature allows for using the connected Adyen terminal to show the customer an overview of their purchase. 

When the **Enable shopper display** setting is enabled, POS PRO sends information about receipt items and totals to the connected terminal. The information displayed allows the customer to be better informed about their purchase and, if necessary, make any changes before payment is taken.

#### Configuration in CHQ

In CHQ, the display of receipt details on the terminal is configured at the device level. 

To enable this feature, under `services > device controller > [selected device] > app settings >` the `payment terminal` section, select the **enable shopper display** checkbox and then save the changes.

{{% notice info %}}
The **enable shopper display** setting is available for configuration in POS PRO (see [Enabling transaction details display in POS PRO](http://twdocs.netlify.app/userdoc/pos/relguides/6.40_mobile_rel_guide/#enabling-transaction-details-display-in-pos)). The state of the setting is synchronized between POS and CHQ.
{{% /notice %}}

#### Enabling receipt details display in POS

To allow for display of receipt details on your Adyen terminal, in POS PRO, do the following:

1. On the Home Screen, tap **More** at the bottom-right.
2. Tap **Settings**.
3. In the area that opens, on the left, select **Payment Terminals**. 
4. In the top right corner, tap **Edit Payment Terminals**.
5. In the dialog that opens, make sure that, in the **Payment Terminal Type** field, `Adyen Terminal API` is selected.   
Then, turn on the **Enable shopper display** switch:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_2.jpg" width="400px"%}}
7. Tap **Done**. 

Back under **Settings – Payment Terminals**, if the **Enable shopper display** switch is turned on, `Yes` appears in the respective field:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_3.png" width="700px"%}}

#### Sending receipt details from POS to Adyen terminal

POS sends receipt details to the connected terminal when the user taps **PAY** in the **Sales Receipt** area, so that the customer can review their purchase before making a payment.

If the user returns from **Payment** back to the **Sales Receipt** area and changes the details of the transaction, the information on the terminal display is updated when **PAY** is tapped again. 

The following information sent from POS appears on the terminal display:

**Information**|**Description**|
:-----------|:-----------|
**Item information**|The list of items added to the Cart in POS PRO.<br>In each item line, the following information is shown: item quantity, description, and price. The item price:<ul><li>includes fees</li><li>includes tax amount if VAT is applied</li><li>does not include tax amount if sales tax is applied</li><li>does not include discounts and promotions</li></ul> If there are both sale and return items, the items are shown under **Sales** and **Returns** labels respectively.|
**Subtotal**|Transaction subtotal. The subtotal amount: <ul><li>includes fees</li><li>includes tax amount if VAT is applied</li><li>does not include tax amount if sales tax is applied</li><li>does not include fee taxes</li>|
**Total discount**|The total of promo, item-level, and transaction-level discounts. If there are no discounts applied, this field is not visible.|
**Total tax**|Total tax amount, including fee taxes. This field is not visible if VAT is applied.|
**Total**|Transaction final total.|

When the user taps **FINALIZE** in the **Payment** area, the information is cleared from the terminal display.

If an error has occured, and the terminal failed to display the received information, the `Shopper display error` message appears in POS PRO:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_4.jpg" width="700px"%}}
At the backend, the error received from Adyen is logged for troubleshooting purposes.

#### See also

- [V6.40 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.40_chq_relguide/)
- [Mobile Quick Reference Guides](https://twdocs.netlify.app/userdoc/pos/qrg/)

### Printing item tags from documents

`Build 6.40.84: PRO-9576`

This update adds the capability to print item tags from the following documents:

- Transfer Order, Transfer In, Transfer Out
- Purchase Order, Purchase Receipt
- Adjustment Memo

#### Purpose

This feature allows the user to conveniently print tags for a particular set of items. 

For example, if it's required to put tags on items that have been transferred to the store, the user can print against the Transfer In document. On choosing the print option, all the items from the document are automatically selected for printing, so there's no need to scan in each item from the transfer. 

Additionally, before printing, the user has the capability to configure the number of tags to print for each item as well as the printed item price.

#### Printing item tags from a document

When viewing items included in a document, it's possible to print a tag for a specific item or all items in the document. 

To print a single tag, swipe left the required item row and then tap **Print Tag** {{% inum "A" %}}:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_5.png" width="700px"%}}
Alternatively, to print tags for all items, in the upper right corner tap **Print** and then select **Tags for All Items**.

Both when printing a single or multiple tags, the **Print Tags** area opens:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_6.jpg" width="700px"%}}
If the user selected **Tags for All Items**, all items present in the document are listed in the area. 

To find a specific item, use the **Search** ({{% inum "1" %}} in the screenshot above) or **Scan** {{% inum "2" %}} options at the top-left. Alternatively, scan the physical item with your RFID reader. 
{{% notice note %}}
In the **Print Tags** area, users can search only for items that are present in the document. It's not possible to add extra items from the catalog.
{{% /notice %}}
Note that the default **Quantity** {{% inum "3" %}} and **Tag Price** {{% inum "4" %}} values for each item match the item quantity and price from the document. Also, depending on the type of the document, the following item quantities may be represented by the **Quantity** column:

- Transfer In – In Qty
- Transfer Out – Out Qty
- Transfer Order – Out Qty
- Purchase Order – Receive Qty
- Purchase Receipt – Receive Qty
- Adjustment Memo – Adjustment Qty

To change the number of tags or item price to print, tap the **Quantity** or **Tag Price** column respectively.

When finished configuring item details, tap **PRINT TAGS** at the bottom-right. This opens the **Print Options** dialog:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_7.jpg" width="400px"%}}
In the dialog, configure the following fields:

- **Type**: defines if tags are printed immediately or a print preview appears first. Respectively, `Print` and `Print Preview` options are available
- **Select Printer**: defines the printer to use
- **Document Template**: defines the printing template to use
- **Start Position on Sheet**: defines where the first tag is printed on the page

{{% notice info %}}
The number of valid **start positions** depends on the number of tags that can be printed on the page. For example, if 30 tags can be printed in total, then 30 start positions are available.  
Note that it's not required to configure the **Start Position on Sheet** field if a roll tag printer is used.
{{% /notice %}}
To confirm and print the tags, tap **Print** in the upper right corner.

### Searching for customers by External ID

`Build 6.40.84: PRO-6588`

In POS PRO V6, it's now possible to search for a customer record by its **External ID**.

The **External ID** field contains a unique record identifier from a system outside Teamwork. For example, if the company creates a customer record in an external system and then imports the record into CHQ, the identifier from that external system is preserved as the **External ID** value. 

That allows store associates, for example, to scan a barcode containing the customer's ID in an external app and thus quickly find the respective customer in Teamwork system.

#### Searching by External ID

Search by External ID has been added to the following POS PRO areas:

- `Customers`
- `Sales Receipt > Customer`

To choose searching by External ID specifically, next to the **Search** field at the top, tap **[applied search criterium]** {{% inum "A" %}}:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_1.png" width="700px"%}}
In the menu that appears, select **External ID**.

### Open Return: Support of return price and quantity limits

`Build 6.40.84: PRO-9816`

POS PRO V6 now supports settings that allow for setting limits on the price and quantity of Open Return items.

#### Purpose

{{% notice info %}}
An Open Return is a return performed without reference to the original Sales Receipt.
{{% /notice %}}
When performing an Open Return, users with appropriate security rights can manually set the price and quantity of the returned item(s). The new settings allow for introducing security measures related to Open Returns.

For example, configuring the new **maximum open return value (%)** setting may prevent a scenario where, when performing an Open Return in POS PRO, the user could define a **Current Price** value that greatly exceeds the original price of the return item and thus give extra cash to the customer.

Additionally, to prevent situations where the user could set a return quantity that exceeds the original sale quantity, it's possible to define the **maximum open return quantity** setting. 

#### Configuration in CHQ

In CHQ, the **maximum open return value (%)** and **maximum open return quantity** settings are available under `settings > location settings > locations / location settings > [selected location] > sales >` the `sales` section.

#### Support of "maximum open return value (%)" setting in POS

In POS PRO, the **maximum open return value (%)** setting limits the price that the user can enter in the **Current Price** field under `Sales Receipt > Cart > [item name] - edit > Return` when there's an Open Return item in the Cart. 

The setting allows for defining the maximum percentage from the item's original price within which the entered **Current Price** (return price) can exceed the original price. For example, if the item's original price is $100, and **maximum open return value (%)** is `10%`, then the item's **Current Price** in POS PRO cannot be more than $110. 

If the user enters a value that exceeds the limit, **Current Price** is automatically reset to the item's original price. Additionally, the **Maximum Price Limit** warning message appears.

#### Support of "maximum open return quantity" setting in POS

In POS PRO, the **maximum open return quantity** setting limits the return item quantity that the user can enter in the **Quantity** field under `Sales Receipt > Cart > [item name] - edit > Item Details` when there's an Open Return item in the Cart. 

If the user enters a quantity that exceeds the limit, **Quantity** is automatically reset to `1`. Additionally, the **Maximum Quantity Limit** warning message appears. 

### Using separate settings for return gift cards

`Build 6.40.84: PRO-9777`

We've introduced additional settings for gift cards that are issued to customers as a means of refund. 

This allows for configuring such gift cards separately from the gift cards that are sold to customers – for example, it's possible to set a different expiration date.

{{% notice info %}}
In CHQ, new **gift cards for returns** settings can be configured at the fiscal zone and/or country level.  
To configure at the fiscal zone level, go to `settings > company settings > credit & reward program > fiscal zones > [your fiscal zone] > gift cards >` the `gift cards for returns` section.  
Alternatively, to configure at the country level, go to `settings > company settings > countries / regions > [your country/region] > general >` the `gift cards for returns` section.
{{% /notice %}}

In POS PRO under `Sales Receipt > Payment`, if there are return items on the receipt, and the amount due is negative (refund), the system uses the **gift cards for returns** settings when creating a gift card. 

### Making a refund to a Virtual Gift Card

`Build 6.40.84: PRO-10097`

Starting from version 6.40.84, users have the capability to make a refund to a Virtual Gift Card (VGC) without linking that card to the customer. 
{{% notice note %}}
Please be advised that, as the created VGC is not linked to a customer, the *full* number and the expiration date of that card are printed on the receipt or emailed to the customer based on the user's choice.  
Also, as of version 6.40.84, this feature is available only for Teamwork native gift cards.
{{% /notice %}}

#### Configuration in CHQ

To configure the rules based on which a return virtual gift card is created, in CHQ, define the settings available under `settings > company settings > credit & reward platform > fiscal zones > [your fiscal zone] > gift cards >` the `gift cards for returns` section.

Additionally, return gift cards can be configured at the country/region level under `settings > company settings > countries / regions > [your country/region] > general >` the `gift cards for returns` section.

#### Making a refund to a VGC

1. Start a Verified or Open Return. To learn how to do so, see [Making a Verified Return of merchandise](https://twdocs.netlify.app/userdoc/pos/qrg/sr/making_vr/) or [Making an Open Return](https://twdocs.netlify.app/userdoc/pos/qrg/sr/making_open_return/) respectively. 

2. Under `Sales Receipt > Payment`, in the right-side panel, tap **[your Gift Card payment method]**.

3. In the **Gift Card** dialog that opens, in the **Issue To** field, select `New Virtual Gift Card`:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_12.png" width="400px"%}}
{{% notice note %}}
If there's no items with **charge type** = `virtual gift card` set up in the inventory, on selecting `New Virtual Gift Card`, the **Virtual Gift Card Not Available** error message comes up. In CHQ, a VGC item can be added under `inventory > styles & items > new`.
{{% /notice %}}

4. In the **Card Delivery** field that appears below, define if the VGC number should be printed on the sales receipt or emailed to the customer.

    - If `Email Card Number` option is selected, under the **SEND VIRTUAL GIFT CARD TO** section that appears, define the **EMAIL** and **FULL NAME** of the customer.   
    If there's a customer record added to the receipt, the **EMAIL** and **FULL NAME** fields are automatically filled out from that record. The user is able to change the default values.

5. Tap **ISSUE CARD** at the bottom. On tapping, the details of the created VGC such as the number and the expiration date are passed from CHQ to POS. 

6. Back in the **Payment** area, the payment method record appears on the left. In the record, the **Virtual - [method]** label appears where **[method]** is either `Print` or `Email`:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_13.png" width="500px"%}}
To view the gift card details or void the refund, swipe the payment record left and then tap **View** or **Void** respectively.

7. Tap **FINALIZE**.

If the user chose to print the VGC details, on finalizing, the full gift card number as well as expiration date are printed on the receipt.

Alternatively, if the user chose to email the VGC, on finalizing, an email with the VGC details is sent to the customer's email address. 
{{% notice info %}}
For return virtual gift cards, the **return virtual gift card delivery** transaction email type is used. The type is available for configuration in CHQ under `settings > company settings > transaction emailing`.
{{% /notice %}}

#### See also

- [V6.40 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.40_chq_relguide/)
- [Mobile Quick Reference Guides](https://twdocs.netlify.app/userdoc/pos/qrg/)

### New promotion added: Buy (at least) X, get discount

`Build 6.40.84: PRO-10003`

We've added a new **Buy (at least) X, get discount** promotion type to Teamwork Commerce PRO suite. 

#### How the promotion is applied in POS PRO

The **Buy (at least) X, get discount** promo is applied automatically when the customer purchases the minimum number of items required to activate the promotion. 

For example, if the following promo rule is configured in CHQ: **buy (at least)** `3` **items from promo groups:** `Holiday Sale`, then in POS PRO, the promo is applied to the receipt once three items from the `Holiday Sale` promo group are added under `Sales Receipt > Cart`.

The discount applied by this promo can result in a percentage or an amount taken off the receipt total. 

If a percentage is configured, the discount is applied to *all* eligible items on the receipt, regardless of how many are added to Cart. For example, if three items are required to get 10% off the sale, and the customer purchases five promo items, the discount is applied to all five items.

Alternatively, if an amount discount is configured, that amount does not change regardless of the number of purchased promo items. For example, if three items are required to get €10 off the sale, and the customer purchases five promo items, the discount amount remains €10. 

#### Configuration in CHQ

Prior to application in POS PRO, the promo must be set up in CHQ under `sales > promotion engines > new`. 

Once the user selects the respective promo type and clicks **ok**, the **new promotion engine** dialog opens where it's possible to configure the details and application rules of the promo:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_8.jpg" width="700px"%}}
For details on configuration in CHQ, refer to [V6.40 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.40_chq_relguide/).

#### Promo application in the Sales Receipt area

Under `Sales Receipt > Cart`, the **Buy (at least) X, get discount** promotion is applied automatically based on the promo application rules.

Once applied, the promo items get the **Promo** label. Additionally, the green `Promotions Applied. View Promos` message displays at the top:
{{% gimg src="632_posrelguide_22.png" width="700px"%}}
Tapping **View Promos** in the message opens the **Promotions** dialog where the details of the applied promotions are available.

#### See also

- [V6.40 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.40_chq_relguide/)
- [Mobile Quick Reference Guides](https://twdocs.netlify.app/userdoc/pos/qrg/)

### Sales Receipt: Manually removing a promotion

`Build 6.40.84: PRO-4039`

We've added the capability to manually remove a promotion from the Sales Receipt. 

This feature gives users with appropriate security rights additional control over promotion application in POS PRO. For example, the user may need to remove a promotion when there's a specific reason that's not accounted for by the automatic application.

#### Removing a promotion in the Sales Receipt area 

1. Open the **Promotions** dialog by doing one of the following:
    - in the right-side panel, tap **Promo Discounts** {{% inum "1" %}}
    - at the bottom, tap **View Promos** {{% inum "2" %}}
    - in the **Promotions Applied** message that appears at the top, tap **View Promos** {{% inum "3" %}}
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_10.png" width="700px"%}}
In the **Promotions** dialog that opens, under **APPLIED PROMOTIONS**, all active promotions are listed.

2. To remove a promotion, in the required row, tap **Remove Promo**:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_9.png" width="400px"%}}
{{% notice info %}}
To do so, the user must be granted the **Sales – Allow removing promotions** security right.
{{% /notice %}}
3. In the confirmation dialog that appears, tap **Remove Promotion**.
{{% notice note %}}
Note that the system will not apply a removed promotion to the *current* receipt until the user re-applies that promo manually. 
{{% /notice %}}
Removed promotions are moved to the **REMOVED PROMOTIONS** section in the **Promotions** dialog:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_11.png" width="400px"%}}
To apply the promo again, tap **Reapply Promo**.

If the promo cannot be re-applied due to a certain condition – for example, a customer with insufficient membership level has been added – the **Cannot Apply Promo** message appears. The user must change the details of the receipt and then tap **Reapply Promo** again.

#### Putting a Sales Receipt with removed promotions on hold

When a Sales Receipt is put on hold, manually removed promotions are not saved in the removed state. 

When the user selects the **Hold** option, and there are removed promotions on the receipt, the following message comes up: `Removed Promotions: Removed promotions will not be saved with the held receipt`. 

When the Sales Receipt is removed from hold, available promotions are applied anew based on the current state of the Receipt.

#### See also

- [V6.40 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.40_chq_relguide/)
- [Mobile Quick Reference Guides](https://twdocs.netlify.app/userdoc/pos/qrg/)

### Additional user login when performing a return

`Build 6.40.84: PRO-9552`

In POS PRO, we've added the capability to require an additional user login when performing Open and Verified Returns. 

This update adds a layer of a security to prevent possible fraud related to processing merchandise returns. 

#### Configuration in CHQ

To enable the feature for a company location, in CHQ under `settings > location settings > locations / location settings > [selected location] > sales >` the `sales` section, select the **require second login for returns (V6)** checkbox and then save the changes.

#### Second user login in the Sales Receipt area

If there is a return item in the **Sales Receipt** area, and the user taps **PAY**, the **Return Verification** dialog opens:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_14.png" width="700px"%}}
In the dialog, a different user must enter their **Username** and **Password** and then tap **LOG IN**. This cannot be the same user who started the return. 
{{% notice note %}}
The user who is verifying the return must be granted the **Sales – Allow to verify return** security right.
{{% /notice %}}
If the same user who started the return attempts to log in, the **Different User Required** warning message comes up.

After the verification, if the user goes back to `Sales Receipt > Cart` and removes some of the return items or adds new return items, on tapping **PAY**, the **Return Verification** dialog appears once more.

Once verification is complete, the **Payment** area opens, and the user can proceed with the return transaction as expected. 
{{% notice info %}}
At the database level, information on the user who performed the verification is saved in the receipt record. This information is stored for printing, reporting, and export via API.
{{% /notice %}}

#### See also

- [V6.40 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.40_chq_relguide/)
- [Mobile Quick Reference Guides](https://twdocs.netlify.app/userdoc/pos/qrg/)

### RFID reader: Automatic network connection

`Build 6.40.84: PRO-8157`

Starting from version 6.40.84, network connection for RFID readers is established automatically. 

In particular, if the Ethernet cable is plugged into the device, the RFID reader utilizes Ethernet connection. Alternatively, if the Ethernet cable is disconnected, network connection type is automatically switched to Wi-Fi. 
{{% notice warning %}}
Please be advised that if RFID network connection is changed when a sale is in process, the user will see a notification about RFID reader connectivity. In this case, it's recommended that **the sale in process is re-started** for the network connection to be automatically re-established.
{{% /notice %}}
As a part of this update, the **Connection Type** setting previously available in POS PRO under `Settings > RFID Reader` has been removed.

### Givex gift cards: Extended capabilities

`Build 6.40.139: PRO-10160`

We've extended Givex gift card functionality in POS PRO V6 with the following capabilities:

- selling a Givex gift card
- incrementing the balance of an existing Givex gift card
- checking the balance of a Givex gift card
- making a refund to a Givex gift card
- making a Verified Return of a Givex gift card that hasn't been redeemed

#### Configuration in CHQ

For Givex related functionality to be available in POS PRO, Givex integration must be configured in CHQ:

- at the store location level under `settings > location settings > locations / location settings > [your location] > payment >` the `payment processing - Givex` section, or
- at the company level under `settings > sales > payment processing >` the `givex` section

Additionally, at least one physical gift card item with **gift card processor** `Givex` must be set up in the inventory. Alternatively, if the retailer uses several types of Givex gift cards, several such gift card items may be configured.

Furthermore, for Givex balance check to be available in POS PRO, in CHQ, a **check balance** payment method must be set up where **payment processing** setting is set to `Givex`. 

For details on CHQ configuration, see [V6.40 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.40_chq_relguide/).

#### Selling a Givex gift card

To sell a new Givex gift card, in POS PRO:

1. On the Home Screen, tap **NEW SALE**.

2. In the **Sales Receipt** area that opens, tap **GC Purchase**. Depending on your custom settings, the **GC Purchase** button can be located at the top of the right-side panel {{% inum "A" %}} or in the **More** menu {{% inum "B" %}}:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_15.png" width="700px"%}} 

3. In the dialog that opens, in the **Gift Card Provider** field, make sure that `Givex` is selected.
{{% notice note %}}
The **Gift Card Provider** field is not visible if only one gift card provider is available in the retailer's environment.
{{% /notice %}}

4. In the **Gift Card Search** field, enter the gift card number manually or by scanning:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_16.png" width="400px"%}}
Once the gift card number is entered, the following fields appear:
**Field**|**Value**|
:-----------|:-----------|
**Gift Card #**| Entered gift card number|
**Gift Card Item**| Tapping **Select** in the field opens the **Gift Card Item** dialog where it's possible to select a gift card item from the catalog. This option may be required if the retailer sells different classes of Givex gift cards. <br>Note that the **Gift Card Item** dialog shows only gift cards that have Givex set as the gift card processor.<br>**Important**: The **Gift Card Item** field is not visible if only one Givex gift card is set up in the retailer's environment|
**Card Amount**|Amount loaded on the gift card. The default amount is adopted from the gift card selected in the **Gift Card Item** field. {{% notice info %}}
**FIXED VS. FLEXIBLE GIFT CARD AMOUNT**<br>
The retailer can sell Givex gift cards with fixed face values. In this case, when the user fills out the **Card Amount** field, the entered amount is validated against the value configured at the database level. If the values do not match, the error message comes up.<br>Alternatively, if the gift card value is flexible, the user can enter any **Card Amount** value within configured limits.{{% /notice %}} If the user enters an amount that exceeds the **minimum gift card sell amount** or **maximum gift card sell amount** values set in CHQ under `settings > sales > payment processing` or `settings > location settings > locations / location settings > [selected location] > payments >` the `payment processing - Givex` section, the **Done** button is disabled. Alternatively, if there are no limits configured, possible values range from `0.01` to `999,999,999.99`|
**Current Balance**|Gift card balance before the current transaction|
**New Balance**|Gift card balance after the current transaction|
**Expiration Date**|The date when the card is scheduled to expire|

5. Define the **Gift Card Item** and **Card Amount** fields.

6. Tap **Done** in the upper right corner. Back in the **Sales Receipt** area, the gift card record is added to the Cart:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_17.png" width="500px"%}}

7. At the bottom-right, tap **PAY** and then accept the payment.

8. Finalize the transaction.
{{% notice note %}}
If there's no connection to CHQ/Givex on finalization, the sale is not finalized, and the **Server Unavailable** error message appears. Note that transactions with sold Givex gift cards cannot be finalized offline.  
Additionally, please note that if an error occurred during finalization, it's the users responsibility to contact Givex and check if gift card activation has been authorized. If required, the gift card transaction should be voided on the Givex side.
{{% /notice %}}

#### Re-loading an existing Givex gift card

To increment the balance of an existing Givex gift card, in POS PRO:

1. On the Home Screen, tap **NEW SALE**.

2. In the **Sales Receipt** area that opens, tap **GC Purchase**. Depending on your custom settings, the **GC Purchase** button can be located at the top of the right-side panel {{% inum "A" %}} or in the **More** menu {{% inum "B" %}}:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_15.png" width="700px"%}} 

3. In the dialog that opens, in the **Gift Card Provider** field, make sure that `Givex` is selected.
{{% notice note %}}
The **Gift Card Provider** field is not visible if only one gift card provider is available in the retailer's environment.
{{% /notice %}}

4. In the **Gift Card Search** field, enter the gift card number manually or by scanning:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_16.png" width="400px"%}}
Once entered, the following appears in the dialog:

    - pre-defined load amounts are available if multiple gift card items are set up in the catalog:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_18.png" width="400px"%}}
Tapping a pre-defined amount fills out the **Add Amount** field with the respective value.
    
    - **Gift Card #**: entered gift card number

    - **Add Amount**: amount that is to be loaded on the gift card. If the user enters an amount that exceeds the **minimum gift card sell amount** or **maximum gift card sell amount** values set in CHQ under `settings > sales > payment processing` or `settings > location settings > locations / location settings > [selected location] > payments >` the `payment processing - Givex` section, the **Done** button is disabled. 

    - **Current Balance**: gift card balance before the current transaction

    - **New Balance**: gift card balance after the current transaction

    - **Expiration Date**: the date when the card is scheduled to expire
    - **10 MOST RECENT TRANSACTIONS**: the list of recent transactions performed against the gift card:
    {{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_19.png" width="400px"%}}
    For each transaction, the following information is available: transaction date and store name, transaction type (`Payment` or `Load`), and transaction amount

5. Define the **Add Amount** field.

6. Tap **Done** in the upper right corner.

7. Back in the **Sales Receipt** area, tap **PAY** and then accept the payment.

8. Finalize the transaction.

#### Checking Givex gift card balance

To check the balance of a Givex gift card, in POS PRO:

1. On the Home Screen, tap **NEW SALE**.

2. In the **Sales Receipt** area, add items and a customer as required and then tap **PAY**.

3. In the **Payment** area, in the right-side panel, tap **[your Givex Check Balance payment method]**.
{{% notice note %}}
The name of the payment method is defined by your custom settings.
{{% /notice %}}

4. In the **Gift Card Balance** dialog that opens, in the **Gift Card Provider** field, select `Givex`.  
**NOTE**: The **Gift Card Provider** field is not visible if only one gift card provider is configured in the retailer's environment.

5. Then, in the **Gift Card Search** field, search for the required card by entering its number manually or via scanning:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_20.png" width="400px"%}}
Once the gift card is found, the following information displays in the dialog:

    - **Gift Card #**: the number of the gift card
    - **Balance**: gift card balance
    - **Expiration Date**: the date when the gift card is scheduled to expire

Additionally, information on last 10 transactions performed against the gift card is available.

6. Tap **Close** at the top-left to return to the **Payment** area.

#### Making a refund to a Givex gift card

In POS PRO, it's possible to make a refund to a new or existing Givex gift card. To do so:

1. Start a Verified or Open Return. To learn how to do so, see [Making a Verified Return of merchandise](https://twdocs.netlify.app/userdoc/pos/qrg/sr/making_vr/) or [Making an Open Return](https://twdocs.netlify.app/userdoc/pos/qrg/sr/making_open_return/) respectively. 

2. Under `Sales Receipt > Payment`, in the right-side panel, tap **[your Givex Gift Card payment method]**. Note that the payment method icon is displayed with a blue arrow meaning that value will be *loaded* on the gift card.

3. In the dialog that opens, in the search field, enter the number of the gift card manually or via scanning:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_21.png" width="400px"%}}
{{% notice note %}}
Note that it's possible to enter the number of a new gift card (that is issue a new gift card) or an existing gift card.
{{% /notice %}}
Once the value is loaded on the gift card, the confirmation dialog displays:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_22.png" width="350px"%}}

4. Tap **Close** to return to the **Payment** area. In the **Payment** area, the gift card record appears in the left-side panel:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_23.png" width="400px"%}}

5. Finalize the transaction.

#### Making a Verified Return of a Givex gift card

It's now possible to return Givex gift cards via the Verified Return functionality in POS PRO. To learn how to make a Verified Return of a gift card, see [Returning a Gift Card](https://twdocs.netlify.app/userdoc/pos/qrg/sr/returning_gc/).
{{% notice note %}}
Please be advised that return of a gift card is possible only if the card balance is the same as at the time of the original sale. If the balance is less, the user will see the **Insufficient Balance** error message when attempting to perform the return.
{{% /notice %}}

#### See also

- [V6.40 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.40_chq_relguide/)
- [Mobile Quick Reference Guides](https://twdocs.netlify.app/userdoc/pos/qrg/)

### Correction to how Banorte payment information is stored

`Build 6.40.139: PRO-11368`

At the database level, we've ensured that payment-related data is correctly saved in the ReceiptRemotePayment table when the payment has been processed via Banorte terminal. 

This ensures that payment information is correctly represented in printed receipts as well as in reports. 

### Showing line item discount on Adyen terminal

`Build 6.40.179: PRO-11659`

We've extended the feature that allows for showing transaction overview on the display of the connected Adyen terminal. 

Previously, only the transaction total discount was shown on the terminal. Now, discount per line item is available for display. 

#### See also

[Showing receipt details on Adyen payment terminal](https://twdocs.netlify.app/userdoc/pos/relguides/6.40_mobile_rel_guide/#showing-receipt-details-on-adyen-payment-terminal)

### New Allow held adjustment security right

`Build 6.40.179: PRO-11551`

We've added support of the **Adjustments – Allow held adjustment** security right. 

In POS PRO, users with this security right can place newly created as well as existing Adjustment Memos on hold. Additionaly, only users who are granted this right can select and change the hold reason. 
{{% notice info %}}
The **Adjustments – Allow held adjustment** security right does NOT control the user's capability to remove Adjustment Memos from hold.
{{% /notice %}}

### ShippyPro: Sending a call to close the shipment

`Build 6.40.198: PRO-11870`

We've extended the integration with ShippyPro with the capability to send a call to close the shipment after the shipping label is obtained. 

#### Purpose

Some carrier services integrated with ShippyPro require sending an additional call to close the shipment and activate the tracking number. If such a call is not received, the carrier service may charge an additional fee for the shipment that hasn't been closed. 

#### Configuration in CHQ

To allow for sending the closing call automatically, in CHQ, the **require closing** setting must be configured for the respective carrier service. 

The setting is available under `settings > company settings > shipping services > ShippyPro – configure methods > [your carrier service/shipping method]`.

#### Sending the shipment closing call in POS PRO

In POS, the call to close the shipment is passed to ShippyPro after the user taps **Get Label** under `Shipments > Outgoing > [selected Ship Memo] > Shipment > Shipment – Carton [number]`, and the shipping label is generated. If the call is successful, no additional notifications are displayed to the user. 

If the call to close the shipment fails, the **Error Closing Shipment** error message displays. The message includes the error code and message returned by ShippyPro.

Additionally, once the **Error Closing Shipment** message is closed, the **Shipment Not Closed**: `The shipment could not be closed. Additional fees may be assessed by the shipper` message is shown. 

If the closing call fails, the user has the choice to keep the shipment and possibly incur the extra fee or void the shipment by tapping **Void Label**. 

#### See also

- [V6.40 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.40_chq_relguide/)
- [Mobile Quick Reference Guides](https://twdocs.netlify.app/userdoc/pos/qrg/)

### Removed options in the finalized Sales Receipt view

`Build 6.40.198: PRO-11948`

In the finalized Sales Receipt (SR) view, we've removed the **Return**, **Void/Reverse**, and **Reprint** options. 

This update is a prevention measure against duplicate DTNs that may result from performing these actions in the finalized SR view opened from the Verified Return form.

{{% notice info %}}
Note that these options are still available in the Verified Return mode (the **Return** area).
{{% /notice %}}
Additionally, as a part of this update, we've changed the behavior of the **Close** button {{% inum "A" %}} on the **Sale Complete** screen of a Verified Return:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_36.jpg" width="700px"%}} 
Now, on tapping **Close**, the user is returned to POS Home Screen instead of the **Return** area.

### Cancelling an item in a Reserve Order

`Build 6.40.219: PRO-12248`

In POS PRO, it is now possible to cancel an item in a Reserve Order. 

Changing an item's status to `Cancelled` returns that item's quantity to available-to-sell inventory, indicating that the item is no longer reserved.

To cancel an item in an Reserve Order, in POS PRO:

1. On the Home Screen, tap **Reserve Orders**. Depending on your custom settings, the **Reserve Orders** button may be located in the navigation panel at the bottom or in the **More** menu.

2. In the **Reserve Orders** area, find and tap the Order that you want to edit.

3. Tap the **Items** tab at the top.

4. Swipe left on the required item and then tap **Cancel Item** {{% inum "A" %}}:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_24.png" width="700px"%}}
Alternatively, tap **View** and then, in the **Edit** dialog, tap **Cancel Item** {{% inum "B" %}}:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_26.png" width="350px"%}}  
Note that, back on the **Items** tab, the `Cancelled` label will be applied to the item:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_25.png" width="700px"%}}

5. Tap **Re-Release** at the bottom-right.

### Selling items from a Reserve Order

`Build 6.40.198: PRO-12249`

We've added the capability to quickly convert a Reserve Order into a sale.
{{% notice note %}}
For the Reserve Order to be converted into a Sales Receipt:

- there must be an active Drawer Memo, and
- the user must have the **Sales – Access sales receipts** security right
{{% /notice %}}
To do so, in POS PRO:

1. On the Home Screen, tap **Reserve Orders**. Depending on your custom settings, the **Reserve Orders** button may be located in the navigation panel at the bottom or in the **More** menu.

2. In the **Reserve Orders** area, find and tap the Order that you want to edit.

3. In the document, tap **Sell** {{% inum "A" %}}:
{{% notice tip %}}
Note that, before tapping **Sell**, it's possible to cancel items that the customer may have rejected. To do so, swipe left on the required item and then tap **Cancel Item**.
{{% /notice %}}
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_27.png" width="700px"%}}

4. In the confirmation dialog that appears, tap **Sell & Archive**.

On tapping **Sell & Archive**, the Reserve Order is archived, and a new Sales Receipt is opened. The customer and items from the Reserve Order are automatically transferred to the Sales Receipt. 
{{% notice info %}}
Note that *all* items that were in the `Reserved` status are transferred to the Sales Receipt. Items in the `Cancelled` status are not carried over.
{{% /notice %}}
The user is then able to process the Sales Receipt normally: add new items, discounts, payments, and so on. 

#### See also

- [V6.40 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.40_chq_relguide/)
- [Mobile Quick Reference Guides](https://twdocs.netlify.app/userdoc/pos/qrg/)

### Sales Receipt: Multiple associates at the item level

`Build 6.40.198: PRO-11359`

We've added the capability to assign multiple associates to a line item on a sale. 

When an item has multiple associates assigned, the percentage of the sale value that goes to each associate is calculated automatically. Alternatively, users with the appropriate security right can adjust this percentage manually. 

#### Purpose

For retailers that utilize commission based pay, this feature allows for splitting a sale item's value between several associates. 

#### How an associate's percentage is calculated

If there's more than one associate at the item level, the automatic calculation evenly distributes the percentage (the item's sale value) among the associates. For example, if two associates are added, the distribution will be as follows: 50% for Associate 1 and 50% for Associate 2. 

If the percentage can't be distributed evenly, POS applies the odd percent to the first associate on the item. For example, if three associates are added, the distribution will be as follows:

- Associate 1 – 34%
- Associate 2 – 33%
- Associate 3 – 33%

##### Manual percentage allocation

The user can manually distribute the percentage between the associates as desired as long as the total percentage equals 100%. For manual allocation, decimals are allowed, for example 25.5% or 33.33%.
{{% notice note %}}
Note that, if the percentage is manually changed for one of the associates, it's required to do so for *all* associates on the item as POS does not automatically recalculate the remaining percentage.  
Manual allocation is overriden by automatic recalculation only in the following cases:

- an associate has been added or removed from the item
- all associates except for one were removed from the item (the value for the remaining associate is set to 100%)
- the item is removed from the transaction
{{% /notice %}}
Also, it's not possible to set an associate's percentage to 0. 

#### Assigning multiple associates to an item

To add several associates at the item level, in POS PRO:

1. On the Home Screen, tap **NEW SALE**.

2. On the **Cart** tab of the **Sales Receipt** area, add sale item(s).

3. Swipe left the required item and then tap **Edit**.

4. On the **Item Details** tab that opens, tap the value in the **Associate** field:
{{% gimg src="V6.41 POS Rel Guide/6.41_mobrelguide_48.jpg" width="700px"%}}
{{% notice note %}}
To do so, the user must have the **Sales Receipts – Chng Assc** security right.  
{{% /notice %}}

5. Tap **ADD** {{% inum "A" %}}:
{{% gimg src="V6.41 POS Rel Guide/6.41_mobrelguide_49.jpg" width="400px"%}}

6. In the **Select Associate** dialog, find and tap the associate you want to add. Note that, once the associate is added, the percentage is distributed automatically:
{{% gimg src="V6.41 POS Rel Guide/6.41_mobrelguide_50.jpg" width="400px"%}}
    - Manual distribution is possible by tapping the values in the **PERCENT** column and entering the desired percentage. Note that the **Total Percentage** field shows the percentage that has already been allocated {{% inum "A" %}}:
    {{% gimg src="V6.41 POS Rel Guide/6.41_mobrelguide_51.jpg" width="400px"%}}
    It's not possible to **Save** the changes before all 100% are allocated.

7. Tap **Save** in the upper right corner.  
Back in the **Sales Receipt** area, the item that has multiple associates assigned will have the **Associates (number)** label applied {{% inum "A" %}}:
{{% gimg src="V6.41 POS Rel Guide/6.41_mobrelguide_52.jpg" width="700px"%}}

8. Finalize the transaction as required.

#### See also

- [V6.40 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.40_chq_relguide/)
- [Mobile Quick Reference Guides](https://twdocs.netlify.app/userdoc/pos/qrg/)

### New security right for changing Validation on customer fields

`Build 6.40.198: PRO-12268`

Starting from version 6.40.198, users must be granted the **Customers – Edit validation flags** security right to change the **Validation** status for the following customer record fields:

- Primary Email
- Phone 1—4
- Postal Address

{{% notice info %}}
The **Validation** field indicates if the customer's email address, phone number, or postal address respectively is valid and can be used for communications. 
{{% /notice %}}

If the user doesn't have the **Customers – Edit validation flags** security right and, in a customer record, tries to edit one of the fields listed above, the **Insufficient Rights** message displays with the option to perform manager override. Note that, if multiple **Validation** fields must be changed, a separate manager override is required for each change.

### Sales Receipt: Updated Customer URL field

`Build 6.40.198: PRO-12035`

We've updated the display of the **Customer URL** field (**Customer Profile Link** prior to version 6.40.198) in the `Sales Receipt > Customer` area of POS PRO V6.
{{% notice info %}}
The **Customer URL** field may contain a link to the webpage with customer information if the retailer uses an external system to store customer data.
{{% /notice %}}
In particular:

- the name of the field is now configurable in CHQ
- the value now displays as `View [field name]`

#### Configuration in CHQ

To define how the name of the field displays in POS, in CHQ under `settings > customer > customer settings >` the `general` section, define the **customer URL label** field. 

Additionally, note that it's possible to set up translations for the field by tapping the **globe** icon next to the setting.

#### Field display in POS PRO

Under `Sales Receipt > Customer`, the name of the field displays as configured in CHQ.

If no custom name is defined, **Customer URL** appears by default {{% inum "1" %}}: 
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_28.png" width="700px"%}}
Also, the value in the field now displays as **View [field name]**. For example, if the field name is set to default **Customer URL**, the value will appear as `View Customer URL`.

### Processing eCommerce Reserve Orders

`Build 6.40.230: PRO-12140`

We've introduced support of Reserve Orders (RO) imported from an eCommerce platform.

This resulted in addition of the following to POS PRO V6:

- push notifications of new ROs that are created in `Held` status
- support of default expiration period for ROs 
- support of email notifications sent to customers when releasing ROs

#### Purpose

This feature allows POS PRO users to fulfill item reservations made by customers on the integrated eCommerce website. 

Reserve Orders (ROs) placed online are automatically imported into the Teamwork Commerce system and, in POS PRO, appear in the **Reserve Orders** area in the `Held` status. 

The store associate needs to put the required items aside for the customer and confirm that by tapping **Release** in the RO. At this point, a notification is sent to the customer's email.

If the customer comes to the store and decides to purchase the items, the RO can be converted to a sale. 

Alternatively, if the customer hasn't come to the store, the RO automatically expires after the configured period of time, or the RO can be archived manually. 

#### Support of RO default expiration period

{{% notice info %}}
In CHQ, default expiration period can be configured under `settings > inventory / catalog > reserve reasons > [selected reserve reason]` by defining the **default expiration period (hrs)** field.  
Please note that the default expiration period is configured for a specific reserve reason, which allows for setting different expiration periods for different types of ROs. For example, it's possible to define a distinct expiration period for all ROs created with `eCommerce reservation` reserve reason. 
{{% /notice %}}
If a default expiration period is configured for eCommerce ROs in CHQ, in POS PRO, the expiration date and time will be visible under `Reserve Orders > [selected Reserve Order] > Order`:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_29.png" width="700px"%}}
**NOTE**: Please be advised that it's possible to change the expiration date and time manually. Manual entry has precedence over the default expiration settings.

#### Push notifications about new ROs

If a new RO in the `Held` status appears in POS PRO, all devices at that company location receive the **New Reserve Order** push notification:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_30.jpg" width="500px"%}}
{{% notice tip %}}
To receive POS PRO push notifications on devices, in CHQ, make sure that under `settings > location settings > locations / location settings > [selected location] > general settings >` the `general` section, the **show OS notifications** checkbox is selected.
{{% /notice %}}

#### Customer email notification on releasing an RO

When the user taps **Release** in the RO, an email is sent to the customer's email address notifying the customer that the items are reserved. The email includes general RO information as well as the list of items that were in the `Reserve` status (items in `Cancelled` status are not included into the email).
{{% notice info %}}
To enable email notifications, in CHQ under `settings > inventory / catalog > reserve reasons > [selected reserve reason]`, select the **send email notifications for "reserve"** checkbox. Note that this setting can be enabled for a specific reserve reason.
{{% /notice %}}

#### See also

- [V6.40 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.40_chq_relguide/)
- [Mobile Quick Reference Guides](https://twdocs.netlify.app/userdoc/pos/qrg/)

### RFID: Filtering by configured GTIN prefixes

`Build 6.40.230: PRO-12185`

In Teamwork Commerce PRO suite, we've added the capability to define GTIN prefixes that POS PRO should recognize when scanning items with the connected RFID reader. 
{{% notice info %}}
Global Trade Item Number (GTIN) can be used by a company to uniquely identify all of its trade items. 
{{% /notice %}}
{{% notice tip %}}
To define allowed GTIN prefixes for a company location, in CHQ under `settings > location settings > locations / location settings > [selected location] > general settings >` the `general` section, enter the required GTIN prefixes in the **GTIN allowed prefixes** field.  
Alternatively, to do so at the company level, under `chq > settings > sales > POS settings >` the `general` section, fill out the **GTIN allowed prefixes** field. 
{{% /notice %}}
RFID item tags that do not include the configured GTIN prefixes are ignored by POS PRO. 

This update allows for narrowing RFID scanning down to the items that are included in the brand's product catalog and, respectively, are registered under a certain GTIN company prefix. That resolves the issue of the **Item Failed To Scan** error message appearing in POS when scanning item tags with different encoding (for example, security tags).

### Updated application of coupon-activated promos

`Build 6.40.230: PRO-12322`

We've changed the logic of how a coupon-activated promotion is applied to a sale when there are already other promotions applied to the transaction. 

Prior to version 6.40.230, when a coupon-activated promo was applied, all other promos were automatically removed from the transaction. 

Now, coupon-activated promos follow the promo ranking configured in CHQ. For example, if promo A applied to the transaction has rank 1, and coupon-activated promo B has rank 2 (lower than rank 1), coupon-activated promo B will not be applied. Conversely, if coupon-activated promo B has rank 1, promo A will not be applied (or will be removed if applied prior to that).
{{% notice info %}}
In CHQ, promo rank can be configured under `sales > promotion engine > [selected promotion engine] > general` by defining the **rank** field. 
{{% /notice %}}

### V6.40 POS PRO provisioning profile

`Build 6.40.230: PRO-12598`

We've set up the provisioning profile for POS PRO version 6.40.

### Extended payment logs

`Build 6.40.240: PRO-12694, PRO-12751`

Payment logging has been extended to provide for better analysis and troubleshooting of detached payment issues. 

### Automated detached payment check available for Banorte payments

`Build 6.40.269: PRO-12323`

We've enabled automated detached payment check for credit card payments processed with Banorte. 
{{% notice info %}}
The detached payment is a terminal payment that is not attached to any Sales Receipt.   
Detached payment check is an existing functionality in POS PRO V6 that allows for automated monitoring of such payments. If a detached payment is found, the user can choose to void the payment or, alternatively, recreate the lost Sales Receipt and attach the payment to the latter.  
For details on how detached payment check is performed in POS PRO, see [Automated detached payment check](https://twdocs.netlify.app/userdoc/pos/relguides/6.39_mobile_rel_guide/#automated-detached-payment-check) in POS PRO Release Guide Version 6.39.
{{% /notice %}}
Now, POS PRO checks for detached Banorte payments in the following cases:

- application crash recovery
- payment time-out and user cancellation
- Sales Receipt finalization
- End-of-Day (EOD)

### Verified Return of promo-grouped items

`Build 6.40.282: PRO-11693`

We've added the capability to process Verified Returns of promo-grouped items in POS PRO based on the rules defined in CHQ. 
{{% notice info %}}
Promo-grouped items are items that have been originally sold as a promo set. For example, in **Buy X, Get Y** promotion, items X and Y are promo-grouped and have been sold together on a specific condition.  
Please be advised that the following promotion types include promo-grouped items:

- Buy X, Get Y										
- Spend More, Get More					
- Buy (at least) X, Get Discount					
- Buy Multiples of X, Get Discount

Respectively, the new feature can be configured for each of the above promotions.
{{% /notice %}}
Now, when initiating a Verified Return of a promo-group item, depending on the selected option in CHQ, POS users are:

- warned if the item was sold as part of a promo group but not restricted in how to process the return, or

- required to return all items from the promo group and then resell the items that the customer wants to keep

#### Purpose

Processing returns of items that were sold as part of a promo set can present a challenge to the business, especially since such returns may be subject to fraud. 

For example, in a scenario where two items were sold on Buy 1, Get 1 Free promotion, item A was sold at full price while item B was given free according to the promo rules. If the customer then returns item A, and the promo applied to the original sale is not accounted for, the customer has the opportunity to keep the item that was given for free. 

To prevent losses associated with returns of items purchased under a promotion, POS PRO will now: 

- display a warning if the return item was originally sold as a grouped item on a promotion  

- auto-select all promo-grouped items for return if the requirement to return all items is configured in CHQ

#### Configuration in CHQ

To be able to use the new feature in POS PRO, it must be first configured in CHQ. To configure:

1. Go to `sales > promotion engine` and click **new**.
{{% notice tip %}}
To edit existing promotions, under `sales > promotion engine`, find and click the required one. In the dialog that appears, go to **options** and select **promo returns** under **receipt conditions**. 
{{% /notice %}}

2. Select **promotion type** from the dropdown menu and press **ok**:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_31.png" width="400px"%}}

3. In a dialog that opens, go to **options** and check **promo returns** if unselected (the option will be selected by default for new promotions). 

4. In the **grouped promo items partial return** dropdown menu, select one of the following:

    - **warn and allow**: to allow the POS user to process any combination of returned items with warning of the promotion
    - **require all items returned together**: to constrain the POS user to return all items purchased on the promotion and reprocess items the customer kept
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_32.jpg" width="500px"%}}

5. Save your changes. 

#### Processing returns of promo-grouped items 

In this section, we will outline how to process returns of promo-grouped items in POS PRO. 

##### Partial return

{{% notice note %}}
The steps described below are applicable if the **warn and allow** option is configured in CHQ. If this option is selected, the POS user can accept a partial return.
{{% /notice %}}
Start by initiating a Verified Return in POS PRO:

1. On the **Home Screen**, tap **New Sale**.
​
2. In the **Sales Receipt** area, tap **Find Receipt** at the top of the right-side panel or in the fly-out menu. 

{{% notice tip %}}
Alternatively, you can find the original transaction in the customer's purchase history. To do so, under `Sales Receipt > Customer`, add the customer's record and then tap **Purchase History**.
{{% /notice %}}

3. In the **Find Receipt** area, find the original receipt by:

    - scanning the physical receipt with the camera, or
    - manually entering the **Transaction #**, **Web Order #**, or **RMA Code** from the receipt into the **Search** field and then tapping **Find** in the upper right corner

4. In the **Return** area that opens, the receipt will display the details of the purchase.  
In the **PROMO** column, items linked in a promo group are marked with the **GROUP [number]** tag {{% inum "A" %}}: 
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_33.jpg" width="700px"%}}
{{% notice info %}}
If there are multiple promo groups of items in the original transaction, such groups receive different numbers. For example, if items A and B are grouped in one promo set, and items C and D – in a different one, items A and B will receive the **GROUP 1** tag, and items C and D – the **GROUP 2** tag. 
{{% /notice %}}
If more than one promo is applied to an item, the **PROMO** column will show **MULTIPLE** for that item. Additionally, under the **MULTIPLE** tag, it’s possible to tap **See Promos** to view the list of applied promos.

5. Select the item to return.   
If you select an item from a promo group, the **Promotion Item** message will be displayed:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_34.jpg" width="700px"%}}
Additionally, the above message displays if you first select all items via the **RETURN ALL** option and then unselect an item from a promo group.  
In the message, tap **Okay** to proceed. 

6. Continue with the return as usual: 

    - To select a return reason for an item, in the **RETURN REASON** field, tap **Select Reason**. In the pop-over that appears, select the required option: 
    {{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_35.jpg" width="700px"%}}
    Alternatively, to define the return reason for all items, next to **RETURN ALL** tap **Select Reason**.

    - To define the return quantity, tap the **RETURN QTY** field in an item’s row.

    - To edit the fees that are to be returned, tap the **FEES** value.

7. When finished, tap **Return Item(s)** at the bottom-right.​

8. Back in the **Sales Receipt** area, tap **PAY** at the bottom-right. In the **Payment** area, choose the required refund method and complete the refund.​

9. Tap **FINALIZE** at the bottom-right.

###### Removing items from the Cart

After you’ve added item(s) for the Verified Return, on attempting to remove an item from the Cart, POS will issue a warning `The item selected was sold as part of a grouped promotion.` The user then has an option to **Remove Item**, which removes the item from the cart, or **Cancel**, which returns to the Cart without removing the selected item. 

##### Return all

{{% notice note %}}
The steps described below are applicable if the **require all items returned together** option is configured in CHQ.
{{% /notice %}}
If the store doesn’t allow partial returns at the discretion of the sales assistant, it’s possible to return all items in the sales receipt and resell the customer the item(s) they want to keep. 

To return all promo-grouped items in the receipt: 

1. When in the **Return** area, in the **RETURN ALL** field in the right-side panel, tap **Select Reason**. 

2. In the menu that opens, tap the required reason. The selected reason will be applied to all items in the transaction.   
If you then unselect an item from the promo group, the **Promotion Item** dialog will display:
{{% gimg src="V6.40 POS Rel Guide/6.40_posrelguide_36.jpg" width="700px"%}}
Tapping **Return All Items** in the dialog selects all items from the promo group.  

3. When finished configuring the return items, tap **Return Item(s)** at the bottom-right.​

4. Back in the **Sales Receipt** area, tap **PAY** at the bottom-right. In the **Payment** area, choose the required refund method and complete the refund.​

5. Tap **FINALIZE** at the bottom-right.

6. Start a new sale and resell the items that the customer wants to keep.

#### See also

- [V6.40 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.40_chq_relguide/)
- [Mobile Quick Reference Guides](https://twdocs.netlify.app/userdoc/pos/qrg/)

## Issue Resolutions

### Incorrect error message on Ship Memo finalization

`Build 6.40.84: DS-2667`

**Issue**  
In POS PRO, users were sometimes unable to finalize a Ship Memo with the **Server Unavailable** error coming up. That happened under the following conditions:

- in CHQ, **Ship Memo 1** and **Ship Memo 2** were created against a Sales Order
- at the same time, User 1 opened **Ship Memo 1** in CHQ and User 2 opened **Ship Memo 2** in POS
- right after **Ship Memo 1** was finalized in CHQ, User 2 attempted to finalize **Ship Memo 2** in POS

As the Sales Order was still open in CHQ when the user attempted to finalize **Ship Memo 2** in POS, CHQ could not update that Sales Order as expected.

**Resolution**  
We've changed the error message that appears in the scenario described above to the following: `Server Busy: This document cannot be updated as the server is busy. Please try again shortly`. 

On tapping **Okay** in the message, the user is returned to the Ship Memo without finalization.

### Item custom text fails to display in POS PRO

`Build 6.40.84: DS-3268`

We've fixed the issue where, if a **custom text** value was defined for an item in CHQ under `inventory > styles & items > [selected style/item] > items >` the `item custom fields` section, that value would fail to display in POS PRO.

### DrawerMemoMedia table incorrectly populated

`Build 6.40.84: DS-2631`

Prior to version 6.40.84, if the store location processed transactions in both base and foreign currencies, at the database level, the fields in the DrawerMemoMedia table were filled out incorrectly. That affected printing and reporting related to the Drawer Memo area. 

The issue has been fixed. Now, the DrawerMemoMedia table is populated as expected.

Additionally, as a part of this update, the following missing fields were added to the DrawerMemoMedia table:

- FCAmount: net payment amount in the foreign currency
- FCPaidInOutAmount: Take In/Out amount in the foreign currency. As of version 6.40.84, this field is not populated and has been added in advance of the possible future functionality
- FCNextDrawerAmount: net payment amount left in the drawer in the foreign currency

### Error on finalizing a Verified Return

`Build 6.40.84: DS-3440`

We've fixed the issue where, when finalizing a Verified Return, the **Invalid Tax Configuration** error message could appear even if all items on the receipt had tax categories properly configured. 

### Sales Receipts that were put on hold fail to finalize

`Build 6.40.87: DS-3593`

Prior to version 6.40.87, users were sometimes unable to finalize a Sales Receipt that was put on hold prior to finalization. The issue occurred only if:

- there were no other Receipts created against the active Drawer Memo, or
- this was the first Sales Receipt created after POS installation

The issue has been fixed. Now, such Sales Receipts can be finalized as expected.

### Drawer Memo: Counted Amount in End of Day doesn't match the last Midday Count

`Build 6.40.87: DS-3595`

**Issue**  
Occasionally, the closing count of cash in the **End of Day** area failed to match the amount from the last midday count. In particular, under `Drawer Memo > End of Day > DRAWER CASH > Closing Count`, the **Counted Amount** field would display an incorrect amount.
{{% notice info %}}
The End of Day closing count should match the amount from the last Midday Count record if no cash payments were taken and no cash movement records created after that Midday Count.
{{% /notice %}}

**Resolution**  
Now, as expected, the **Counted Amount** in the **End of Day** area is adopted from the last Midday Count if appropriate.

### Drawer Memo: POS stops working when selecting a Take Out reason

`Build 6.40.87: DS-3607`

We've fixed the issue where the POS PRO app could stop working when the user selected a Take Out reason under `Drawer Memo > Manage Cash > Take Out`. 

### The Add Customer security right not working in POS

`Build 6.40.139: DS-3551`

We've fixed the issue where, in POS, users who were granted the **Customers – Add Customer** security right were unable to create a new customer record.

### Printing via fiscal printer fails if promotion is applied

`Build 6.40.139: DS-3599`

Prior to version 6.40.139, printing a receipt via the fiscal printer could occasionally fail with an error if the **buy X, get Y** promotion was applied to the transaction. 

The issue has been fixed. Now, printing via the fiscal printer works as expected. 

### Balance doubled on sold Givex gift cards

`Build 6.40.141: DS-3665`

We've fixed the issue where, after selling a new Givex gift card in POS PRO, the balance on that card was doubled.

### Unable to finalize transactions with removed promo

`Build 6.40.141: PRO-11691`

We've fixed the issue where finalizing a Sales Receipt where an applied promotion was manually removed by the user could fail with a `no such table: ReceiptRemovedPromo` error. 

### ShippyPro: Error when getting the shipping label

`Build 6.40.179: DS-3692`

**Issue**  
When using ShippyPro integration to process a shipment with **Shipping Method** set to `Canada Post Priority` carrier service, trying to get the shipping label failed with `Company Name of Sender is a mandatory field` error. This happened because, at the backend, the ship-from address information sent to ShippyPro was missing the **company** field. 

**Resoltion**  
To resolve the issue, we've added the **company** field to the request sent from Teamwork to ShippyPro. Now, the Ship Memo can be finalized as expected.

### Zero added to UPC when scanning an item with camera

`Build 6.40.179: DS-3704`

We've fixed the issue where, when scanning an item tag with device camera under `Sales Receipt > Cart`, a 0 was added in front of the item UPC resulting in no matching items found in the Catalog.

### Item ship-to address does not appear in CHQ for Send Sales

`Build 6.40.179: DS-3712`

**Issue**  
After a transaction with ship-to-customer items was finalized in POS PRO, in CHQ, the item-level ship-to address was not visible under `sales > order management > [selected send sale order] > items > [selected item] > delivery`. That happened to Send Sale transactions that were put on hold in POS prior to taking the payment. 

**Resolution**  
The issue has been fixed. Now, item-level ship-to address is visible in CHQ for such transactions.

### POS synchronization failure

`Build 6.40.179: DS-3677`

We've fixed the issue where POS could not be synchronized with CHQ due to the following error: `[fiscal].[ReceiptReprintHistory_ins]:FK violated for [ReceiptReprintHistory_t].[PreviousDuplicateId]->[[fiscal].[ReceiptReprintHistory]]`.

### POS initialization error

`Build 6.40.179: DS-3660`

We've fixed the issue where POS initialization could stop with `Synchronization error` message after the **Get posted receipts...** step. 

### Shipments: Inactive locations available as the target location

`Build 6.40.198: DS-3645`

We've fixed the issue where, when selecting a target location for a new outgoing shipment under `Shipments > Outgoing > New Outgoing`, inactive locations were displayed as available options. 

### Using POS PRO is possible after deactivating the device record

`Build 6.40.198: DS-3799`

**Issue**  
When a device record was updated in CHQ, on the respective device, it was possible to continue using the POS PRO app without initialization. 

**Resolution**  
The issue has been fixed. Now, as expected, when a device record is updated, the `The device was deactivated. Please contact support` message displays on opening the POS PRO app on the respective device. To continue using the app, initialization to CHQ is required. 

### The Remove All Discounts option removes applied tax

`Build 6.40.198: DS-3853`

We've fixed the issue where tapping **Remove All Discounts** under `Sales Receipt > Sale Options > Discounts` would also remove the tax applied to the transaction. 

### Ship Memo: Generating the shipping label fails with an error

`Build 6.40.219: DS-3904`

Prior to version 6.40.219, when processing a Ship Memo with ShippyPro where the carrier service is `Canada Post Priority` or `Canada Post Express`, trying to generate the shipping label could fail with the `Company Name of Sender is a mandatory field` error.

The issue has been fixed. Now, the shipping label can be retrieved as expected. 

### Setting items to tax exempt does not change the transaction total

`Build 6.40.219: DS-3601`

**Issue**  
In Sales Receipts with VAT applied, marking an item as tax exempt under `Sales Receipt > Cart > [item name] - edit > Taxes` did not change the transaction total.

**Resolution**  
The issue has been fixed. Now, marking a sale item as tax exempt decreases the transaction total as expected.

### Ship Memo: Phone and Email fields appear blank 

`Build 6.40.219: DS-3903`

**Issue**  
Under `Shipments > Outgoing > [selected Ship Memo] > Shipment`, the **Phone** and **Email** fields appeared blank even if, in the ship-to address edit dialog, the **Phone** and **Email** fields were populated. 

**Resolution**  
The issue has been fixed. Now, on the **Shipment** tab of the Ship Memo, the **Phone** and **Email** values are visible as expected.

### Sales Receipt: New sale opens with Payment Due from the previous transaction

`Build 6.40.230: DS-3871`

**Issue**  
When tapping **Discard Sale** under `Sales Receipt > Payment` and then performing user login for a new sale, in the new Sales Receipt, the **Payment Due** amount from the previous transaction was shown even though the Cart was empty. 

The issue could happen in an environment where user login was required for new transactions (configured under `chq > location settings > locations / location settings > [selected location] > general settings >` the `transaction login` section > the **sale documents** field).

**Resolution**  
The issue has been fixed. Now, after user login, a new Sales Receipt is opened with **Payment Due** `00.0` as expected.

### TSE disconnecting from POS PRO

`Build 6.40.230: DS-3876`

**Issue**  
Company locations using POS PRO in conjunction with a fiscal Technical Security Device (TSE) could encounter the issue where the TSE would disconnect if POS PRO hadn't been used for more than five minutes since the last transaction. That resulted in the **Fiscal system is not connected; check device** error upon starting a new transaction.

**Resolution**  
The issue has been fixed. Now, the TSE stays connected even if POS PRO has been inactive for a period of time. 

### Customer: The GENDER field does not have the Select option

`Build 6.40.230: DS-3782`

We've fixed the issue where, under `Customers > [selected customer]` and `Customers > New Customer`, the **GENDER** field was missing the **Select** button. 

### Finalized Drawer Memo recorded in the "inactive" status

`Build 6.40.230: DS-3710`

We've fixed the issue where a Drawer Memo finalized in POS PRO could be incorrectly saved in the `Inactive` status at the database level.

### POS PRO synchronization error

`Build 6.40.240: DS-3955`

Prior to version 6.40.240, users could encounter the issue where POS PRO synchronization failed with an error.

The issue occurred due to the following:

1. The user tried to finalize a Sales Receipt that had been previously put on hold. Finalization appeared to fail with the **Server Unavailable** error but, at the database level, the transaction was actually posted

2. In POS PRO, the user discarded the Sales Receipt that had failed to finalize. Respectively, the fiscal receipt wasn't created

3. Later, that Sales Receipt was reprinted from POS **Sales History**. At the database level, that resulted in a ReceiptReprintHistory record that didn't reference an original fiscal receipt which didn't allow POS synchronization to complete

The issue has been resolved. Now, POS PRO app synchronizes as expected.
 
### The Search field isn't selected automatically after RFID scanning

`Build 6.40.240: DS-3982`

Prior to version 6.40.240, in the **Print Tags** area of POS PRO, the **Search** field wasn't automatically selected after a product barcode had been scanned with the RFID reader. That prevented users from scanning multiple barcodes in succession. 

The issue has been fixed. Now, after an item barcode is scanned, focus is automatically returned to the **Search** field. 

### Sales Receipt: POS PRO stops working when opening the item edit dialog

`Build 6.40.240: DS-3935`

Prior to version 6.40.230, POS PRO could sometimes stop working when, under `Sales Receipt > Cart`, the user attempted to open the **Edit** dialog for an item. 

That could happen if one of the item's attributes was updated prior to the sale. For example, if the item's **Color** attribute had the `Black` value defined, deleting `Black` from the list of possible values for the **Color** attribute at the CHQ side could cause the issue.

The issue has been fixed. Now, if the item **Edit** dialog cannot be opened due to a data error, the respective error message is shown while POS continues working as expected.

### Drawer Memo: Incorrect Started By and Last Edited values in SOD

`Build 6.40.240: DS-3967`

We've fixed the issue where, under `Drawer Memo > Start of Day > COMPLETE – Summary`, the **Started By** and **Last Edited** fields could display incorrect dates and time after Start of Day finalization. 

### Sales Receipt: Inability to select a Sort by option

`Build 6.40.240: DS-3966`

We've fixed the issue where, under `Sales Receipt > Cart`, the options in the **Sort by** popup menu were occasionally unresponsive. 

### Customer: Incorrect Loyalty Program Opt-In value shown

`Build 6.40.240: DS-3985`

Prior to version 6.40.240, in the **Customers** area of POS PRO, when reopening a customer record that previously had the **Loalty Program Opt-In** field set to `Yes`, the field value would be incorrectly set to `No`.

The issue has been fixed. Now, the **Loalty Program Opt-In** value doesn't change without the user's control. 

### Updated French translations

`Build 6.40.240: DS-4044`

We've added French translations for labels and values available in the **Select Associate** dialog in POS PRO. 
{{% notice tip %}}
To open the **Select Associate** dialog, in the **Sales Receipt** area of POS PRO, tap **ASSOCIATE** in the right-side panel. 
{{% /notice %}}
In particular, translations were added for the following text strings:

- Change Associate
- Change Associate for
- All Items on Receipt
- New Items Added to Receipt
- Showing associates for
- This Location
- Company

Additionally, as a part of this update, some of the existing French translations in the **Reserve Orders** area of POS PRO were corrected.

### Banorte: Credit card payment fails with an error

`Build 6.40.240: DS-3911`

We've fixed the issue where, occasionally, a credit card payment processed via the connected Banorte terminal could fail with the `Payment not processed: Invalid transaction ID or merchant reference` error displayed in POS.

### POS PRO stops working when performing a Verified Return

`Build 6.40.240: DS-4045`

We've fixed the issue where POS PRO could sometimes stop working when the user initiated a Verified Return by tapping **Return Item(s)** in the **Return** area of POS.

### Blank reference # in Transfer Memo

`Build 6.40.270: DS-4108`

We’ve fixed the issue where, after the user had accepted a Transfer In in POS PRO, the **reference #** field in the respective Transfer Memo available under `chq > inventory > transfer memos > [selected Transfer Memo] > general` did not display any value.

### Transfer Memo ExternalId values disappear at the database level

`Build 6.40.272: DS-4137`

We’ve fixed the issue where, after the user had accepted a Transfer In in POS PRO, at the database level, item- and transaction-level ExternalId values in the respective Transfer Memo could disappear. 

### Incorrect receipt totals calculation 

`Build 6.40.275: DS-3881, DS-4221`

**Issue**  
Prior to 6.40.275, the receipt totals were incorrectly calculated if the following took place:

1. Three items satisfying the “buy 2, get 1 with 100%” promotion criteria were added to Sales Receipt.

2. One of the promo items was removed.

3. A regular item was added instead.

In that case, the totals remained the same as for the initial three items from step 1 above.

Then, on taking payment via the Adyen terminal and tapping **FINALIZE** in POS RPO, the ““SALE_VALIDATINGKEYS_-FORMAT” - 10178” error message displayed in POS and the payment was automatically refunded by the terminal.

**Resolution**  
We’ve fixed the issue and now the totals are correctly calculated.

### Keyboard covers custom fields on the Info tab in Sales Receipt

`Build 6.40.275: DS-4189`

We’ve fixed the issue where in POS PRO **Sales Receipt** area, on the **Info** tab, the keyboard covered custom fields making it hard for the user to edit those fields.

### GiveX error messages display no text

`Build 6.40.282: PRO-13939`

We’ve fixed the issue where some of the GiveX related error messages displayed no text in POS PRO.

### Multi-scan camera continues scanning in Payments 

`Build 6.40.282: DS-4217`

**Issue**  
Previously, in POS PRO, when the user scanned items into the Cart (`Sales Receipt > Cart > tap the barcode icon in the Item Search field on the right`) using the multi-scan camera functionality, the camera continued scanning if the item barcode remained in the camera’s focus even after the **PAY** button was tapped. This led to overcharges as item quantity and, as a result, payment due increased.

**Resolution**  
The issue has been fixed. Now, as expected, the camera doesn’t scan when POS PRO is on the **Payment** screen. 

### New API method for refunds to GiveX Gift Cards

`Build 6.40.284: DS-4320`

As of version 6.40.284, Teamwork uses GiveX Merchandise Credit API for refunds to GiveX Gift Cards instead of GiveX Increment API.

### POS crashes when starting a Verified Return

`Build 6.40.288: DS-4481`

Prior to version 6.40.288, POS could occasionally stop working when the user initiated a Verified Return by tapping **Return Item(s)** in the **Return** area. That would happen under the following conditions:

- in the **Sales Receipt** area, the **Cart** tab was designed to be the first in the layout (configured under `chq > settings > company settings > v6 App Designer` in the `Sales Receipt > Receipt Tabs` section)
- in CHQ, the **sale documents** field (`settings > location settings > locations / location settings > [selected location] > general settings > the transaction login section`) was set to `prompt for cashier` or `prompt for cashier & associate` 

The issue has been fixed. Now, under the conditions described above, the user is able to initiate a Verified Return normally. 

### Credit Memo related security rights not working

`Build 6.40.288: DS-4484`

**Issue**  
The **Take credit memo payment** and **Issue credit memo** security rights did not grant users in POS PRO with the respective capabilities.   
In particular, a user who had both security rights still wasn't able to take Credit Memo payments and issue Credit Memos for refunds. On attempting to do so, the **Insufficient Rights** error message would appear.

**Resolution**  
The issue has been fixed. Now, the **Take credit memo payment** and **Issue credit memo** security rights work as expected.

### Customer: Preferred Location value is not saved

`Build 6.40.291: DS-4897`

In versions prior to 6.40.289, when the user created a new customer in POS under `Customer > New Customer`, the value of the **PREFERRED LOCATION** field could sometimes fail to save. In particular, after the user saved the new customer record, the field would appear empty in POS and CHQ. 

The issue has been fixed. Now, the **PREFERRED LOCATION** field value is saved as expected. 

### POS synchronization fails with an error

`Build 6.40.291: DS-4528`

Prior to version 6.40.291, POS could occasionally fail to sync with the following error message: `Post in and out dates and user should be empty for held transfer memo`. The error occurred even though no held transfer memos were associated with that device. 

The issue has been resolved, and now POS can be synced as expected. 

### POS stops working when attempting to sync   

`Build 6.40.291: DS-4656`

We’ve fixed the issue where POS could stop working when syncing multiple transactions where the receipt was emailed to the customer. 

The issue occurred because, in the client’s environment, a receipt template designated for emailing via integration with Mandrill was incorrectly used as a printing template. 

## Impacted Areas

Teamwork Commerce PRO Suite allows for unique client-specific configurations. If the above is your case, we recommend that the areas and workflows listed below be additionally checked to ensure the existing functionality works as expected in conjunction with the newly released features.
{{% notice note %}}
Please be advised that the information below does not include details on the configurations and conditions required for testing the new features. For detailed information, see the respective feature description in this release guide.
{{% /notice %}}
**Feature**|**Impact**|
:-----------|:-----------|
Showing receipt details on Adyen payment terminal|Test workflows related to Sales Receipt creation and finalization with the Adyen terminal and the **Enable shopper display** setting enabled.|
Printing item tags from documents|Test workflows related to item tag printing from the following documents: <ul><li>Transfer Order, Transfer In, Transfer Out</li><li>Purchase Order, Purchase Receipt</li><li>Adjustment Memo</li><ul>|
Searching for customers by External ID|Test customer search by External ID in the `Customers` and `Sales Receipt > Customer` areas.|
Open Return: Support of return price and quantity limits|Test workflows related to Open Returns. Pay attention to the validation of the return price and quantity fields.|
Using separate settings for return gift cards|Test workflows related to making a refund to a gift card.|
Making a refund to a Virtual Gift Card|Test workflows related to making a refund to a Virtual Gift Card, including both printing and emailing the gift card number.|
New promotion added: Buy (at least) X, get discount|Test workflows related to Sales Receipt creation and finalization with the **Buy (at least) X, get discount** promotion applied.|
Sales Receipt: Manually removing a promotion|Test workflows related to putting on hold and finalizing a Sales Receipt with removed as well as re-applied promotions.|
Additional user login when performing a return|Test workflows related to Open and Verified Returns with the **require second login for returns (V6)** setting enabled in CHQ.|
RFID reader: Automatic network connection|Test workflows related to using an RFID reader with POS PRO. Pay attention to how RFID network connection changes when the Ethernet cable is plugged into or unplugged from the device.|
Givex gift cards: Extended capabilities|Test workflows related to Givex gift cards, including the new capabilities: selling, re-loading, checking balance, and making a refund to a Givex gift card.|
Correction to how Banorte payment information is stored| Create a transaction where the payment is processed with Banorte and then print out the receipt. Check that payment-related information is represented as designed on the latter.|
Showing line item discount on Adyen terminal|Test workflows related to Sales Receipt creation and finalization with the Adyen terminal and the **Enable shopper display** setting enabled. Check that item line discounts display on the terminal.|
New Allow held adjustment security right|Check that users who are granted the new security right can put an Adjustment Memo on hold.|
ShippyPro: Sending a call to close the shipment|With the **require closing** setting enabled in CHQ, test workflows related to finalization of a Ship Memo with ShippyPro. Check that the closing call is received by ShippyPro, and no additional fees are applied to the shipment.|
Cancelling an item in a Reserve Order|Cancel an item in a released Reserve Order. Check that the item's quantity is returned to available-to-sell.|
Selling items from a Reserve Order|Test workflows related to creating and finalizing a Sales Receipt from a released Reserve Order.|
Sales Receipt: Multiple associates at the item level|Test workflows related to assigning multiple associates to a sale item. Additionally, define the associates' percentages manually.|
New security right for changing Validation on customer fields|In CHQ, grant a user with the new security right. In POS, test workflows related to creating new or editing existing customer records. Check that the user is able to edit the Validation fields in customer records.|
Sales Receipt: Updated Customer URL field|In CHQ, configure a custom name for the Customer URL field. In POS, test adding a customer with defined Customer URL field to a Sales Receipt. Check how the Custom URL field displays in the added customer record.| 
Processing eCommerce Reserve Orders|Test workflows related to processing an imported Reserve Order (RO). Pay attention to the push notifications about new imported ROs as well as the default expiration date in an imported RO.|
RFID: Filtering by configured GTIN prefixes|In CHQ, define allowed GTIN prefixes. In POS, test workflows related to scanning item tags with an RFID reader. Check that item tags that do not include an allowed GTIN prefix are ignored by POS.|
Updated application of coupon-activated promos|Test workflows related to adding a coupon-activated promo to a sale where promotions are already applied. Check that promo application is based on the promotions' ranking.|
Automated detached payment check available for Banorte payments|While using POS PRO in conjunction with a Banorte payment terminal, test workflows related to finalization of transactions with detached credit card payments.|
Verified Return of promo-grouped items|In CHQ, define how Verified Returns of promo-grouped items should be processed. In POS, test workflows related to performing a Verified Return of an item from a promo group.|

{{% notice warning %}}
WE DO NOT WARRANT AND SHALL NOT BE RESPONSIBLE FOR THE PERFORMANCE OF ANY THIRD-PARTY VENDOR’S PRODUCTS OR SERVICES. ALL SOFTWARE AND HARDWARE IS ACQUIRED SUBJECT TO THE END USER LICENSE AGREEMENT, WARRANTY, AND OTHER TERMS PROVIDED BY THE MANUFACTURER OR SUPPLIER OF SUCH THIRD-PARTY PRODUCT.   YOU AGREE TO BE BOUND BY AND COMPLY WITH ANY SUCH MANUFACTURER LICENSE AGREEMENT, WARRANTY, OR OTHER TERMS AND CONDITIONS, AND YOU UNDERSTAND AND AGREE TO LOOK SOLELY TO THE THIRD-PARTY VENDOR OF THE PRODUCT FOR MAINTENANCE AND SUPPORT, INCLUDING BUT NOT LIMITED TO RESOLUTION OF SYSTEM ERRORS, BUGS, PATCHES, HOT FIXES, ETC. YOUR SOLE AND EXCLUSIVE RIGHTS AND REMEDIES WITH RESPECT TO ANY THIRD-PARTY PRODUCT OR SERVICE, INCLUDING RIGHTS AND REMEDIES IN THE EVENT A THIRD-PARTY PRODUCT OR SERVICE GIVES RISE TO AN INFRINGEMENT CLAIM, WILL BE AGAINST THE THIRD-PARTY VENDOR AND NOT AGAINST US.

TO THE MAXIMUM EXTENT PERMITTED BY LAW, WE DISCLAIM ANY AND ALL PROMISES, REPRESENTATIONS, AND WARRANTIES, EXPRESS OR IMPLIED, WITH RESPECT TO THE VERSION OF THE PROGRAM SET FORTH HEREIN, SPECIFICALLY INCLUDING ANY UNDERLYING THIRD PARTY TECHNOLOGIES AND/OR PLATFORMS USED IN CONJUNCTION WITH SAME, MATERIALS AND ANY OTHER DATA, INFORMATION, OR OTHER MATERIAL FURNISHED TO USER HEREUNDER, INCLUDING, WITHOUT LIMITATION, THE CONDITION THEREOF; AND WARRANTIES OF NON-INFRINGEMENT, TITLE, MERCHANTABILITY, OR FITNESS FOR A PARTICULAR PURPOSE OR USE.
{{% /notice %}}
<br>
<br>
[OPEN PDF](https://storage.googleapis.com/twc-pedia-prod-bucket/pdf/relguides/POS%20PRO%20Release%20Guide%20Version%206.40.pdf)

