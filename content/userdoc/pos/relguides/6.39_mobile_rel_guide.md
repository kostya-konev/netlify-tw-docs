---
title: "Version 6.39"
date: 2022-03-14T10:16:08+02:00
draft: false
weight: 92
---
[DOWNLOAD PDF](https://storage.googleapis.com/twc-pedia-prod-bucket/pdf/relguides/POS%20PRO%20Release%20Guide%20V6.39.pdf)

## Feature Descriptions

### Automated detached payment check

`Build 6.39.107: PRO-9504`

This update allows for automated detached (duplicate) payment check in POS PRO Version 6.
{{% notice info %}}
The detached payment is a terminal payment that is not attached to any Sales Receipt. If a detached payment cannot be re-attached to the receipt (without creating a double payment), then it must be voided.
{{% /notice %}}
In POS PRO, detached payment check is completed in the following cases:

- application crash recovery
- payment time-out and user cancellation
- Sales Receipt finalization
- End-of-Day (EOD)

Detached payment checks apply to the following payment types: credit card, gift card (Teamwork, GiveX, and Fortress), and credit memo.

#### Purpose

Checking detached payments is required to avoid double-charging the customer. We’ve automated how the check for detached payments is performed to eliminate manual steps for the user wherever possible.

When POS makes a payment request to the authorization terminal or request to CHQ for gift card/credit memo, the receipt device transaction number (DTN) is included in the payment request. The DTN links the resulting terminal payment or CHQ authorization with the receipt payment record.	

If an approved terminal payment or CHQ authorization exists and there is no linked receipt payment record on the receipt with that DTN, then either:

- a receipt payment record is created, or		
- the terminal payment / CHQ authorization must be voided.

Once the Sales Receipt is finalized, the required payments are recorded. 

However, if there is a terminal payment or CHQ authorization that is not attached to a receipt payment record, then it is a detached payment. In other words, this is an extra payment or a duplicate payment. In that case the detached terminal payment must be voided.

{{% notice warning %}}
If POS cannot communicate with the payment processor, then it cannot identify payments that are potentially detached from the Sales Receipt. In this case, the user must correct the connection issue, or make an offline payment.
{{% /notice %}}

#### Configuration in CHQ

In CHQ, under `settings > sales > payment processing`, in the **general** section, we’ve added the following two settings:

- **automatically perform payment check - post sale finalization**: if the option is selected, on finalizing a sale, POS checks for detached payments. By default selected on new installations.

- **automatically perform payment check - end of day**: if the option is selected, when launching drawer memo end-of-day process, POS checks for detached payments. By default selected on new installations.

#### Payment check on application crash

During application crash recovery, POS looks for detached payments in logs. 

If none are found, the application restarts normally. If one or more detached payments are found, POS checks the payment terminal and/or CHQ to validate if payments were processed successfully (approved).

Resulting from that check, if at least one payment has been verified as successfully processed, the **Detached Payment(s)** dialog displays: 
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_13.jpg" width="300px"%}}
Please note that if a payment was not processed on the terminal or CHQ side, it will not display in the dialog.

Additionally, if POS was unable to verify if a particular payment had been successfully processed on the terminal/CHQ side, the `Unable to verify payment` label displays next to that payment record in POS:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_14.jpg" width="400px"%}}
From **Detached Payment(s)**, the user can void the payments or apply them to a new sale.
{{% notice warning %}}
Only payments from the most recent unfinished receipt display in the dialog. If a payment is negative (refund), voiding is not possible.  
Additionally, it is the user’s responsibility to re-create the receipt and use the Adjustment payment method to record the return receipt.  
If all payments did not complete, the `Unable to verify payment` indicator displays in the **Detached Payment(s)** dialog and neither voiding or using those payments is available.
{{% /notice %}}

##### Use payments

Tapping **Use Payments** re-creates the lost receipt and the payments are applied to that sale. In that case, the following rules are observed: 

- the new sale re-uses the DTN that was used for the payment when the system crashed
- the amount of the new sale must be less than or equal to the amount of all detached payments
- POS only applies payments from the last transaction, not all detached payments that might exist

{{% notice note %}}
If the user does not have the security right to make a receipt, the **Insufficient Rights** dialog displays and that receipt is not created.
If there is no active Drawer Memo, the **No Active Drawer Memo** message displays and the receipt is not created.
{{% /notice %}}

On tapping **Use Payments**, a new Sales Receipt is opened as if the user tapped **New Sale**. Then, the user needs to re-create the previous lost transaction by adding the same items, customer, discounts, etc. 

Then, on tapping **PAY**, the **Detached Payment(s) Applied** message comes up. When the user confirms, the detached payment(s) information is copied to the **Payment** area of the receipt as if those payments were just taken. Additionally, the DTN from the lost receipt is applied to the new receipt. 

Once this new sale is finalized, in logs, payments are marked as no longer detached. Similarly, these payments will not display during End-of-Day (EOD) as detached as well.

##### Void payments

Tapping **Void payment(s)** starts the void payment process:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_15.jpg" width="200px"%}}
If all the payments are successfully voided, the **Payment(s) Voided Successfully** message displays:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_16.jpg" width="350px"%}}
If voiding one or more payments fails, the **Payment(s) Void Failed** message displays:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_17.jpg" width="350px"%}}
If the payment could not be voided because of a connection issue (no connection or could not communicate with the server), the payment is marked as not voided, so POS can attempt to void it again during EOD.

If the payment could not be voided due to a reason returned from the processor (payment not found, declined, etc.), the payment is marked as not voided and no attempt to void again during EOD is made.

#### Payment check on timeout or user cancellation

When requesting approval for a payment, there can be instances when the response is not received, such as losing connectivity with the terminal or with CHQ, or slow response.

Generally, the user attempts to make another payment. It is possible that the first request was received and approved, but POS is not aware of it, which results in a double charge.

Now, POS allows the user to check the last payment to determine if an approved payment exists:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_18.jpg" width="500px"%}}
If a detached payment is discovered for the current Sales Receipt, the user can apply it (**A**) or void it (**B**):
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_19.jpg" width="300px"%}}
If a payment is discovered for a previous receipt, it will be ignored during this process. It will be found and processed during EOD.

Additionally, if a detached payment with a negative value (refund) is found, both the void and use options are not available. On tapping **Close**, the user is returned to the **Payment** screen. 
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_20.jpg" width="300px"%}}
**Important**: In that case, it is the user’s responsibility to create the negative Adjustment payment method to record the return amount.

#### Payment check on Sales Receipt finalization

If in CHQ under `settings > sales > payment processing` the **automatically perform payment check - post sale finalization** option is selected, the check for the detached payments is performed.

If such payments are found, they display in the **Detached Payment** dialog with the option to be voided:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_21.jpg" width="300px"%}}
On tapping **Void Payment(s)**, the voiding procedure is initiated sequentially for each payment on the list. 

The system makes up to 3 attempts to void each payment. Once voiding is completed, POS continues to finalize.

Voiding a refund (negative charge) is not possible. If the found detached payment is a refund, the user can only tap **Close** at the bottom of the dialog, which opens the **Payment Complete** screen.

**Important**: In case of detached negative payment, it is the user’s responsibility to utilize the Adjustment payment method to balance the sales receipt for this amount.

#### Payment check during Drawer Memo – End of Day

If in CHQ under `settings > sales > payment processing` the **automatically perform payment check - end of day** option is selected, the check for the detached payments is performed upon EOD launch.

If any detached payments are found, the attempt to auto-void those is made:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_15.jpg" width="200px"%}}
For each found detached payment, 3 attempts to auto-void are made.

Once processing is complete, the user is automatically taken to the `Credit Card > Detached` tab to view the results:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_22.jpg" width="500px"%}}
Payments on this tab can have various statuses:

- **Void Successful**: POS processed and SUCCESSFULLY voided the transaction, either earlier (before EOD), or during the EOD payment check.
- **Void Rejected**: the void was rejected by the processor.
- **Not Voidable**: the transaction is a 'not voidable transaction' (refund) or it is past the time limit.
- **Void Failed**: the void was not processed due to some error/issue (no connection, server down, etc.)

To see transaction details, the user can tap the respective row in the grid.
{{% notice info %}}
The same tab is added for Gift Cards and Credit Memos.
{{% /notice %}}

#### See also

- [V6.39 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.39_chq_relguide/)
- [Mobile Quick Reference Guides](https://twdocs.netlify.app/userdoc/pos/qrg/)

### Visibility configuration and translations extended for dictionaries

`Build 6.39.107: PRO-9411`

We’ve added support of the following to POS PRO:

- configuration of visibility by company location for a number of dictionaries
- translations for the customer titles dictionary

#### Extended configuration of visibility by company location

In CHQ, visibility by location can now be configured for the following values:

- adjustment reasons
- adjustment hold reasons
- reserve reasons
- customer titles
- sales receipt reprint reasons
- sales receipt hold reasons
- shipment reject reasons
- cash management reasons
- drawer opening reasons
- purchasing hold reasons
- transfer reasons
- transfer hold reasons

{{% notice info %}}
For details on how to configure visibility of a value, please refer to [V6.39 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.39_chq_relguide/).
{{% /notice %}}
If a certain value is configured as not visible to the location the user’s device is initialized to, that value will not appear in the respective area of POS PRO.

For example, if *shipment reject reason A* is not visible to the initialized location, in POS, *shipment reject reason A* does not appear as an available value for the **Reject Reason** field in Ship Memos.

#### Translations of customer titles

In CHQ, users can now add translations for existing customer titles. 

In POS PRO, the translation appears based on the selected app interface language. For example, if French translation is added for a customer title, and POS interface language is set to French, the customer title will be automatically translated in POS. 

### Updated Lock Screen

`Build 6.39.107: PRO-9667`

In version 6.39.107 of POS PRO, we’ve made updates to the automatic and manual **Lock Screen**.

Additionally, we’ve changed the look and feel of the **Lock Screen** and **Log Out** options in POS PRO.

#### Purpose

Screen locking allows users to protect their data in POS PRO without having to log out. For example, if there's an open transaction with a payment taken, and the store associate needs to step away from the device for some time, it's now possible to lock the screen of the device. To unlock, the user needs to enter their credentials. 

Also, now, when the screen is locked, only the same user or a manager/user with the Lock screen (override) security right can unlock. This update ensures that a user with lower security rights cannot unlock and, for example, edit a transaction started by the user with higher security rights.

At the same time, if an employee locked the screen at the end of the shift and left the store, the manager can unlock and then log out that user. This way, a different person can log in next day without any issues.

##### Log Out vs Lock Screen

To **log out**, the user must complete or put on hold any open transactions in POS PRO. After log out, any user may log in, and POS will start from Home Screen. 

Manual **lock screen** allows the user to safely put down the device without finalizing an open transaction. To unlock, only the same user or a user/manager with the Lock screen (override) security right must log in. Additionally, POS will start from the same area where the screen was locked. 

#### Configuration in CHQ

In CHQ, it is possible to configure how much time passes in POS with the user being inactive before the screen is automatically locked. 

To do so, under `settings > location settings > locations / location settings > [selected location] > general settings >` the `general` section, fill out the **seconds before auto-lock (V6)** field and then save the dialog.

#### Updated Log Out option 

We’ve added a new **Log Out** icon. The icon is now available in the upper left corner of POS Home Screen:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_23.jpg" width="700px"%}}
On tapping, the user logs out of their account. 

#### Updated Lock Screen feature

We’ve updated and added the **Lock Screen** option to the following areas of POS PRO:

- Sales Receipts > On Hold
- Sales Receipts > Sales History
- Sales Receipts > Device History
- Drawer Memo list view
- Drawer Memo 
- Customer search area
- Catalog
- Reports
- Shipments > Incoming
- Shipments > Outgoing
- Shipments > History
- Count Memos list view
- Settings

To lock the screen when in any of the areas listed above, tap **Lock Screen** in the upper left corner:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_24.jpg" width="500px"%}}
After **Lock Screen** is tapped or the screen locks automatically, the following view appears:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_25.jpg" width="700px"%}}
To unlock the screen, the same user who locked the screen or was logged in when the screen auto-locked must enter their credentials and then tap **UNLOCK**.

After unlocking, the user is returned to the same area where the screen was locked. 

If a different user who is not granted the **General – Lock screen (override)** security right tries to unlock, the **Previous User Required** error message is shown – the user cannot unlock the screen. 

##### Unlocking the screen with the “Lock screen (override)” security right

Alternatively, any user with the **General – Lock screen (override)** security right (User 2) may enter their credentials and unlock. Note that in this case, User 2 is logged in as the user who locked the screen (User 1). 

User 2 will see the following notification:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_26.jpg" width="250px"%}}
User 2 can then use POS within the rights that User 1 is granted.
{{% notice info %}}
To ensure that the correct business process is observed, it’s recommended that User 2 completes the open document or transaction as required and then logs out User 1. 
{{% /notice %}}

### Automatic log out on POS Home Screen

`Build 6.39.171: PRO-10958`

Starting from version 6.39.171, we've updated how the **seconds before auto-lock (V6)** CHQ setting is utilized in POS PRO when the user is on the **Home Screen**.

Now, if the time limit for screen auto-locking is reached, and the **Home Screen** is open in POS PRO, automatic *log-out* is performed instead of screen lock.
{{% notice info %}}
In CHQ, to configure a time period of user inactivity after which screen lock is performed automatically, under `settings > location settings > locations / location settings > [selected location] > general settings >` the `general` section, define the **seconds before auto-lock (V6)** setting.
{{% /notice %}}

### Indicating a gift card item when transferring balance between gift cards

`Build 6.39.107: PRO-9730`

When transferring balance from one gift card (GC) to another, and the receiving GC is new, it’s now possible to indicate which inventory item corresponds to the issued GC.

#### Purpose

If the retailer offers several gift card types to customers, in the catalog, several “physical gift card” items may be set up. 

The new feature allows users to indicate exactly which gift card is being issued. The inventory quantity of that gift card is then reduced accordingly to maintain an accurate count. 

#### Selecting a gift card item

We’ve added a new **Gift Card Item** field to the **To Card** tab of the **Gift Card Transfer** dialog:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_27.jpg" width="500px"%}}
{{% notice info %}}
To open the **Gift Card Transfer** dialog, in POS:

1. On the Home Screen, tap **New Sale**.
2. In the **Sales Receipt** area that opens, tap **Gift Card Transfer**. Depending on your custom settings, the **Gift Card Transfer** option may be located at the top of the right-side panel or in the **More** menu.
{{% /notice %}}
Please be advised that the **Gift Card Item** field is visible if:

- the **Gift Card #** field is filled out, and
- the GC indicated in the **Gift Card #** field is new, and
- there are multiple “physical gift card” items set up in the catalog 

To select a gift card item, in the field, tap **Select**. 

Then, in the dialog that opens, tap the required physical GC:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_28.jpg" width="500px"%}}
On tapping, the user is returned to the **Gift Card Transfer** dialog with the GC item selected:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_29.jpg" width="500px"%}}
To select a different item, under **Gift Card Item**, tap **Change**.

To confirm the transfer, tap **Transfer** in the upper right corner.					

### Sales Receipt: Cash rounding

`Build 6.39.107: PRO-8889`

We've added cash rounding to POS PRO V6. 
{{% notice note %}}
As of version 6.39.107, this feature is available only to company locations in Canada and Australia. Additionally, cash rounding is applicable only to payments made in the location's base currency.
{{% /notice %}}

#### Purpose

This feature is useful in cases where existing currency denominations do not allow for paying the exact payment or change amount. For example, if amount due is $52.92, and the smallest cash denomination is 5 cents, cash rounding is applicable.

The rounding method used in POS PRO can be configured in CHQ.

#### Configuration in CHQ

In CHQ, to enable automatic cash rounding, do the following:

1. Go to `settings > company settings > currencies`. 
2. Click to select the required base currency and then click **denominations** at the top.
3. Make sure that the **amount rounding denomination** and **payment rounding denomination** fields have different values.
{{% notice info %}}
The **amount rounding denomination** setting is related to non-cash payments where the customer can pay down to $0.01, for example, credit card or gift card. The **payment rounding denomination** is defined for cash payments.  
For example, for Canada, **amount rounding denomination** may be set to `$0.01`, and **payment rounding denomination** to `$0.05`.
{{% /notice %}}
 **Important**: If values are the same, cash rounding is disabled. 
4. Save the dialog. 

Additionally, under `settings > company settings > currencies > [selected currency]`, it's possible to define the rounding method that is applied in POS PRO. To do so, configure the **amount rounding** field.

For details on configuration in CHQ, refer to [V6.39 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.39_chq_relguide/).

#### Cash rounding in the Payments area

In the **Payments** area of POS PRO, rounding is applied under the following conditions:

- cash rounding is enabled in CHQ, and
- the amount due needs to be rounded: for example, **Payment Due** is `$52.92`, and the smallest denomination is $0.05, and
- the user taps a Cash payment method in base currency

{{% notice info %}}
The examples below assume that the rounding method is set to `nearest` in CHQ.
{{% /notice %}}

Then, in the area with the **Amount Due** that opens, the **Cash rounding** field appears {{% inum "A" %}}:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_1.jpg" width="700px"%}}
Also, if suggesting a payment amount is configured, the suggested amount is rounded {{% inum "B" %}}.

If the user enters an amount that differs from the **Amount Due** and needs to be rounded, on tapping **Enter** on the keyboard or **PAY** on the screen, the amount is rounded automatically. The user has to tap **PAY** again to accept and close the area. 

Back in the **Payment** area, if rounding was applied, the **Cash rounding** field displays on the left:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_2.jpg" width="700px"%}}
Note that, if the customer paid more than the **Amount Due**, rounding is not applied to the payment. For example, on the screenshot, $60 is paid against **Sale Total** `$52.92`:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_3.jpg" width="700px"%}}
However, in that case rounding is applied to **Change Due**: `-$7.08` is rounded up to `-$7.10`.

#### See also

- [V6.39 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.39_chq_relguide/)
- [Mobile Quick Reference Guides](https://twdocs.netlify.app/userdoc/pos/qrg/)

### Sales Receipt: New options to configure tax exemption status

`Build 6.39.107: PRO-9014, PRO-9015`

We've introduced updates related to tax exemption status on Sales Receipts. This resulted in the following new capabilities in POS PRO:

- defining tax exemption status of a tax jurisdiction
- adding information on tax exempt customers 

#### Purpose

Configuring tax exemption per tax jurisdiction allows for greater accuracy when calculating tax rate for a specific transaction. 

In Canada, several types of tax can be levied within one tax area – for example, both Provincial Sales Tax (PST) and Goods and Services Tax (GST) may be collected on a transaction. If certain items on the transaction are exempt, for instance, from PST, but GST is still collected, users in POS PRO now have the capability to configure that. 

To do so, different tax types may be set up as tax jurisdictions with appropriate tax rates. At the time of sale, the store associate can set a certain jurisdiction (for example, Provincial Sales Tax) to **EXEMPT**. Depending on user's configuration, the configured tax type will not be collected either on any items from the transaction or on certain items. 

Additionally, information on customers with tax exempt status may now be saved at the item and/or transaction level, including exemption certificate number. Saving at the item level may be useful if, for example, that item has a tax exemption reason different from the other items'.

#### Configuration in CHQ

For proper tax calculation in POS PRO, in CHQ, tax categories, areas, and jurisdictions must be set up under `settings > company settings > taxes` and then assigned to items. 

Furthermore, for tax exemption to be available, at least one exempt reason must be created under `settings > sales > tax exempt >` the `tax exempt reasons` section. To configure visibility in company locations, click the reason in the list and then click **visibility** at the top.

##### New tax exemption related settings 

Additionally, as a part of this update, in CHQ it's become possible to: 

- grant a security right that allows for reprinting a Sales Receipt with tax exemption
- configure the following indicators that appear on the printed Sales Receipt:
    - indicator of what tax jurisdiction(s) is (are) applied to an item
    - indicator for a tax exempt item
    - indicator for an item taxed at 0% 
- prevent users from marking a tax jurisdiction as tax exempt in POS PRO
- add a text describing what customer information must be collected on adding a tax exempt customer. In POS PRO, the text appears under `Sales Receipt > Cart > [item name] - edit > Taxes > Tax Exempt Customer - ADD > Required Data`

{{% notice info %}}
For details on how to configure the settings described above, refer to [V6.39 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.39_chq_relguide/).
{{% /notice %}}

#### Configuring tax exemption status of a tax jurisdiction 

The tax exemption status of a tax jurisdiction may be configured both at the item and receipt level. Respectively, the configuration will be applied either to a specific item or the whole receipt.

Accordingly, the configuration is possible in the following areas of POS PRO:

- **Sale Options – Taxes**: receipt level
- **[item name] - edit**: item level

##### Configuring tax exemption under Sale Options – Taxes

To configure tax exemption in the **Sale Options – Taxes** area:

1. On the Home Screen of POS PRO, tap **New Sale**.

2. Optionally, under `Sales Receipt > Cart`, add sale items.

3. In the right-side panel, tap the value in the **Sales Tax** or **VAT Included** field.

In the **Sale Options – Taxes** area that opens, new **TAX JURISDICTIONS** section is available:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_4.jpg" width="700px"%}}
The **TAX JURISDICTIONS** section lists all tax jurisdictions that are defined in CHQ and belong to the configured tax area (the **Tax Area** field above).

To mark a tax jurisdiction as tax exempt, turn on the **EXEMPT** switch next to the required jurisdiction. 
{{% notice note %}}
To configure the **EXEMPT** switch, the user must be granted the **Sales – Chng. Tax Ex. for sales** security right.  
Please be advised that if in CHQ under `settings > company settings > taxes > sales tax jurisdictions > [selected tax jurisdiction]` the **disable tax exempt** checkbox is selected, the respective tax jurisdiction cannot be marked as exempt in POS PRO.
{{% /notice %}}
Alternatively, to make all listed tax jurisdictions tax exempt, turn on the **Tax Exempt** switch in the **TYPE** section:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_5.jpg" width="700px"%}}
If at least one tax jurisdiction is marked as exempt, the **TAX EXEMPT CUSTOMER** section becomes available (see [Adding information on a tax exempt customer](http://twdocs.netlify.app/userdoc/pos/relguides/6.39_mobile_rel_guide/#adding-information-on-a-tax-exempt-customer)):
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_6.jpg" width="700px"%}}
When finished configuring, tap **Done** in the upper right corner to save changes.

If changes have been applied, when tapping **Done** or switching to another tab, the **Change Tax** dialog appears:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_7.jpg" width="250px"%}}
In the dialog, it is possible to define how the changes should be applied. In particular:

- **All Sale Items**: apply to all items on the receipt
- **Only New Items Added**: apply only to the items that will be added *after* the changes are applied
- **Cancel**: do not apply the changes

##### Configuring tax exemption under [item name] - edit

To configure tax exemption in the **[item name] - edit** area:

1. On the Home Screen of POS PRO, tap **New Sale**.

2. Under `Sales Receipt > Cart`, add sale items.

3. Tap the item you want to configure.

4. In the area that opens, on the left, tap the **Taxes** tab.

{{% notice info %}}
Please be advised that item-level tax settings default to the receipt-level tax settings configured in the **Sale Options – Taxes** area.   
If the user makes changes at the receipt level and applies them to all items on the receipt, item-level tax settings are overwritten with the receipt-level settings.
{{% /notice %}}
On the **Taxes** tab, new **TAX JURISDICTIONS** section is available:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_8.jpg" width="700px"%}}
Next to each jurisdiction, tax percentage and amount collected on the item display for that jurisdiction. If a jurisdiction is marked as tax exempt, the tax percentage and amount are set to `0.00`. 

To mark a tax jurisdiction as tax exempt, turn on the **EXEMPT** switch next to the required jurisdiction.
{{% notice note %}}
In case of sale item, to configure the **EXEMPT** switch, the user must be granted the **Sales – Chng. Tax Ex. for sales** security right. Alternatively, in case of return item, the user must have the **Sales – Chng. Tax Perc for ret.** security right.

Please be advised that if in CHQ under `settings > company settings > taxes > sales tax jurisdictions > [selected tax jurisdiction]` the **disable tax exempt** checkbox is selected, the respective tax jurisdiction cannot be marked as exempt in POS PRO.
{{% /notice %}}
When finished configuring, tap **Done** in the upper right corner.

#### Adding information on a tax exempt customer

In POS PRO, a tax exempt customer can be assigned to the whole receipt or to an individual sale item.

Respectively, adding information on a tax exempt customer is possible in the following areas of POS PRO:

- **Sale Options – Taxes**: receipt level
- **[item name] - edit**: item level

Please note that, to make the **TAX EXEMPT CUSTOMER** section available, under **TAX JURISDICTIONS**, at least one tax jurisdiction must be marked as **EXEMPT**. 

To add customer information, under **TAX EXEMPT CUSTOMER**, tap **ADD**:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_9.jpg" width="700px"%}}
On tapping, the **Tax Exempt Customer** dialog opens with the following two tabs available:

- **Customer**: includes customer fields
- **Required Data**: includes a custom text defined in CHQ under `settings > sales > tax exempt > general >` the `tax exempt requirement text`. The text may provide instructions on what customer information must be collected to confirm tax exemption

On the **Customer** tab of the dialog, the following fields are available:

**Field**|**Value**|
:-----------|:-----------|
Reason|Required. Allows for selecting a tax exemption reason among those defined under `chq > settings > sales > tax exempt >` the `tax exempt reasons` section|
Tax Exempt #|Customer tax exemption number. An alphanumeric value up to 30 characters|
Tax Exempt # Expiration|Allows for selecting the date of the customer's exempt number expiration|
Band Registry #|Customer's tribal ID number. An alphanumeric value up to 30 characters| 
Child Name|Name of the child associated with the purchase. An alphanumeric value up to 50 characters|
Data Collection Consent|A switch that indicates if the customer allowed to collect their data. Turned off by default|
Customer personal information|Customer first name, last name, company, phone, and address|

Once the required customer fields are filled out, tap **Done** in the upper right corner.

Back on the **Taxes** tab, customer information will appear in the **TAX EXEMPT CUSTOMER** area:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_10.jpg" width="700px"%}}
Tap **Done** in the upper right corner to save and return to the **Sales Receipt** area.
{{% notice info %}}
If there's a customer record added under `Sales Receipt > Customer`, in the **Tax Exempt Customer** dialog, the information is automatically filled out from that customer record.  
Additionally, be advised that the information entered in the **Tax Exempt Customer** dialog does NOT update the respective customer record in the system.
{{% /notice %}}

#### See also

- [V6.39 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.39_chq_relguide/)
- [Mobile Quick Reference Guides](https://twdocs.netlify.app/userdoc/pos/qrg/)

### Ship Memo: Sending a request for the customer's signature to ShippyPro

`Build 6.38.107: PRO-10307`

When processing a shipment with ShippyPro, users can now configure if a request for the customer's signature should be sent from POS PRO to ShippyPro. The request is included in the shipment label generated by ShippyPro and then passed to the carrier service.

Collecting the customer's signature allows the retailer to confirm and keep proof of shipment delivery. 
{{% notice note %}}
Please be advised that for the signature request to be passed successfully, the carrier service must support signature capture.
{{% /notice %}}

#### Configuration in CHQ

In CHQ, to define if customer signature is always requested, optional to request, or never requested, under `settings > company settings > shipping services >` click **[your shipping service]** and then click **configure methods** `> [your shipping method]`, configure the **require delivery signature** field. 

Furthermore, fill out the **delivery signature request code** field with the request code that will be sent via ShippyPro to the carrier service. 
{{% notice warning %}}
Please note that it's the retailer's responsibility to ensure that a correct code for the required carrier service is entered.  
If the **require delivery signature** and **require delivery signature threshold** fields are filled out, the **delivery signature request code** field is required. Additionally, if the **delivery signature request code** field is not populated, signature request is considered to be not configured.
{{% /notice %}}
Additionally, to set a shipment value threshold at which the signature becomes required, under `settings > company settings > shipping services >` click **[your shipping service]** and then click **configure methods** `> [your shipping method]`, configure the **require delivery signature threshold** field.

#### Sending a request for the signature in the Outgoing – Ship Memo area

In POS PRO, the state of the new **Delivery Confirmation Signature** field is based on the **require delivery signature** setting in CHQ (see [Configuration in CHQ](http://twdocs.netlify.app/userdoc/pos/relguides/6.39_mobile_rel_guide/#configuration-in-chq-2)). In particular: 

- `not available` is selected: the **Delivery Confirmation Signature** field does not appear in POS
- `optional` is selected: user can configure the **Delivery Confirmation Signature** field in POS
- `required` is selected: the **Delivery Confirmation Signature** field is set to `Yes` and is not editable

If `optional` is selected, the **Delivery Confirmation Signature** switch is available in the **Shipment – Carton [number]** dialog. To open the dialog, in POS PRO:

1. On the Home Screen, tap **Shipments**. Depending on your custom settings, the **Shipments** button can be located in the navigation bar at the bottom or in the **More** menu. 

2. In **Shipments**, tap the **Outgoing** tab at the top. 

3. Find and tap the required Ship Memo. 

4. Process the items on the Ship Memo as required. Additionally, if the shipment is to be sent in several packages, assign the items to multiple cartons.

5. Tap the **Shipment** tab at the top-right.

6. On the **Shipment** tab, in the **SELECT CARTON** section, tap the required **Carton [number]** {{% inum "A" %}}:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_11.jpg" width="700px"%}}

In the **Shipment - Carton [number]** dialog that opens, to send a request to ShippyPro for the customer's signature, turn on the **Delivery Confirmation Signature** switch:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_12.jpg" width="600px"%}}
{{% notice note %}}
After **Get Label** is tapped, and the shipment label is retrieved from ShippyPro, the **Delivery Confirmation Signature** switch is no longer editable. In the field, `Yes` or `No` displays based on the user's choice.  
To be able to configure the switch again, it's required to void the shipment label first.

Additionally, if the total value of the items in the carton reach the **require delivery signature threshold** configured in CHQ (see [Configuration in CHQ](http://twdocs.netlify.app/userdoc/pos/relguides/6.39_mobile_rel_guide/#configuration-in-chq-2)), the **Delivery Confirmation Signature** field is automatically set to `Yes`.
{{% /notice %}}
Tap **Done** in the upper right corner and then finalize the Ship Memo as required. 

#### See also

- [V6.39 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.39_chq_relguide/)
- [Mobile Quick Reference Guides](https://twdocs.netlify.app/userdoc/pos/qrg/)

### Push notifications of new Ship Memos

`Build 6.39.107: PRO-6519`

Starting from version 6.39.107, when a new Ship Memo in the `Prepare Shipment` or `Prepare Pickup` status is assigned to a company location, a push notification appears on all POS devices initialized at that location:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_35.jpg" width="500px"%}}
This update allows for timely informing store associates of new shipping or pickup orders that need to be processed.

#### Configuration in CHQ

For this feature to work in POS PRO, in CHQ under `settings > location settings > locations / location settings > [selected location] > general settings > general`, the **show OS notifications** checkbox must be selected. By default, the checkbox is cleared. 

#### Push notifications in POS PRO

Note that, to help define the Ship Memo’s priority, the notification shows the ship method from the Memo.

Based on whether POS PRO is running at the time, tapping the notification leads to one of the following actions:

- if POS PRO is not running, tapping opens the POS login screen. Once the user logs in, the Home Screen appears
- if POS PRO is running but minimized (out of view), tapping brings POS PRO into the active state
- if POS PRO is running and active (for example, the Sales Receipt area is already open), tapping on the notification simply closes the latter

#### See also

- [V6.39 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.39_chq_relguide/)
- [Mobile Quick Reference Guides](https://twdocs.netlify.app/userdoc/pos/qrg/)

### Drawer Memo: New order of columns under Drawer Cash – Opening Count

`Build 6.39.107: PRO-8043`

We’ve changed the order of the **Prev Count** and **Prev Amount** columns in the denomination grid located under `Drawer Memo > Start of Day > Drawer Cash > Opening Count`. 

Now, from left to right, the order of the columns is as follows:

- Denomination
- Prev Count
- Prev Amount
- Plan Count
- Count
- Amount
- Previous Diff

{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_34.jpg" width="700px"%}}

### Drawer Memo: Updated verification during Start of Day and End of Day

`Build 6.39.107: PRO-9475`

We've updated the logic behind the opening and closing verifications performed during Start of Day and End of Day respectively. Now, a different (second) user must log in to complete the verification.
{{% notice info %}}
Verification is performed under the following locations:

- opening: `Drawer Memo > Start of Day > COMPLETE > Summary`
- closing: `Drawer Memo > End of Day > FINALIZE > Finalize`

When the user taps **Select** in the **Opening Verification** or **Closing Verification** field respectively, the **Login** dialog opens.
{{% /notice %}}
In the **Login** dialog, to complete the verification, a user different from the one logged in must enter their credentials.

If the user entering credentials is the same as the logged in user, the login is not accepted, and the **Different User Required** error message comes up.

### Customer: The Consent field is required for new customers in Canada

`Build 6.39.107: PRO-10515`

{{% notice note %}}
The feature described below is enabled only for company locations that have **country** set to `Canada`. The country of a location is defined when the location is created and cannot be changed later.
{{% /notice %}}
For company locations in Canada, we've made the **Consent** field required when a new customer record is created.

This feature is useful in cases when the retailer is legally required to get and record the customer's consent before collecting the customer's information.

#### Configuration in CHQ

{{% notice warning %}}
Clients upgrading to version 6.39.107 with company locations in Canada must add the **Consent** field to the customer record in POS PRO. If the **Consent** field is not added to the customer record, in POS PRO, users will not be able to save a new customer record.
{{% /notice %}}
To add the **Consent** field to the customer record in POS:

1. In CHQ, go to `settings > company settings > v6 App Designer`.
2. Click **Point of Sale v6 > iPad > Customer**.
3. Select **Customer Form**, **Quick Add**, and/or **Customer Preview** as required.
3. Under **available fields** on the right, press and drag the **Consent** label to the **layout** area on the left.
4. Save the changes.

#### Customer consent in POS PRO

For locations in Canada, to save a new customer record, the user must populate the **Consent** field with a date. Saving without the **Consent** field is not possible. 

Note that if the user opens an *existing* customer record for editing, and the **Consent** field is not defined, the field is not required by default. To make the **Consent** field required for existing customer records, in CHQ, configure the **consent** field under `settings > customer > customer required fields`.

#### See also

- [V6.39 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.39_chq_relguide/)
- [Mobile Quick Reference Guides](https://twdocs.netlify.app/userdoc/pos/qrg/)

### European fiscal compliance: Passwords for Italian fiscal printer

`Build 6.39.107: PRO-5519`

For POS devices that are used in conjunction with an RT (Italian: *Registratore Telematico*) fiscal printer, we’ve added the following new fields under `Settings > Fiscal Device > Edit Fiscal Device`: 

- Internal memory password
- URL authentication username
- URL authentication password

#### Purpose

The **Internal memory password** field must be filled out for POS PRO to correctly communicate with the fiscal printer. After the password is entered, POS gains access to the printer’s internal functions and memory.

Additionally, the password is required for POS to be able to reprint a fiscal receipt.

The **URL authentication username** and **URL authentication password** settings provide additional security for API calls passing between POS PRO and the fiscal printer. 

#### Entering the RT printer related credentials

To fill out the RT printer related credentials in POS PRO, go to `Settings > Fiscal Device` and then tap **Edit Fiscal Device** in the top right corner.

In the dialog that opens, fill out the following fields:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_30.jpg" width="500px"%}}
**Field**|**Value**|
:-----------|:-----------|
Internal memory password|From 8 to 40 characters are allowed. Letters and numbers only, no spaces and special characters are allowed|
URL authentication username|From 3 to 64 characters are allowed. Letters and numbers only, no spaces and special characters are allowed|
URL authentication password|The field is not editable if the **URL authentication username** field is not filled out. Required if the **URL authentication usernam**e field is filled out. From 8 to 64 characters are allowed. Letters and numbers only, no spaces and special characters are allowed|

Once the required fields are filled out, tap **Done** in the upper right corner to save.

If the entered value in any of the fields does not meet the requirements described above, and the user taps outside that field or taps **Done**, the **Invalid Password** or **Invalid Username** message appears. 

#### The RT printer related fields in the fiscal device settings

Once the printer credentials are filled out, they appear under `Settings > Fiscal Device` in the read-only state:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_31.jpg" width="700px"%}}
Note that the **Internal memory password** and **URL authentication password** values are masked with eight dots regardless of the length of the value.

To edit again, tap **Edit Fiscal Device** in the upper right corner.
{{% notice info %}}
In CHQ, fiscal printer related credentials for a specific device can be configured under `services > device controller > [your device] > app settings >` the `fiscal device` section. 
{{% /notice %}}

### European fiscal compliance: Printing updates for Italy 

`Build 6.39.107: PRO-9762`

For company locations in Italy, we’ve made updates to print options available in the **Sales Receipt** area.

#### Printing updates in the Payment area

{{% notice note %}}
The features described below are available only for company locations with the following configurations:

- **country** = Italy. The country of the location is defined when the location is created
- the **fiscal** checkbox is enabled under `settings > location settings > locations / location settings > [selected location] > details >` the `address` section
{{% /notice %}}

For stores in Italy, under `Sales Receipt > Payment`, the new **Fiscal Printer** tab is now available in the printing section (**A** in the screenshot below):
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_32.jpg" width="700px"%}}
The options selected on the **Fiscal Printer** tab will be printed via the connected fiscal printer. In particular, the following options are available:

- **Print**: prints the Sales Receipt. This option is selected by default and cannot be disabled
- **Store Copy**: prints the store copy of the Sales Receipt
- **Gift**: prints the Gift Receipt(s)

{{% notice info %}}
If the fiscal printer is not set to `Epson FP0III RT`, on the **Fiscal Printer** tab, the printing options are unavailable. Instead, the `Not available` text appears.
{{% /notice %}}

Additionally, the **Sales Receipt** and **Gift** tabs are available. 

On the **Sales Receipt** tab, it is possible to opt for printing the Sales Receipt and/or the store copy of the Sales Receipt via a non-fiscal printer. 

On the **Gift** tab, it is possible to configure printing the Gift Receipt(s) via a non-fiscal printer. 

#### Printing updates in the finalized Sales Receipt view

The new **Fiscal Printer** tab is also available in the finalized Sales Receipt view (**B** in the screenshot below):
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_33.jpg" width="700px"%}}
In the finalized view, the **Print** option is not enabled by default. To reprint a document, the user can configure printing options as required.

### European fiscal compliance: Updated printing for Verified Returns

`Build 6.39.107: PRO-10073`

For company locations with fiscalization features enabled, we’ve updated what documents can be printed when making a Verified Return. 

1. If at the time of the original sale the Sales Receipt was printed/emailed, at the time of the Verified Return, only the receipt is available for printing.  
Respectively, under `Sales Receipt > Payment`, on the **Invoice** printing tab at the bottom, the `Not available for this sale` text displays. The invoice printing options are not available. 

2. If at the time of the original sale the Invoice was printed/emailed, at the time of the Verified Return, only the invoice is available for printing.  
Respectively, under `Sales Receipt > Payment`, on the **Sales Receipt** printing tab at the bottom, the `Not available for this sale` text displays. The receipt printing options are not available. 

3. If at the time of the original sale, both Sales Receipt and Invoice were printed/emailed, at the time of the Verified Return, both documents are available for printing. 

### Additional logging in the Sales Receipt area

`Build 6.39.107: PRO-7418`

We've extended logging in the **Sales Receipt** area of POS PRO to record errors that may occur at the database level. Additional logging will allow Teamwork to analyze and troubleshoot issues related to Sales Receipts more efficiently.

### V6.17 and V4.93 POS temporarily compatible with V6.39 CHQ

`Build 6.39.107: PRO-10028, PRO-10028, PRO-10374`

To prepare for the upgrade of clients' environments, we've ensured that V6.17 POS PRO and V4.93 POS can temporarily work in conjunction with V6.39 CloudHQ.

### Updated calculation logic behind a promo application setting

`Build 6.39.171: PRO-10908`

We've fixed the calculation logic behind the **allow during birthday period only** setting for promo application. 
{{% notice info %}}
The **allow during birthday period only** setting allows for automatic application of a promotion around the customer's birthday.  
The setting is available in CHQ under `sales > promotion engine > [your promotion engine] > edit >` the `options` tab. To configure, it's required to select the **allow during birthday period only** checkbox and then set the following values:

- **days before**: the number of days before the customer's birthday when the promo becomes applicable
- **days after**: the number of days after the customer's birthday when the promo stays applicable 
{{% /notice %}}
Prior to version 6.39.171, it was sometimes impossible to have a promo correctly applied in POS PRO based on the **allow during birthday period only** setting. To resolve this issue, we've changed the logic based on which the system defines if the customer is eligible for the promo.

In particular, the promo is applied if `CURRENTDATE` is within the following date range: from (`the closest customer birthday` - `days before`) to (`the closest customer birthday` + `days after`).

### Removed options in the finalized Sales Receipt view

`Build 6.39.186: PRO-11948`

In the finalized Sales Receipt view, we've removed the **Return**, **Void/Reverse**, and **Reprint** options. 
{{% notice info %}}
Note that these options are still available when the Sales Receipt is opened in the **Return** mode.
{{% /notice %}}
Additionally, as a part of this update, we've changed the behavior of the **Close** button {{% inum "A" %}} on the **Sale Complete** screen of a Verified Return:
{{% gimg src="V6.39 Mob Rel Guide/6.39_mobrelguide_36.jpg" width="700px"%}} 
Now, on tapping **Close**, the user is returned to POS Home Screen instead of the **Return** area.

## Impacted Areas

Teamwork Commerce PRO Suite allows for unique client-specific configurations. If the above is your case, we recommend that the areas and workflows listed below be additionally checked to ensure the existing functionality works as expected in conjunction with the newly released features.
{{% notice note %}}
Please be advised that the information below does not include details on the configurations and conditions required for testing the new features. For detailed information, see the respective feature description in this release guide.
{{% /notice %}}
**Feature**|**Impact**|
:-----------|:-----------|
Automated detached payment check|Test workflows related to transaction with detached payment finalization. Pay attention to different conditions where detached payments can appear.|
Visibility configuration and translations extended for dictionaries|Test the visibility of values in POS – for example, adjustment reasons – at a specific store location. Additionally, check translations of customer titles in customer records.|
Updated Lock Screen|Test the Lock Screen workflow in various POS areas paying attention to the user's security rights.|
Indicating a gift card item when transferring balance between gift cards|Test the workflow for transferring balance between gift cards with the receiving gift card being new. Pay attention to the new Gift Card Item option.|
Sales Receipt: Cash rounding|Test workflows related to finalizing a sale with cash payment applied. Pay attention to the options related to cash rounding.|
Sales Receipt: New options to configure tax exemption status|Test workflows related to sales with tax exemption applied to individual items or the whole receipt. Pay attention to configuring the tax exemption status of a tax jurisdiction as well as adding information on a tax exempt customer.|
Ship Memo: Sending a request for the customer’s signature to ShippyPro|Test workflows related to finalizing a Ship Memo with Shippy Pro. Pay attention to the new Delivery Confirmation Signature option.|
Push notifications of new Ship Memos|Check the appearance of Ship Memo notifications on the device screen regardless of whether POS PRO is running at the moment.|
Drawer Memo: New order of columns under Drawer Cash – Opening Count|Test Drawer Memo – Start of Day workflow paying attention to the new order of columns in the drawer cash denomination grid.|
Drawer Memo: Updated verification during Start of Day and End of Day|Test workflows related to Start of Day and End of Day paying attention to the Opening Verification and Closing Verification options respectively.|
Customer: The Consent field is required for new customers in Canada|Check workflows related to customer record creation paying special attention to the state of the Consent field.|
European fiscal compliance: Passwords for Italian fiscal printer|Check the new settings added for the RT fiscal printer. Then, test workflows in the Sales Receipt and Drawer Memo areas related to the fiscal printer. |
European fiscal compliance: Printing updates for Italy|Test printing options related to the RT fiscal printer in the Sales Receipt and finalized Sales Receipt areas.|
European fiscal compliance: Updated printing for Verified Returns|Test workflows related to printing in the Verified Return view.|

{{% notice warning %}}
WE DO NOT WARRANT AND SHALL NOT BE RESPONSIBLE FOR THE PERFORMANCE OF ANY THIRD-PARTY VENDOR’S PRODUCTS OR SERVICES. ALL SOFTWARE AND HARDWARE IS ACQUIRED SUBJECT TO THE END USER LICENSE AGREEMENT, WARRANTY, AND OTHER TERMS PROVIDED BY THE MANUFACTURER OR SUPPLIER OF SUCH THIRD-PARTY PRODUCT.   YOU AGREE TO BE BOUND BY AND COMPLY WITH ANY SUCH MANUFACTURER LICENSE AGREEMENT, WARRANTY, OR OTHER TERMS AND CONDITIONS, AND YOU UNDERSTAND AND AGREE TO LOOK SOLELY TO THE THIRD-PARTY VENDOR OF THE PRODUCT FOR MAINTENANCE AND SUPPORT, INCLUDING BUT NOT LIMITED TO RESOLUTION OF SYSTEM ERRORS, BUGS, PATCHES, HOT FIXES, ETC. YOUR SOLE AND EXCLUSIVE RIGHTS AND REMEDIES WITH RESPECT TO ANY THIRD-PARTY PRODUCT OR SERVICE, INCLUDING RIGHTS AND REMEDIES IN THE EVENT A THIRD-PARTY PRODUCT OR SERVICE GIVES RISE TO AN INFRINGEMENT CLAIM, WILL BE AGAINST THE THIRD-PARTY VENDOR AND NOT AGAINST US.

TO THE MAXIMUM EXTENT PERMITTED BY LAW, WE DISCLAIM ANY AND ALL PROMISES, REPRESENTATIONS, AND WARRANTIES, EXPRESS OR IMPLIED, WITH RESPECT TO THE VERSION OF THE PROGRAM SET FORTH HEREIN, SPECIFICALLY INCLUDING ANY UNDERLYING THIRD PARTY TECHNOLOGIES AND/OR PLATFORMS USED IN CONJUNCTION WITH SAME, MATERIALS AND ANY OTHER DATA, INFORMATION, OR OTHER MATERIAL FURNISHED TO USER HEREUNDER, INCLUDING, WITHOUT LIMITATION, THE CONDITION THEREOF; AND WARRANTIES OF NON-INFRINGEMENT, TITLE, MERCHANTABILITY, OR FITNESS FOR A PARTICULAR PURPOSE OR USE.
{{% /notice %}}

## Issue Resolutions

### Sales Receipt: Incorrect associate displays at the item level

`Build 6.39.107: DS-3047`

**Issue**  
In POS PRO, an incorrect store associate would display under `Sales Receipt > Cart > [item name] - edit > Item Details` in the **Associate** field if the following was done prior:

1. One item was added to Cart and marked as Open Return
2. The cashier and associate were changed at the receipt level
3. Two more items were added to Cart and marked as Open Return

In the scenario described above, the associate for the item from **step 1** would not change as configured by the user in **step 2**.

**Resolution**  
The issue has been fixed. Now, if the associate is changed for the whole receipt, that associate is assigned to all items on the receipt as expected. 

### Drawer Memo: Warning fails to appear if closing amounts are not masked

`Build 6.39.107: PRO-2890`

Prior to version 6.39.107, the **Not the Expected Amount** warning failed to appear under `Drawer Memo > End of Day > DRAWER CASH > Closing Count` if:

- the counted amount of cash didn't match the expected amount, and
- the amounts were NOT masked

The issue has been fixed. Now, the warning appears as expected even when the drawer amounts aren't masked.

### Transfer Out: ItemLineNo is set to 0 for all items

`Build 6.39.107: DS-3316`

Prior to version 6.39.107, when a Transfer Out was created by tapping **Transfer All** in the Transfer Order, the *ItemLineNo* value for each item could be incorrectly set to `0` at the database level. 

Now, as expected, the *ItemLineNo* value increments with each next line item in the transfer. 

### Promo is not applied for eligible customers

`Build 6.39.107: DS-2970`

We've fixed the issue where a promo restricted by the customer's birthday and membership level couldn't be applied if the customer's birth year was set to any year before 2022. 

### The inactive status of a cash management action is not respected

`Build 6.39.107: DS-3273`

We've fixed the issue where, under `Drawer Memo > Manage Cash`, the user was able to perform the **Move To Drawer** action even if that action was defined as inactive in CHQ.

### Drawer Memo: Counted Amount defaults to Expected Amount in End of Day

`Build 6.39.107: DS-3315`

**Issue**  
Under `Drawer Memo > End of Day > DRAWER CASH > Closing Count`, the **Counted Amount** value would incorrectly default to the **Expected Amount** value.

**Resolution**   
Now, on opening the **DRAWER CASH – Closing Count** tab, the **Counted Amount** is set to `0` as expected. 
{{% notice info %}}
**Counted Amount** defaults to `0` on the condition that the **use denomination plans for cash drawers & safes** checkbox is cleared in CHQ under `settings > drawer management > drawer memo settings >` the `drawer memo` section.
{{% /notice %}}

### Promo restricted to membership level is not applied

`Build 6.39.107: DS-3301`

We've fixed the issue where a promotion restricted to customers with level 0 membership would sometimes fail to apply to eligible sale items in POS PRO.

### Clover terminal stops responding

`Build 6.39.129: DS-3302`

We've fixed the issue where the connected Clover payment terminal could occassionally stop responding with the `Payment Terminal Not Responding` error message when the customer inserted their credit card.

### Drawer Memo: The Left in Safe (Previous Drawer Memo) value changes after Start of Day completion

`Build 6.39.171: DS-3366`

Prior to version 6.39.171, the **Left in Safe (Previous Drawer Memo)** value available under `Drawer Memo > Start of Day > SAFE CASH > Opening Count` could sometimes reset to zero after the user completed the Start of Day (SOD) process. 

The issue has been fixed. Now, the **Left in Safe (Previous Drawer Memo)** value stays the same after SOD is completed. 

### Drawer Memo: Incorrect display of the Over/Short warning during End of Day

`Build 6.39.171: DS-3367`

We've fixed the issue where, on finalizing the End of Day process, the **Over/Short** warning could come up even if there was no discrepancy between the counted and expected amounts.

### Drawer Memo: Buttons missing in the Midday Count area

`Build 6.39.171: DS-3365`

We've fixed the issue where under `Drawer Memo > Midday Count > New Count` the **Open Drawer** and **Clear Counts** options were missing.

### Transfer In: Unable to change the In Qty value

`Build 6.39.171: DS-3376`

**Issue**  
In a Transfer In, it was sometimes impossible to change the **In Qty** value for an item. In particular, under `Shipments > Incoming > [selected Transfer In] > Items`, on tapping the value in the **In Qty** column, the **Edit** dialog failed to appear.

**Resolution**  
The issue has been fixed. Now, on tapping the **In Qty** value, the **Edit** dialog comes up where it's possible to change the incoming quantity. 

### Shipments: Time frame filter working incorrectly in History

`Build 6.39.171: DS-3386`

We've fixed the issue where, under `Shipments > History`, on trying to apply the `Last 180 days` or `Last 365 days` time frame filter, no historical documents would display even if such documents were available.

### Availability: Incorrect Non EC ATS value

`Build 6.39.171: DS-3389`

Prior to version 6.39.171, the **Non EC ATS** item quantity available in POS PRO under `Catalog > Availability` would sometimes not match the respective **ATS** quantity displayed for that item in CHQ. That happened due to incorrect calculation of the **Non EC ATS** value for POS.

The issue has been fixed. Now, the **Non EC ATS** value is calculated as expected and matches the **ATS** value in CHQ.

### Drawer Memo: Counted Amount in End of Day doesn't match the last Midday Count

`Build 6.39.171: DS-3383`

**Issue**  
Occasionally, the closing count of cash in the **End of Day** area failed to match the amount from the last midday count. In particular, under `Drawer Memo > End of Day > DRAWER CASH > Closing Count`, the **Counted Amount** field would display an incorrect amount.
{{% notice info %}}
The End of Day closing count should match the amount from the last Midday Count record if no cash payments were taken and no cash movement records created after that Midday Count.
{{% /notice %}}

**Resolution**  
Now, as expected, the **Counted Amount** in the **End of Day** area is adopted from the last Midday Count if appropriate.

### Drawer Memo: Issue with status synchronization

`Build 6.39.177: DS-3381`

Prior to version 6.39.177, a Drawer Memo (DM) that had the `Finalized` status in POS PRO could incorrectly have the `Offline` status in CHQ. 

That happened when, prior to finalization, the user manually changed the DM status to `Inactive` and then back to `Active` in POS. In such a scenario, changing back to `Active` sometimes didn’t synchronize with CHQ. That resulted in the DM remaining in the `Offline` status when viewed in the Drawer Memo report.

The issue has been fixed. Now, changes of the DM status are synchronized as expected, and the DM status in POS matches the status in CHQ. 

### Drawer Memo: Fields required for printing are not filled out

`Build 6.39.177: DS-3430`

We’ve fixed the issue where, at the database level, the DrawerMemoMedia.Amount and DrawerMemoMedia.AccountType fields weren’t populated as expected. These fields are required for complete information to be present on the printed Drawer Memo. 

### Sales Receipt: Change Due incorrectly incremented

`Build 6.39.177: DS-3434`

**Issue**  
Under `Sales Receipt > Payment`, when **Change Due** amount was present, and the user chose the Cash payment method to give change, **Change Due** was incorrectly incremented. For example, if **Change Due** was €5, and the user entered `5.00` to give change, **Change Due** would be incremented to €10. 

**Resolution**  
The issue has been fixed. Now, when the user gives the full change amount, the receipt total is balanced as expected. 

### Banorte payment information missing on printed receipt

`Build 6.39.177: DS-3441`

We’ve fixed the issue where, when the payment on a transaction was processed with Banorte, payment-related information was missing on the printed Sales Receipt.

### Drawer Memo: Incorrect Left in Drawer (Previous Drawer Memo) value in Start of Day 

`Build 6.39.178: DS-3484`

Prior to version 6.39.178, under `Drawer Memo > Start of Day > DRAWER CASH > Opening Count`, the **Left in Drawer (Previous Drawer Memo)** amount could incorrectly reset to `0.00`.

The issue has been fixed. Now, as expected, the **Left in Drawer (Previous Drawer Memo)** amount matches the **Leave in Drawer Amount** value set by the user during the last End of Day process.

### Receipt fails to print for transactions with cash payment

`Build 6.39.182: DS-3659`

Prior to version 6.39.182, users were sometimes unable to print the receipt for transactions where a cash payment was present. That could happen in environments where the **require cash drawer close** setting was enabled in CHQ under `settings > location settings > locations / location settings > [selected location] > sales`. 

The issue has been fixed. Now, receipts are printed as expected for such transactions. 
<br>
<br>
<br>
[DOWNLOAD PDF](https://storage.googleapis.com/twc-pedia-prod-bucket/pdf/relguides/POS%20PRO%20Release%20Guide%20V6.39.pdf)