---
title: "Version 6.38"
date: 2021-12-07T11:50:16+02:00
draft: false
weight: 93
---

[DOWNLOAD PDF](https://storage.googleapis.com/twc-pedia-prod-bucket/pdf/relguides/CHQ%20Release%20Guide%20Version%206.38.162.0.pdf)

## Purchasing

### Purchase Orders: Adding custom columns to the list view

`Build 6.38.98.0: PRO-6081`

We've introduced the capability to add the following custom columns to the Purchase Orders list view in CHQ:

- **custom date 1-4**
- **custom decimal 1-4**
- **custom flag 1-4**
- **custom lookup 1-8**
- **custom number 1-4**
- **custom text 1-4**

To make a custom column available in the list view, prior to that, users must configure the column in the **settings** area.

#### Configuring a custom column in settings

1. Go to `settings > purchasing > custom fields > purchase order header`.
2. Click to select the required column type and then click **edit**.
3. In the dialog that opens, enter the column name in the **label** field. 
{{% notice tip %}}
Please note that when the **label** field is not defined, the default name displays, for example **custom date 1**.  
{{% /notice %}}
Also, make sure to select the **visible** checkbox.
{{% gimg src="V6.38 CHQ Release Guide/638_chq_po2.jpg" title="Configuring custom column record" width="300px"%}}
{{% notice note %}}
Custom records not marked as visible will not be available for selection in the Purchase Order list view.
{{% /notice %}}
4. Once finished, click **save**.

#### Configuring visibility of custom columns in the Purchase Order list view

Custom columns are not visible by default. To add them to the table:

1. In CHQ, go to `purchasing > purchase orders > list`.
2. In the **list view**, right-click the table header and then select the columns required for display:
{{% gimg src="V6.38 CHQ Release Guide/638_chq_po1.jpg" title="Adding custom columns to the Purchase Order list view" width="800px"%}}

#### See also

- [Cloud HQ User Manual: Settings](https://teamworkclients.atlassian.net/wiki/spaces/TD/pages/130658051/Settings+Manual "Version 6 – Settings Manual in Teamwork Confluence")
- [Cloud HQ User Manual Purchasing](https://teamworkclients.atlassian.net/wiki/spaces/TD/pages/1370849373/6.0+Series "Version 6 Purchasing in Teamwork Confluence")

## Sales

### Extended length of the customer profile link

`Build 6.38.98.0: PRO-8567`

To support longer URLs, we've extended the length of the **customer profile link** field to 2048 characters.

{{% notice tip %}}
In CHQ, the **customer profile link** field is available under `chq > sales > customer > [selected customer record] > membership`.
{{% /notice %}}

#### See also

- [Сonfiguring display of links to external customer profiles in V6.34 CHQ Release Guide](https://twdocs.netlify.app/userdoc/chq/relguides/6.34_chq_relguide/#сonfiguring-display-of-links-to-external-customer-profiles "V6.34 CHQ Release Guide")
- [V6.38 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.38_mobile_rel_guide/ "Mobile Release Guide Version 6.38")

## Settings

### Configuring Card on File related settings

`Build 6.38.98.0: PRO-7629`

As of version 6.38.98.0 of CHQ, we've added the capability to allow for saving a customer’s card on file via POS PRO V6.
{{% notice note %}}
The Card on File feature applies to payments processed via Adyen terminal API only.

Please be advised that Teamwork doesn’t store sensitive credit and debit card details.
When data is transferred between Teamwork and Adyen, tokenization is used to ensure PCI compliance.
To learn more about Adyen tokenization for recurring payments, see [Recurring payments](https://docs.adyen.com/point-of-sale/shopper-recognition/recurring-payments#card-and-shopper-identifiers) on Adyen developer portal.
{{% /notice %}}

**The Card on File section in POS PRO**
{{% gimg src="V6.38 CHQ Release Guide/638_chq_cof6.jpg" title="The Card on File section in POS PRO during the sale" width="700px"%}}

This resulted in the following updates in CHQ:

- updating the security rights
- adding card on file related options to the **Customer** and **Sales Receipt** areas in v6 App Designer
- adding the **enable card on file options** checkbox to the payment processing settings.

#### Purpose

The new feature allows for securely storing a customer's card information for recurring payments. Using a saved card for payments speeds up customer checkout and improves customer experience.

Also, this speeds service when making sales, and it encourages future purchases.

#### Related security rights

We've added a new security right in CHQ:

Area |Right |Description |
:-----------|:-----------|:-----------|
Sales | Remove card on file | Allows the user to remove a card from the customer's record |

Also, the **Capture CC to save on file** security right has been renamed to **Save to CC on file**:

Area |Right |Description |
:-----------|:-----------|:-----------|
Sales | Save to CC on file | Allows the user to save a card as 'on file' |

Additionally, to use the card on file functionality, the user must have the following security right:

Area |Right |Description |
:-----------|:-----------|:-----------|
Sales | Use card on file pmnt method | Allows the user to select a card on file as the payment in POS |

{{% notice note %}}
For information on how to assign security rights to users, see the **Roles** section of the [Cloud HQ User Manual: Settings](https://teamworkclients.atlassian.net/wiki/spaces/TD/pages/130658051/Settings+Manual "Version 6 – Settings Manual in Teamwork Confluence").
{{% /notice %}}

#### Enabling the Card on File functionality at the company level

To enable all the options related to the new functionality in POS PRO:

1. In CHQ, go to `settings > sales > payment processing`.
2. Scroll down to find the **adyen terminal API** section.
3. Select the new **enable card on file options** checkbox. This checkbox is clear by default.  
{{% gimg src="V6.38 CHQ Release Guide/638_chq_cof5.jpg" title="The enable card on file options checkbox in the Adyen terminal API section" width="800px"%}}
{{% notice warning %}}
Please be advised, if the **disable integrated processing** setting is selected for your Adyen payment method (under `chq > settings > sales > payment methods > [your payment method] > location settings > [selected location] > edit`), all the associated Card On File options will be hidden in POS PRO.
{{% /notice %}}
4. Click **save**.

Also, as a part of this update, we've removed the following settings from the **Adyen** section:

- **enable 'save card on file' on sales orders**
- **'card on file' authorization amount**

#### How to add the Add Card on file option to the Sales Receipt area in POS PRO

1. In CHQ, go to `settings > company settings > v6 App Designer`.
2. In the area that opens, choose `Point of Sale V6 > iPad > Sales Receipt > Receipt Options`:
{{% gimg src="V6.38 CHQ Release Guide/638_chq_cof1.jpg" title="V6 App Designer area in CHQ" width="500px"%}}
3. Under **available fields**, find and then press and drag **Add Card on File** to the **layout** section.
{{% notice note %}}
Please note that the order of labels in the **layout** section defines the order in which they display in POS PRO.
{{% /notice %}}
{{% gimg src="V6.38 CHQ Release Guide/638_chq_cof2.jpg" title="Add Card on File in Receipt Options" width="500px"%}}
Alternatively, to remove a field from the area, press the required label and then drag it out of the **layout** area.
4. Click **save**.

#### How to add the Card on File section to the customer record in POS PRO

{{% notice info %}}
In POS PRO, the **CARD ON FILE** section in the customer record shows all the customer's saved cards.
{{% /notice %}}

1. Go to `settings > company settings > v6 App Designer`.
2. In the area that opens, choose `Point of Sale V6 > iPad > Customer > Customer Form`:
{{% gimg src="V6.38 CHQ Release Guide/638_chq_cof4.jpg" title="V6 App Designer area in CHQ" width="500px"%}}
3. Under **predefined groups**, click the **plus** sign next to **Card on File** to add it to the **layout** section.
{{% notice note %}}
Please note that the order of groups and labels in the **layout** section defines the order in which they display in POS Pro.
{{% /notice %}}
{{% gimg src="V6.38 CHQ Release Guide/638_chq_cof4.jpg" title="Card on File in Customer Form" width="700px"%}}
{{% notice tip %}}
You can create a new pre-defined group by clicking **add group** at the top-right of the **layout** area.  
{{% /notice %}}
Alternatively, to remove the group from the **layout** area, press the **cross** sign next to the group name.
4. Click **save**.

When enabled, the **CARD ON FILE** section becomes available in the customer record in POS PRO:
{{% gimg src="V6.38 CHQ Release Guide/638_chq_cof7.jpg" title="The CARD ON FILE section of the customer record" width="600px"%}}

#### See also

- [V6.38 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.38_mobile_rel_guide/ "Mobile Release Guide Version 6.38")
- [Cloud HQ User Manual: Settings](https://teamworkclients.atlassian.net/wiki/spaces/TD/pages/130658051/Settings+Manual "Version 6 – Settings Manual in Teamwork Confluence")

### Configuring Adyen live URL prefix

`Build 6.38.98.0: PRO-7960`

We've added a new **live url prefix** setting related to Adyen payment processing.

This setting is required to perform Adyen transactions live as opposed to the test mode.
{{% notice note %}}
You can get the live URL prefix in **your Adyen live Customer Area**. To learn how to do so, see [Live URL prefix](https://docs.adyen.com/development-resources/live-endpoints#live-url-prefix) on Adyen documentation website.
{{% /notice %}}

#### How to configure

1. In CHQ, go to `settings > sales > payment processing`.
2. Scroll down to the **adyen** section.
3. Clear the **test mode** checkbox (selected by default).
4. Define the **live url prefix** field, max `4000` characters allowed:
{{% gimg src="V6.38 CHQ Release Guide/638_chq_url1.jpg" title="The new live url prefix field" width="800px"%}}
Please note that the **live url prefix** setting is provided by Adyen in **your Adyen account** settings.
5. Click **save**.

#### See also

- [V6.38 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.38_mobile_rel_guide/ "Mobile Release Guide Version 6.38")
- [Cloud HQ User Manual: Settings](https://teamworkclients.atlassian.net/wiki/spaces/TD/pages/130658051/Settings+Manual "Version 6 – Settings Manual in Teamwork Confluence")

### New Adjustment payment type

`Build 6.38.98.0: PRO-4665`

As of version 6.38, we've added a new Adjustment payment method.

Before you can start using this payment method in POS PRO, in CHQ, it's required to:

- set up a payment method with **type**=`adjustment`
- make that payment method available for the required location
- define at least one adjustment payment reason
- assign related security rights

#### Purpose

The Adjustment payment method can be used to adjust the receipt total to the required negative or positive amount when issuing or redeeming a Credit Memo.

For example, due to "poor customer service", the store manager wants to appease the customer by issuing a $50 Credit Memo. To do so without performing a refund, users can now do the following:

1. Start a new receipt and then, via the Adjustment payment method, set the receipt total to `Change Due: - $50`.
2. Select the Credit Memo payment method and enter the `$50` amount. Note that, as the receipt total is set to negative, the Credit Memo payment method is used as a means to give value to the customer.
On saving, a $50 Credit Memo is created and linked to the customer’s account. Additionally, the receipt total is now balanced, and the transaction can be finalized.

Thus, the Adjustment method allows for offering compensation to customers without making a refund as well as recording the newly created value for accounting purposes.

#### New security right

We've added a new security right to control access to the Adjustment payment method in POS PRO V6:

Area |Right |Description |
:-----------|:-----------|:-----------|
Payments | Allow adjustment payment | Allows the user to select the Adjustment payment method |

{{% notice note %}}
For information on how to assign security rights to users, see the **Roles** section of the [Cloud HQ User Manual: Settings](https://teamworkclients.atlassian.net/wiki/spaces/TD/pages/130658051/Settings+Manual "Version 6 – Settings Manual in Teamwork Confluence").
{{% /notice %}}

#### Setting up the Adjustment payment method

1. Go to `settings > sales > payment methods`.
2. In the area that opens, click **new**.
3. In the **new payment method** dialog, select `adjustment` for the **payment type** field and then click **ok**.
{{% gimg src="V6.38 CHQ Release Guide/638_chq_adjustment1.jpg" title="Creating a new adjustment payment type record" width="400px"%}}
4. Then, configure the following payment settings:
Setting | Description | Value |
:----------- | :----------- | :----------- |
**payment type** | the name of the payment method | `adjustment`, not editable |
**code** | the payment method name in POS PRO | An alphanumeric value up to 128 characters, empty by default, required |
**description** | an optional description of the payment method | An alphanumeric value up to 400 characters, empty by default |
**require customer** | if the checkbox is selected, a customer must be added to the sale| Clear by default |
**open cash drawer on finalize** | if the checkbox is selected, the cash drawer is automatically opened on finalizing the sale| Clear by default |
**fiscal label** | the name of the payment method that will appear in fiscal reports| An alphanumeric value up to 128 characters, empty by default |
**list order** | the position of the payment method in the payment method list in POS PRO| Values can range from `-9999` to `9999`. `0` is set by default |
**external ID** | an optional ID of the payment method | An alphanumeric value up to 128 characters, empty by default |
**inactive** | if the checkbox is selected, this payment method will be unavailable in POS PRO| Clear by default |
**maximum amount allowed** | the maximum amount allowed for this payment method. If the entered payment amount is greater than the indicated value, a warning displays in POS PRO | Values can range from `0` to `999,999.00`. `0` means that there's no limit, set by default|
**non gift item - refund to** | an optional field to define how a refund should be performed for that payment method| Possible values: `virtual gift card`, `virtual gift card to giftee email`, `credit memo`, and `offline payment`. The field is empty by default |
**gift item - refund to** | an optional field to define how a refund should be performed for that payment method | Possible values: `virtual gift card`, `virtual gift card to giftee email`, `credit memo`, and `offline payment`. The field is empty by default|

5. Click **save**.

#### Making the Adjustment payment method available for a location

1. In CHQ, go to `settings > sales > payment methods`.
2. In the area that opens, select **[your adjustment payment]** method.
3. Above the grid, click the **location settings** button.
4. In the dialog that opens, select the necessary location.
5. Click **edit**.
6. In the dialog that opens, select the **visible** checkbox:
{{% gimg src="V6.38 CHQ Release Guide/638_chq_adjustment3.jpg" title="The adjustment payment method" width="400px"%}}
7. Save your changes.

#### Defining adjustment payment reasons

The list of existing adjustment payment reasons is now available under `chq > settings > sales > adjustment payment reasons`.

To find a specific reason, use the **search field** ({{% inum "A" %}} in the screenshot) at the top-right.

By clicking **filter** above the grid ({{% inum "B" %}}), you can filter the records by the **active/inactive** status.
{{% gimg src="V6.38 CHQ Release Guide/638_chq_adjustment4.jpg" title="The adjustment payment reasons area in CHQ" width="800px"%}}

##### Creating a new adjustment payment reason

1. In CHQ, go to `settings > sales > adjustment payment reasons`.
2. Click **new**.
3. In the dialog that opens, populate the following fields:
{{% gimg src="V6.38 CHQ Release Guide/638_chq_adjustment5.jpg" title="The adjustment payment method" width="400px"%}}

    - **code**: the code assigned to the reason, required
    - **description**: text description of the reason
    - **list order**: the position of the reason in POS PRO
    - **external ID**: the ID used by external systems to reference that reason, max 128 characters allowed, empty by default
    - **inactive**: select the checkbox to make the reason inactive

4. Click **save**.

#### See also

- [V6.38 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.38_mobile_rel_guide/ "Mobile Release Guide Version 6.38")
- [Cloud HQ User Manual: Settings](https://teamworkclients.atlassian.net/wiki/spaces/TD/pages/130658051/Settings+Manual "Version 6 – Settings Manual in Teamwork Confluence")

### New security rights for shipping and rejecting all Ship Memo items in POS PRO

`Build 6.38.98.0: PRO-8397`

With this update, we've removed the **V6 Ship Memos - Ship/Reject All** security right and replaced it with the following new rights:
Area |Right |Description |
:-----------|:-----------|:-----------|
Shipments | V6 Ship Memos - Ship All | Allows the user to select the **Ship All** button in POS PRO under `Shipments > Outgoing > [selected Ship Memo] > Items` |
Shipments | V6 Ship Memos - Reject All | Allows the user to select the **Reject All** button in POS PRO under `Shipments > Outgoing > [selected Ship Memo] > Items` |

{{% notice note %}}
For information on how to assign security rights to users, see the **Roles** section of the [Cloud HQ User Manual: Settings](https://teamworkclients.atlassian.net/wiki/spaces/TD/pages/130658051/Settings+Manual "Version 6 – Settings Manual in Teamwork Confluence").
{{% /notice %}}

#### See also

[V6.38 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.38_mobile_rel_guide/ "Mobile Release Guide Version 6.38")

### New security rights to remove a sale item and discard a Sales Receipt

`Build 6.38.98.0: PRO-8537`

As of version 6.38, we’ve added the following security rights:
Area | Right | Description |
:----------- |:----------- |:----------- |
Sales Receipts | Allow removing item from cart | Allows a user to remove/discard an item under `POS PRO > Sales Receipt > Cart` |
Sales Receipts | Allow discarding a sales receipt | Allow a user to discard a Sales Receipt in POS PRO |

These new security rights are not assigned to users on creating a new role.
{{% notice note %}}
For information on how to assign security rights to users, see the **Roles** section of the [Cloud HQ User Manual: Settings](https://teamworkclients.atlassian.net/wiki/spaces/TD/pages/130658051/Settings+Manual "Version 6 – Settings Manual in Teamwork Confluence").
{{% /notice %}}

#### See also

[V6.38 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.38_mobile_rel_guide/ "Mobile Release Guide Version 6.38")

### Configuring the display of the Customer Profile Link field in the Sales Receipt area of POS PRO

`Build 6.38.98.0: PRO-8535`

In CHQ, users can now add the **Customer Profile Link** field for display in the following areas of POS PRO:

- `Sales Receipt > Customer`
{{% gimg src="V6.38 CHQ Release Guide/638_chq_link5.jpg" title="The Customer Profile field in the Sales Receipt area of POS PRO V6" width="600px"%}}
- `Sales Receipt > Payment`
{{% gimg src="V6.38 CHQ Release Guide/638_chq_link6.jpg" title="The Customer Profile field in the Payment area of POS PRO V6" width="600px"%}}

{{% notice info %}}
On tapping the customer profile link, POS PRO V6 will open it in the default iOS browser.
{{% /notice %}}

#### Adding to the Customer tab of the Sales Receipt area

1. Go to `chq > settings > company settings > v6 App Designer`.
2. In the area that opens, navigate to `Point of Sale v6 > iPad > Sales Receipt > Customer Tab`.
{{% gimg src="V6.38 CHQ Release Guide/638_chq_link1.jpg" title="The V6 App Designer area in CHQ" width="450px"%}}
3. Under **available fields** on the right, press **Customer Profile Link** and drag it under **layout**.
{{% gimg src="V6.38 CHQ Release Guide/638_chq_link2.jpg" title="Configuring Customer Tab" width="800px"%}}
{{% notice note %}}
Please note that the order of labels in the **layout** section defines the order in which they display in POS PRO.
{{% /notice %}}
4. Click **save** for the changes to take place.

#### Adding to the Payments area

1. Go to `settings > company settings > v6 App Designer`.
2. In the area that opens, choose `Point of Sale v6 > iPad > Sales Receipt > Customer on Payment Form`.
{{% gimg src="V6.38 CHQ Release Guide/638_chq_link3.jpg" title="The V6 App Designer area in CHQ" width="450px"%}}
3. Under **available fields** on the right, press **Customer Profile Link** and drag it under **layout**.
{{% gimg src="V6.38 CHQ Release Guide/638_chq_link4.jpg" title="Configuring a profile link display on Customer on Payment Form of POS Pro" width="800px"%}}
{{% notice note %}}
Please note that the order of labels in the **layout** section defines the order in which they display in POS PRO.
{{% /notice %}}
4. Click **save**.

#### See also

- [V6.38 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.38_mobile_rel_guide/ "Mobile Release Guide Version 6.38")
- [Cloud HQ User Manual: Settings](https://teamworkclients.atlassian.net/wiki/spaces/TD/pages/130658051/Settings+Manual "Version 6 – Settings Manual in Teamwork Confluence")

### Configuring Reserve Orders area for POS PRO V6

`Build 6.38.98.0: PRO-6832`

As of version 6.38.98.0, we've introduced the Reserve Orders functionality for POS PRO.

To make Reserve Orders available in POS PRO, the following must be configured in CHQ:

- Reserve Orders must be configured in V6 App Designer
- printing options for Reserve Orders must be configured for the device under **device controller**

#### Purpose

Reserve Orders allow for reserving products in-store, ensuring the item is removed from Available-to-Sell so that the item is not oversold.

{{% notice note %}}
If the **Expiration Date** is selected for a Reserve Order, the items from the Order will be automatically returned to Available-to-Sell on the defined date and time. Please note that the **Expiration Date** field is optional and defaults to your current date and time when selected.  
Alternatively, the item(s) should manually be removed from Reserve to the store’s inventory if a customer does not collect the item.
{{% /notice %}}

Adding the new **reserve orders** section for the device in CHQ under **device controller** allows for configuring printing-related settings for reserve orders.

#### New security rights

We've added the following security rights related to Reserve Orders:
Area | Right | Description |
:----------- |:----------- |:----------- |
Reserve Orders | Access | Access Reserve Orders area |
Reserve Orders | Add/Edit | Add a new or edit existing Reserve Orders |

{{% notice note %}}
For information on how to assign security rights to users, see the **Roles** section of the [Cloud HQ User Manual: Settings](https://teamworkclients.atlassian.net/wiki/spaces/TD/pages/130658051/Settings+Manual "Version 6 – Settings Manual in Teamwork Confluence").
{{% /notice %}}

#### Adding the Reserve Orders option to the Home Screen of POS PRO

For users to access the **Reserve Orders** area from the Home Screen of POS PRO, the **Reserve Orders** option must be configured in v6 App Designer.

To configure, in CHQ:

1. Go to `settings > company settings > v6 App Designer`.
2. In the area that opens, choose `Point of Sale V6 > iPad > Home`:  
{{% gimg src="V6.38 CHQ Release Guide/638_chq_RO6.jpg" title="The Home area of V6 App Designer" width="600px"%}}
3. Make sure that the **Reserve Orders** label is placed under **layout**:
{{% gimg src="V6.38 CHQ Release Guide/638_chq_RO7.jpg" title="The Home area of V6 App Designer" width="600px"%}}
By changing the order of labels under the **layout** section you can define the place where the respective label displays:

    - in the navigation panel proper: the label is among the first five under **layout**
    - in the **More** menu: the label is in the sixth position or lower

    To remove a label, press the required label and then drag it under **available fields**.
4. Click **save**.

#### Configuring the layout of the Reserve Orders area

In V6 App Designer, it's possible to configure the following sections of the **Reserve Orders** area:

- **List View**
- the **Customer tab**
- the **Items tab**

To do so:

1. In CHQ, go to `settings > company settings > V6 App Designer`.
2. In the area that opens, navigate to `Point of Sale v6 > iPad > Reserve Orders`.
{{% gimg src="V6.38 CHQ Release Guide/638_chq_RO1.jpg" title="The V6 App Designer area in CHQ" width="450px"%}}
3. Under **Reserve Orders**, select one of the following areas available for configuration:

    - **List view** {{% gimg src="V6.38 CHQ Release Guide/638_chq_RO2.jpg" title="The List view area of Reserve Orders" width="600px"%}}
    - **Customer tab** {{% gimg src="V6.38 CHQ Release Guide/638_chq_RO3.jpg" title="The Customer tab area of Reserve Orders" width="600px"%}}
    - **Cart Descriptions** {{% gimg src="V6.38 CHQ Release Guide/638_chq_RO4.jpg" title="The Cart Descriptions area of Reserve Orders" width="600px"%}}
    - **Cart Columns** {{% gimg src="V6.38 CHQ Release Guide/638_chq_RO5.jpg" title="The Cart Columns area of Reserve Orders" width="600px"%}}

4. Under **available fields** on the right, press the label you want to add and drag it under **layout**.
{{% notice note %}}
Please note that the order of labels in the **layout** section defines the order in which they display in POS PRO.
{{% /notice %}}
Alternatively, to remove a field from the area, press the required label and then drag it out of the **layout** area.
5. Click **save** for the changes to take place.

#### Configuring settings of the reserve order section for the device

At the device level, it's now possible to configure default printing options for Reserve Orders.

To do so, in CHQ:

1. In CHQ, go to `services > device controller`.
2. Find your device record and click it.
3. In the **edit device** dialog that opens, go to the **printing options** tab.
4. Scroll down the **printing options** tab to the **reserve orders** section in the bottom:
{{% gimg src="V6.38 CHQ Release Guide/638_chq_RO8.jpg" title="The reserve order section of the edit device dialog" width="600px"%}}
In the **reserve order** section, the following fields are available for configuration:

    - **type**: default behavior on releasing a Reserve Order (for example, `print`, `no print` or `print preview`)
    - **printer type**: your printer type (`direct printer` or `none`)
    - **printer**: your printer from the list of available printers (if **printer type** is `direct printer`); if **printer type** is `none`, the field remains inactive
    - **document template**: the template of the document
    - **number of copies**: set the number of copies from `1` to `1000`

5. Click **save** for the changes to take place.

### Adding a customer to a Reserve Order

`Build 6.38.98.0: PRO-6832`

In CHQ, Reserve Orders have been extended with the **customer** section that allows for adding a customer record to the order.

This resulted in the following updates:

1. Under `chq > inventory > reserve orders`, a new **name** filter is available that allows for filtering by the customer name:
{{% gimg src="V6.38 CHQ Release Guide/638_chq_ROcustomer1.jpg" title="The customer name filter in the reserve orders area" width="600px"%}}
2. Under `chq > inventory > reserve orders > list`, the **customer** column has been added to the table.  
By default, the **customer** column is not visible. To add the column to the table, right-click the table header and then select the column required for display:
{{% gimg src="V6.38 CHQ Release Guide/638_chq_ROcustomer2.jpg" title="The customer column in the reserve orders list view" width="600px"%}}
3. Under `chq > inventory > reserve orders > list > new` or `[selected reserve order] > edit`, the **customer** section has been added to the **reserve order - [number] - [status]** dialog
{{% gimg src="V6.38 CHQ Release Guide/638_chq_ROcustomer3.jpg" title="The customer section in the reserve orders - [number] - [status] dialog" width="600px"%}}
To find and add an existing customer, use the *search field*.  
Alternatively, to remove a customer record, click **clear** in the upper-right corner of the **customer** section.  
To create a new customer and then assign the latter to the order, click **add customer** in the upper-right corner of the **customer** section.

#### See also

- [V6.38 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.38_mobile_rel_guide/ "Mobile Release Guide Version 6.38")
- [Cloud HQ User Manual Inventory](https://teamworkclients.atlassian.net/wiki/spaces/TD/pages/1370849373/6.0+Series "Version 6 Inventory in Teamwork Confluence")

### Fiscal settings moved to a new dialog

`Build 6.38.98.0: PRO-8773`

As of version 6.38.98.0, fiscal settings have been moved from country records to a separate **[country code] - fiscal settings** dialog.
{{% notice info %}}
As of version 6.38.98.0, fiscal settings are available for the following countries:

- France
- Spain
- Germany
- Sweden
- Italy
{{% /notice %}}

Now, to configure fiscal settings for a country:

1. In CHQ, go to `settings > company settings > countries / regions`.
2. Find your country record and click to select it, then click **fiscal settings** above the grid:  
{{% gimg src="V6.38 CHQ Release Guide/638_chq_fiscal1.jpg" title="The fiscal settings button in the country/regions area in CHQ" width="800px"%}}
3. In the **[country code] - fiscal settings** dialog that opens, configure the required settings:
{{% gimg src="V6.38 CHQ Release Guide/638_chq_fiscal2.jpg" title="The [country code] - fiscal settings dialog in CHQ" width="800px"%}}
{{% notice note %}}
To edit the fiscal settings in the **[country code] - fiscal settings** dialog, the user must have the **Add/Edit Financial Settings CHQ** security right. For information on how to assign security rights to users, see the **Roles** section of the [Cloud HQ User Manual: Settings](https://teamworkclients.atlassian.net/wiki/spaces/TD/pages/130658051/Settings+Manual "Version 6 – Settings Manual in Teamwork Confluence").
{{% /notice %}}
4. Click **save**.

#### See also

- [V6.38 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.38_mobile_rel_guide/ "Mobile Release Guide Version 6.38")
- [Cloud HQ User Manual: Settings](https://teamworkclients.atlassian.net/wiki/spaces/TD/pages/130658051/Settings+Manual "Version 6 – Settings Manual in Teamwork Confluence")

### New webhooks

`Build 6.38.98.0: DS-2822`

As of version 6.38, we've added new webhooks:

- **GIFTCARD_CREATED**: occurs when a new Gift Card has been created
- **GIFTCARD_UPDATED**: occurs when an existing Gift Card has been updated
- **GIFTCARD_TXN_MADE**: occurs when a Gift Card transaction has been made
- **COUPON_CREATED**: occurs when a new Coupon has been created
- **COUPON_UPDATED**: occurs when an existing Coupon has been updated
- **CUSTOMER_CREATED**: occurs when a new Customer has been created
- **CUSTOMER_UPDATED**: occurs when an existing Customer has been updated
- **CUSTOMER_EMAIL_CHANGED**: occurs when a customer email has been changed

{{% notice info %}}
Webhooks allow third-party applications to make subscriptions to certain events in Teamwork and receive updates once such events happen.  
For example, it is possible to rely on webhooks for information on Sales Receipts creation or API documents update. 
{{% /notice %}}

#### How to add a new event for the webhook

To configure which events you want to serve as triggers for your webhook:

1. In CHQ, go to `settings > integrations > webhooks`.
2. In the **webhooks** area, click to select your webhook record and then click **edit**.
3. In the dialog that opens, go to the **events** tab.
4. In the **selected** column, select the checkbox(es) of the new events:
{{% gimg src="V6.38 CHQ Release Guide/638_chq_webhook1.jpg" title="The list of events for the webhook" width="800px"%}}
5. Click **save**.

#### See also

[Cloud HQ User Manual: Settings](https://teamworkclients.atlassian.net/wiki/spaces/TD/pages/130658051/Settings+Manual "Version 6 – Settings Manual in Teamwork Confluence")

### Improved tax jurisdiction import from Avalara

`Build 6.38.98.0: PRO-8665`

In version 6.38.98, we've improved how tax jurisdictions are imported from Avalara.

In addition to the existing logic of importing tax jurisdictions and then matching those with Teamwork tax jurisdictions by external ID, we've:

- added the capability to schedule and execute calls to Avalara automatically
- added the capability to use imported Avalara tax jurisdictions
- extended the list of tax jurisdiction related settings

#### Purpose

This update aims at facilitating how the Avalara tax jurisdictions are imported to Teamwork. Additionally, the user can now choose if they want to use imported tax jurisdictions or those created in Teamwork.

#### Scheduling and importing tax categories automatically

In CHQ, under `settings > server tasks > jobs`, we've added two new jobs:

- *Schedule Avalara Import Tax Jurisdictions*: creates a task for the *Perform Avalara Import Tax Jurisdictions* job.  
If **enable for scheduling** is selected for this job, the **use avalara tax jurisdictions** becomes selected under `settings > sales > sales documents > tax calculation service` and the *Perform Avalara Import Tax Jurisdictions* job is set to run every hour.
- *Perform Avalara Import Tax Jurisdictions*: imports tax jurisdictions from Avalara.  
If **enable for scheduling** is selected for this job, the **use avalara tax jurisdictions** becomes selected under `settings > sales > sales documents > tax calculation service`.  
Also, **enable for scheduling** for the *Schedule Avalara Import Tax Jurisdictions* job becomes selected and the job is set to run daily at 3 am.

#### Using Avalara tax jurisdictions

To enable usage of Avalara tax jurisdictions, in CHQ:

1. Go to `settings > sales > sales documents > tax calculation service`.
2. Select the **use avalara tax jurisdictions** checkbox.
{{% notice note %}}
The **use avalara tax jurisdictions** checkbox is editable if `avalara` is selected in **tax calclation service**.
{{% /notice %}}
{{% gimg src="V6.38 CHQ Release Guide/638_chq_avalara3.jpg" title="The use avalara tax jurisdictions setting in CHQ" width="800px"%}}
3. Click **save**.

On clicking **save**, the *Schedule Avalara Import Tax Jurisdictions* job will be set to run every day at 3 am and the *Perform Avalara Import Tax Jurisdictions* job will be scheduled to run every hour.

#### New settings at the tax jusridiction level

In CHQ, under `settings > company settings > taxes > sales tax jurisdictions > new / edit`, the following new fields have been added:

- **external ID**: a text field, max 256 characters allowed, empty by default.
- **autogenerated**: not editable, autopopulated; indicates if the category has been created as a result of import from Avalara.
{{% gimg src="V6.38 CHQ Release Guide/638_chq_avalara1.jpg" title="The sales tax jurisdiction dialog in CHQ" width="350px"%}}

Additionally, the **description** field is populated automatically with the information from Avalara as a result of import.

**External ID** and **autogenerated** are added as columns in the list view (`chq > settings > company settings > taxes > sales tax jurisdictions`):
{{% gimg src="V6.38 CHQ Release Guide/638_chq_avalara2.jpg" title="Making the external ID and autogenerated columns available in the sales tax jurisdictions area" width="800px"%}}
Tax categories can also be filtered by the `autogenerated` parameter.

#### See also

- [V6.38 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.38_mobile_rel_guide/ "Mobile Release Guide Version 6.38")
- [Cloud HQ User Manual: Settings](https://teamworkclients.atlassian.net/wiki/spaces/TD/pages/130658051/Settings+Manual "Version 6 – Settings Manual in Teamwork Confluence")

### New security rights to add and remove roles in CHQ

`Build 6.38.98.0: PRO-9452`

With this update, we've added the following new security rights in CHQ:
Area |Right |Description |
:-----------|:-----------|:-----------|
Security | Allows add new roles | Allows adding new roles under `settings > security > roles > new` |
Security | Allow removing roles | Allow removing roles under `settings > security > roles > [selected role] > remove` |

{{% notice note %}}
For information on how to assign security rights to users, see the **Roles** section of the [Cloud HQ User Manual: Settings](https://teamworkclients.atlassian.net/wiki/spaces/TD/pages/130658051/Settings+Manual "Version 6 – Settings Manual in Teamwork Confluence").
{{% /notice %}}

#### See also

[Cloud HQ User Manual: Settings](https://teamworkclients.atlassian.net/wiki/spaces/TD/pages/130658051/Settings+Manual "Version 6 – Settings Manual in Teamwork Confluence")

### Auto-validation of digital signature for France

`Build 6.38.98.0: PRO-9143`

With this update, it's become possible to enable automatic validation of digital signature for the following fiscal documents:

- Sales Receipts
- Sales Invoices, and
- Sales Invoices issued after Sales Receipts.

#### Enabling automatic validation

1. In CHQ, go to `settings > company settings > countries / regions`.
2. Find **France** and click to select it, then click **fiscal settings** above the table:  
{{% gimg src="V6.38 CHQ Release Guide/638_chq_fiscal1.jpg" title="The fiscal settings button in the country/regions area in CHQ" width="800px"%}}
{{% notice note %}}
To edit the fiscal settings in the **[country code] - fiscal settings** dialog, the user must have the **Add/Edit Financial Settings CHQ** security right. For information on how to assign security rights to users, see the **Roles** section of the [Cloud HQ User Manual: Settings](https://teamworkclients.atlassian.net/wiki/spaces/TD/pages/130658051/Settings+Manual "Version 6 – Settings Manual in Teamwork Confluence").
{{% /notice %}}
3. In the **[FR] - fiscal settings** dialog that opens, in the **fiscal** tab:

    - select the **automatically validate fiscal receipt** checkbox
    - populate the **check period in days** field, where values can range from `1` to `9999`. `30` is set by default
{{% gimg src="V6.38 CHQ Release Guide/638_chq_fiscal3.jpg" title="The fiscal tab of the fiscal settings dialog in CHQ" width="800px"%}}
4. Click **save**.

#### See also

- [V6.38 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.38_mobile_rel_guide/ "Mobile Release Guide Version 6.38")
- [Cloud HQ User Manual: Settings](https://teamworkclients.atlassian.net/wiki/spaces/TD/pages/130658051/Settings+Manual "Version 6 – Settings Manual in Teamwork Confluence")

### Printing credit card information on the sales receipt

`Build 6.38.98.0: PRO-8728, PRO-9486`

As of version 6.38.98.0, we've introduced the capability to configure if credit card details are printed on Sales Receipt.

This resulted in the following updates in CHQ:

- adding new settings to (dis)allow printing customer credit card information on sales documents
- removing the `print preview` option for printing documents at the device level
- adding printing options for Store Invoice at the device level.

#### Purpose

This update allows the user to control if the credit card details are printed on Sales Receipt or not.

Additionally, specifically for France, with this update we've added the capability to issue both fiscal Sales Receipt and Invoice.

{{% notice warning %}}
Please note, that issuing both Sales Receipt and Invoice is forbidden in other fiscalized countries.
{{% /notice %}}

#### New settings to allow printing customer credit card information

Under `chq > settings > sales > sales documents`, we've updated the **sales** section with the following new settings:

- **print customer credit card info on receipts option**: controls the state of the new **Print credit card info** switch for Sales Receipts in the **Payment** area of POS PRO
- **print customer credit card info on invoices option**: controls the state of the new **Print credit card info** switch for Invoices in the **Payment** area of POS PRO

{{% gimg src="V6.38 CHQ Release Guide/638_chq_print1.jpg" title="Configuring settings for printing credit card information on the sales receipt" width="800px"%}}  

For these two settings, the following options are available:

- `always`: if this option is selected, credit card details are always printed on Sales Receipt/Invoice and the **Print credit card info** switch is hidden in the **Payment** area of POS PRO
- `never`: if this option is selected, credit card details are never printed on Sales Receipt/Invoice and the **Print credit card info** switch is hidden in the **Payment** area of POS PRO
- `default true`: if this option is selected, when Sales Receipt/Invoice is finalized or reprinted, the **Print credit card info** switch is turned on by default in the **Payment** area of POS PRO
- `default false`: if this option is selected, when Sales Receipt/Invoice is finalized or reprinted, the **Print credit card info** switch is turned off by default in the **Payment** area of POS PRO

#### Removed print preview option for devices at fiscal locations

For POS devices defined for fiscal locations, the `print preview` option is no longer available in the **type** field for all documents of the receipt type (Sales Receipt, Invoice, Store Receipt, Gift Receipt, etc.) under `chq > services > device controller > [selected device] > printing options`.

{{% notice note %}}
The location record is considered fiscal if  the **fiscal** checkbox is selected under `chq > setting > location settings > locations/location settings > [selected location] > edit > details tab, the address section`.
{{% /notice %}}

#### Configuring Store Invoice printing

At the device level, it's now possible to configure default printing options for Store Invoice.

To do so, in CHQ:

1. In CHQ, go to `services > device controller`.
2. Find your device record and click it.
3. In the **edit device** dialog that opens, go to the **printing options** tab.
4. Scroll down the **printing options** tab to the **store invoice** section:
{{% gimg src="V6.38 CHQ Release Guide/638_chq_print2.jpg" title="The store invoice section of the edit device dialog" width="600px"%}}
In the **store invoice** section, the following fields are available for configuration:

    - **type**: default behavior on releasing a Store Invoice (`print` or `no print`)
    - **printer type**: your printer type (`direct printer` or `none`)
    - **printer**: your printer from the list of available printers (if **printer type** is `direct printer`); if **printer type** is `none`, the field remains inactive
    - **document template**: the template of the document
    - **number of copies**: set the number of copies from `1` to `1000`

5. Click **save** for the changes to take place.

#### See also

- [V6.38 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.38_mobile_rel_guide/ "Mobile Release Guide Version 6.38")
- [Cloud HQ User Manual: Settings](https://teamworkclients.atlassian.net/wiki/spaces/TD/pages/130658051/Settings+Manual "Version 6 – Settings Manual in Teamwork Confluence")

### Releasing held receipts stored in cloud

`Build 6.38.98.0: PRO-5219`

We've introduced the capability for the POS PRO user to retrieve and release (unhold) held Sales Receipt stored in the cloud.

To do so, the user must have the respective security rights (see the **Security rights** section below) and have the related settings configured at the location level in CHQ.

#### Purpose

Releasing held Sales Receipts may be useful in the situations when a customer places a sale on hold, and the held Receipt is stored in the cloud.

In such a situation, a store associate can search for the held Receipts by location in order to complete the sale or discard the Receipt.

#### Security rights

To access and work with held Sales Receipts in POS PRO, the user must have the following security rights:

Area |Right |Description |
:-----------|:-----------|:-----------|
Sales Receipts | System - Access Sales Receipts | Allows the user to select the sales receipt menu option |
Sales Receipts | Sales Receipts - Hold | Allows user to HOLD a Sales Receipt in progress |
Sales Receipts | Discard all Held Receipts | Allows a user to discard all held Receipts from the Held Receipts area |

{{% notice note %}}
For information on how to assign security rights to users, see the **Roles** section of the [Cloud HQ User Manual: Settings](https://teamworkclients.atlassian.net/wiki/spaces/TD/pages/130658051/Settings+Manual "Version 6 – Settings Manual in Teamwork Confluence").
{{% /notice %}}

#### CHQ settings at the location level

When working with held Sales Receipts in POS PRO, the following CHQ settings are respected:

- **clear all held receipts**: defines if and when the held Sales Receipts are deleted
- **clear all held receipts after (mins)**: defines the time after which the held Sales Receipts are deleted for the selected location (for example, in 120 minutes)
- **clear all held receipts at**: defines the exact time when the held Sales Receipts are deleted at the database level (for example, at 23:59)
- **prompt to print on hold**: if the checkbox is selected, when the user selects **Hold** for a Sales Receipt, POS PRO prompts to print the receipt.

{{% notice note %}}
These settings are located in CHQ under `settings > location settings > locations / location settings > [selected location] > edit > sales`.
{{% /notice %}}

Also, the **pass held receipts to CTS** checkbox is no longer used in POS PRO V6 since Sales Receipts are always held to CHQ.

#### See also

- [V6.38 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.38_mobile_rel_guide/ "Mobile Release Guide Version 6.38")
- [Cloud HQ User Manual: Settings](https://teamworkclients.atlassian.net/wiki/spaces/TD/pages/130658051/Settings+Manual "Version 6 – Settings Manual in Teamwork Confluence")

### Supporting Digital Assets Echo in CHQ

`Build 6.38.98.0: PRO-8746`

We’ve introduced support of digital asset echo functionality in CHQ.
{{% notice warning %}}
As of version 6.38.98.0, the functionality described below is partially completed and thus not available to clients.  
Introducing support of Digital Assets Echo is just the first step in moving Digital Asset Manager (DAM) to CHQ. Further changes and an eventual migration of DAM to CHQ will be completed in future versions.
{{% /notice %}}
In particular, in advance of digital assets import capability (not available as of now), we've added the following to CHQ:

- a new setting for echo sources
- capability to automatically purge imported digital assets
- functionality for reviewing the imported digital assets in CHQ UI

{{% notice note %}}
Please be advised that digital assets are imported in snapshots. Or, if there are a lot of assets in a snapshot, then – in snapshot chunks.  
In this context, a snapshot refers to a collection of digital assets existing on a e-commerce web-site at a particular point of time.
{{% /notice %}}

#### Purpose

The echo tables functionality exists to help reconcile the data that is transferred via various integrations with applications outside of Teamwork.

When data is transferred to another application or received by Teamwork from another application, the integration can run another process to pull the information sent (or received) into an echo table.

The *digital assets echo* functionality, in particular, allows for pulling down and viewing in CHQ the images entered directly into E-commerce.

#### Extension to the echo source settings

In CHQ, under `settings > integrations > echo source > new / edit`, we've added the **do not show digital assets** option. If the option is selected for an echo source, the respective echo source will not be available for selection in the **echo source** field of the **style - digital assets (echo)** dialog.
{{% gimg src="V6.38 CHQ Release Guide/638_chq_da1.jpg" title="The do not show digital assets checkbox in the new echo source dialog" width="400px"%}}

In the echo source list view, the `do not show digital assets` option can display per echo source in the respective column. Please note that the column is not visible by default. To make the column visible, right-click the table header and then select the columns required for display:
{{% gimg src="V6.38 CHQ Release Guide/638_chq_da2.jpg" title="The do not show digital assets column in the echo source area in CHQ" width="800px"%}}

#### Extension to the digital assets echo data structure

To allow for digital assets echo import, we've extended the digital assets echo data structure. Now the following information is stored:

- **Echo Source**: the code of the echo source
- **Snapshot #**: the unique ID of the imported snapshot
- **Snapshot DateTime**: the date and time of the snapshot creation
- **Import DateTime**: the date and time of the import execution
- **Style Identifier Type**: the type of the Style ID. Can be one of the following: `Style No`, `PLU`, `CLU`, `EID`, `UPC`
- **Item Identifier Type**: the type of the item ID. Can be one of the following: `PLU`, `CLU`, `EID`, `UPC`
- **Digital Asset URL**: the URL to identify resource location
- **Style Identifier**: the Style ID of the type specified in **StyleIdentifierType**. Indicates which style this digital asset belongs to
- **Alt Text**: digital asset description
- **List Order**: the number indicating the order in which this asset appears in the digital asset carousel
- **Hidden**: indicates if the asset is to be marked as `hidden` in the image carousel
- **Roles**: indicates how this digital asset is to be used (for example, a base image, or a thumbnail one). Multiple roles are separated by a comma
- **Catalog Link Type**: indicates if the digital asset illustrates the whole style, a style item, or a particular item attribute. Can be one of the following: `Style`, `Attribute 1`, `Attribute 2`, `Attribute 3`, `Item`
- **Attribute Value**: specifies the exact value of the attribute the digital asset displays for
- **Item Identifier**: the ID of the item this digital asset is linked to
- **Aux Text 1**: digital asset additional description
- **Aux Text 2**: digital asset additional description

{{% notice tip %}}
For information on JSON-based Digital Assets Echo Import and Export APIs, see the respective documents under **CloudHQ 6.0 API** > **CloudHQ 6.38** in [Teamwork Confluence](https://teamworkclients.atlassian.net/wiki/spaces/DEVCORNER/pages/3508797624/TDC+CHQ+Version+6.38+original "CHQ Version 6.38 in in Teamwork Confluence").
{{% /notice %}}

#### Purging imported snapshots

As imported data can be really large, we've added the capability to purge unnecessary snapshots. Purging is performed by a special job – *Digital Assets Echo Table Purge*.

When run, this job removes all the snaphots except for the last 10. The number of snapshots to keep is configured at the database level by the **digital asset snapshots to keep** setting (`10` is the default value).

#### Reviewing imported digital assets

The imported media can be reviewed in CHQ under `inventory > styles & items > list`, on clicking the **digital assets (echo)** button above the grid:
{{% gimg src="V6.38 CHQ Release Guide/638_chq_DA.jpg" title="The digital assets (echo) button in CHQ" width="800px"%}}

Clicking the button opens the **style - digital assets (echo)** dialog:
{{% gimg src="V6.38 CHQ Release Guide/638_chq_DAecho1a.jpg" title="The digital assets (echo) dialog in CHQ" width="700px"%}}

At the top of the dialog, the **echo source** dropdown menu displays (see {{% inum "A" %}} on the screenshot above).  
The menu is visible if there are more than one echo source with the **do not show digital assets** option cleared. From the menu, it is possible to select the echo source from which the digital assets will display.
{{% notice note %}}
All the digital assets in the **style - digital assets (echo)** dialog will display from the latest snapshot from digital assets echo tables for the selected echo source.
{{% /notice %}}

The dialog contains the following tabs:

- **all**: displays all the digital assets related to the style
{{% gimg src="V6.38 CHQ Release Guide/638_chq_DAecho2.jpg" title="The all tab of the digital assets (echo) dialog" width="700px"%}}
- **style**: displays all digital assets related to the style with **Catalog Link Type** equalling `Style` (see the **Extension to the digital assets echo data structure** section for details)
{{% gimg src="V6.38 CHQ Release Guide/638_chq_DAecho3.jpg" title="The style tab of the digital assets (echo) dialog" width="700px"%}}
- **attribute 1**: displays all digital assets linnked to this style and attribute. The tab will not display if the respective attribute is not defined in the style
- **attribute 2**: displays all digital assets linnked to this style and attribute. The tab will not display if the respective attribute is not defined in the style
- **attribute 3**: displays all digital assets linnked to this style and attribute. The tab will not display if the respective attribute is not defined in the style
{{% gimg src="V6.38 CHQ Release Guide/638_chq_DAecho4.jpg" title="The attribute tab of the digital assets (echo) dialog" width="700px"%}}
- **item**: displays all digital assets per style item.
{{% gimg src="V6.38 CHQ Release Guide/638_chq_DAecho5.jpg" title="The item tab of the digital assets (echo) dialog" width="700px"%}}
If there are no digital assets linked to the respective item, the no `digital assets found for selected item` text displays.

#### See also

[Cloud HQ User Manual: Inventory](https://teamworkclients.atlassian.net/wiki/spaces/TD/pages/1370849373/6.0+Series "Version 6 – Inventory Manual in Teamwork Confluence")

### Updates in Digital Assets Echo functionality

`Build 6.38.145.0: PRO-10396`

We’ve updated the logic behind display of imported digital assets in CHQ for a specific item style. Additionally, a new **EmptyData** parameter has been added to the echo data structure.
{{% notice warning %}}
As of version 6.38.145.0, the functionality described below is partially completed and thus not available to clients.  
Introducing support of Digital Assets Echo is just the first step in moving Digital Asset Manager (DAM) to CHQ. Further changes and an eventual migration of DAM to CHQ will be completed in future versions.
{{% /notice %}}

#### Updated display of digital assets for a style

Prior to version 6.38.145.0, for display of digital assets for a specific style under `chq > inventory > styles & items > list > digital assets (echo)`, only data from the latest imported snapshot was taken. Respectively, if the latest snapshot included no items from that style, no digital assets would display at all.

For example, snapshot A and then snapshot B were imported into the system. Snapshot A imported digital assets for style 1. However, the imported snapshot B, which was considered the latest, included no digital assets for style 1. Such a scenario would result in no digital assets visible at all for style 1 in CHQ.

To update this behavior, we’ve allowed for taking into account the style configured in the import. Now, to display digital assets under `chq > inventory > styles & items > list > digital assets (echo)`, the system looks for the latest imported snapshot where *the respective style was present*.

#### New EmptyData parameter

As a part of this update, we’ve removed the *Digital Assets Echo Table Purge* job from CHQ.

Instead, the **EmptyData** parameter has been added to the digital assets echo data structure. **EmptyData** allows for purging unnecessary digital assets for the specified style.

Additionally, the **EmptyData** parameter has been added to the JSON-based Digital Assets Echo Import API and JSON-based Digital Assets Echo Export API. The **EmptyData** parameter is set to `False`  by default and not required.

Also, with this update, the **RecModified** filter of JSON-based Digital Assets Echo Export API:

- does not send a style if there are no records related to this style (for corresponding echo source) in Digital Assets Echo Data tables within the dates from the **RecModified** filter
- does not skip a style if the latest snapshot (with corresponding echo source) related to this style has records (related to this style) with the populated **EmptyData** field.

#### See also

[Supporting Digital Assets Echo in CHQ](https://twdocs.netlify.app/userdoc/chq/relguides/6.38_chq_relguide/#supporting-digital-assets-echo-in-chq)

### Klarna: Sending item ID to Adyen with refund request

`Build 6.38.110.0: PRO-9017`

We've added the capability to include item ID in the refund request sent to Adyen.

#### Purpose

{{% notice info %}}
Klarna is a payment method supported by Adyen.
{{% /notice %}}
Klarna notifies the customer via email when a refund is processed. Prior to this update, such notifications did not contain any information about what goods were being refunded. 

Starting from version 6.38.110.0, in CHQ, users can configure if item details should be passed to Adyen along with the refund request. The item details will then appear in the respective refund notification from Klarna.

#### Including item details in the refund request to Adyen

1. In CHQ, go to `setting > sales > payment processing`.
2. Scroll down to the **adyen** section.
3. Select the **send item details with refund** checkbox.
4. Choose the required **item ID** from the available options: `PLU` (set by default), `CLU`, `UPC` or `EID`.  
{{% gimg src="V6.38 CHQ Release Guide/638_chq_adyen.jpg" title="Configuring the Adyen section in CHQ" width="800px"%}}
5. Click **save**.

#### See also

[Cloud HQ User Manual: Settings](https://teamworkclients.atlassian.net/wiki/spaces/TD/pages/130658051/Settings+Manual "Version 6 – Settings Manual in Teamwork Confluence")

### Configuring Customer Capture Mode functionality

`Build 6.38.110.0: PRO-9582, PRO-9668`

We've introduced the capability to configure the settings related to the Customer Capture Mode functionality in POS PRO.

This resulted in the following updates in CHQ:

- adding a new **customer capture mode** section to the company settings level, and
- adding the Customer Capture Mode option to the V6 App Designer.

#### Purpose

The Customer Capture Mode CCM) functionality provides specific branded layout by mimicing the branding and user experience of the client's website.

This update allows for turning POS into a kiosk type collection point for new customer registration.
{{% notice info %}}
For more information, please see [V6.38 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.38_mobile_rel_guide/).
{{% /notice %}}

#### Configuring the customer capture mode settings

To configure what information will display on the webpage during customer's registration:

1. In CHQ, go to `settings > company settings > company information`.
2. Scroll down to the new **customer capture mode** section.
3. Populate the following settings:
{{% gimg src="V6.38 CHQ Release Guide/638_chq_ccm3.jpg" title="The customer capture mode section in CHQ" width="800px"%}}

    - **picture**: allows for setting the header image for the CCM
    - **privacy policy**: the privacy policy text that will appear in CCM. Empty by default, max 4000 characters allowed
    - **marketing opt-in**: the marketing communications opt-it text that will appear in CCM. Empty by default, max 4000 characters allowed
{{% notice tip %}}
To add a text translation to the **privacy policy** or **marketing opt-in** fields, click the globe icon next to the respective field(s).
{{% /notice %}}

4. Click **save**.

#### Adding the Customer Capture Mode option to the Home Screen of POS PRO

For users to access the **Customer Capture Mode** area from the Home Screen of POS PRO, the **Customer Capture Mode** option must be configured in v6 App Designer.

To configure, in CHQ:

1. Go to `settings > company settings > v6 App Designer`.
2. In the area that opens, choose `Point of Sale V6 > iPad > Home`:  
{{% gimg src="V6.38 CHQ Release Guide/638_chq_ccm1.jpg" title="The Home area of V6 App Designer" width="600px"%}}
3. Under **available fields** on the right, press the label you want to add and drag it under **layout**:
{{% gimg src="V6.38 CHQ Release Guide/638_chq_ccm2.jpg" title="Configuring the Home area of V6 App Designer" width="600px"%}}
By changing the order of labels under the **layout** section you can define the place where the respective label displays:

    - in the navigation panel proper: the label is among the first five under **layout**
    - in the **More** menu: the label is in the sixth position or lower

    To remove a label, press the required label and then drag it under **available fields**.
4. Click **save**.

#### See also

- [V6.38 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.38_mobile_rel_guide/ "Mobile Release Guide Version 6.38")
- [Cloud HQ User Manual: Settings](https://teamworkclients.atlassian.net/wiki/spaces/TD/pages/130658051/Settings+Manual "Version 6 – Settings Manual in Teamwork Confluence")

### European fiscal compliance: New fiscal server type setting for Sweden

`Build 6.38.153.0: PRO-10914`

We’ve extended the fiscalization settings for Sweden with a new **fiscal server type** setting that allows for specifying if the integrated fiscal server is a test or production server.

The setting is available under `settings > company settings > country > [Sweden record] – fiscal settings > fiscal > the infrasec section`:
{{% gimg src="V6.39 CHQ Release Guide/639_chq_swe1.jpg" title="New fiscal server type setting for Sweden" width="600px"%}}

The **fiscal server type** setting is required. The following options are possible:

- `test`
- `production`

#### See also

[Cloud HQ User Manual: Settings](https://twdocs.netlify.app/userdoc/chq/manuals/ "CHQ Manual Version 6")

### New DamEchoStyleChanged webhook

`Build 6.38.162.0: PRO-13270, PRO-13271`

As of version 6.38.162.0, we’ve added the capability to receive notifications once digital assets echo snapshot is changed for an inventory style.

To do so, it is required to create a webhook and subscribe to the `DamEchoStyleChanged` event.

#### Creating the DamEchoStyleChanged webhook

To create this webhook, in CHQ:

1. Go to `settings > integrations > webhooks`.
2. Click **new**.
3. In the **new webhook** dialog that opens, on the **general** tab, fill out:

    - **name**: the name of your webhook
    - **service URI**: the URI where you want to receive notifications
    - **service secret**: secret token used to secure webhooks

4. On the **events** tab, in the **select** column, select the checkbox next to the `DamEchoStyleChanged` event.
5. **Save** your changes.

#### See also

[Cloud HQ User Manual: Settings](https://twdocs.netlify.app/userdoc/chq/manuals/ "CHQ Manual Version 6")

## Other enhancements

### JSON-based Secure Customer Export and JSON-based Location Export APIs: list of supported values extended for CountryIdentifierSetting

`Build 6.38.98.0: DS-2841, DS-2847`

In JSON-based Secure Customer Export and JSON-based Location Export APIs, **CountryIdentifierSetting** now supports `Alpha3Code` values.
{{% notice note %}}
Alpha-3 codes are three-letter country codes defined in ISO 3166-1.
{{% /notice %}}

### JSON-based Employee Export API: New settings added

`Build 6.38.98.0: DS-2849`

As of version 6.38.98.0, JSON-based Employee Export API has been extended with the following settings: **EmployeeLocationsIdentifierSetting** and **IncludeEmployeeLocations**.

The following values are supported:

- for **EmployeeLocationsIdentifierSetting** – `ExternalIdCode` and `Code`
- for **IncludeEmployeelocations** – `True` and `False`

### Performance optimization of CHQ areas

`Build 6.38.98.0: PRO-6738, PRO-6722, PRO-6726, PRO-6727, PRO-6728, PRO-7152`

With this update, changes aimed at performance optimization were applied to the following CHQ areas:

- `chq > settings > company settings > transaction acknowledgement`
- `chq > settings > company settings > company information`
- `chq > settings > company settings > states / provinces`
- `chq > settings > company settings > postal codes`
- `chq > settings > company settings > time zones`
- `chq > settings > location settings > franchise groups`

### Updating RecModified when customer is updated from BigQuery

`Build 6.38.153.0: PRO-11590`

When a customer attribute is changed in BigQuery, and that change is pulled to CHQ database, the **RecModified** value for the respective customer record is now updated.

### European fiscal compliance – Sweden: Updated Software Version and Model Name sent to INRASEC

`Build 6.38.153.0: DS-3463`

As of version 6.38.153.0, we’ve updated the **SW Model** and **SW Version** values sent from CHQ to INFRASEC when registering a new device:

- **SW Model**: Teamwork POS Pro SE
- **SW Version**: 6.X (where "X" is the app major version number)

This change is required to ensure compliance with fiscalization requirements.

### European fiscal compliance – Sweden: Updated root certificates for fiscal servers

`Build 6.38.153.0: PRO-10987`

At the database level, separate root certificates are now used for test and production fiscal servers.

{{% notice note %}}
In CHQ, it’s possible to define if the integrated fiscal server is test or production by configuring the **fiscal server type** setting under `settings > company settings > country > [Sweden record] – fiscal settings > fiscal > the infrasec section`.
{{% /notice %}}

### European fiscal compliance – Sweden: Updated POS software model name

`Build 6.38.153.0: DS-3399`

For store locations in Sweden, at the database level, we’ve updated the POS software model name to be displayed as **Teamwork POS Pro SE 6.X** across all devices. This change is required to ensure compliance with fiscalization requirements.

### JSON-based Digital Assets Echo Export API: New SnapshotNo filter added

`Build 6.38.153.0: DS-3435`

As of version 6.38.153.0, we’ve enhanced the JSON-based Digital Asset Echo Export API with the **SnapshotNo** filter that supports the following operators: `Equal` and `Contains`.

### JSON-based Location Export API: Added Open field

`Build 6.38.153.0: DS-3524`

As of version 6.38.153.0, we’ve added the **Open** field to the JSON-based Location Export API response. Possible values include `true` and `false`.

### JSON-based Employee Export API: New RoleEmployeeInfo array

`Build 6.38.153.0: DS-3735`

As of version 6.38.153.0, we’ve extended JSON-based Employee Export API with the **RoleEmployeeInfo** array. The array allows for exporting employee role name(s) and description(s) of the latter.

### Performance optimization

`Build 6.38.153.0: DS-3714`

At the database level, we've introduced updates to prevent performance issues in `sales > order management` area of CHQ.

Additionally, improvements were made to maintain optimal performance of echo digital assets export and customer search in POS PRO.

### Validating the bundle ID for the mobile applications

`Build 6.38.157.0: PRO-12310`

We’ve validated the bundle ID for the mobile applications by the following pattern: `com.teamworkcommerce.[app name][app generation number]-[major and minor version numbers]` for version 6 applications, for example `com.teamworkcommerce.POS6-38`.
{{% notice info %}}
Bundle ID uniquely identifies an application in Apple’s ecosystem.
{{% /notice %}}

Also, at the database level, we’ve added a new **ActualBundleId** field. The **ActualBundleId** field determines the actual bundle identificator of a device.

### JSON-based Count Memo Scan Import API: New AllowNegativeScanQty setting

`Build 6.38.157.0: DS-3822`

We’ve extended JSON-based Count Memo Scan Import API with a new **AllowNegativeScanQty** setting.

When the **AllowNegativeScanQty** setting is set to `true`, it is possible to import negative item quantities for a Count Memo (for example, `-10`).

### JSON-based Count Memo Scan Import API: Completed testing of the AllowNegativeScanQty setting

`Build 6.38.162.0: DS-4115`

We’ve completed testing of JSON-based Count Memo Scan Import API with the new **AllowNegativeScanQty** setting set to `true`.

When the **AllowNegativeScanQty** setting is set to `true`, importing both positive and negative quantities is allowed; however, zero, in this case, is not permitted.

Importing negative quantities can be helpful to perform daily adjustments.

## Issue resolutions

### ASN: Incorrect user name in the last modified by field

`Build 6.38.98.0: DS-2858`

**Issue**  
Under `chq > purchasing > ASNs > list > [selected ASN] > view > user info`, incorrect user name would display in the **last modified by** field after the following was done:

1. User 1 imported an ASN.
2. User 2 archived the imported ASN by clicking the **archive** button under `chq > purchasing > ASNs > list > [selected ASN]`.

**Resolution**  
The issue has been fixed. Now, under the conditions described above, the **last modified by** field shows the name of User 2 who archived the ASN.

### Multiple appeasements created for the same order

`Build 6.38.98.0: DS-2718`

We've fixed the issue where after creating an Appease Memo for the item on Sales Receipt, two new appeasement receipts would occasionally be created. Also, only one of these receipts would be refunded in Adyen.

### Transfer Order stuck in edit mode

`Build 6.38.98.0: DS-2779`

**Issue**  
Prior to 6.38.98.0, on trying to open a Transfer Order, users would sometimes get the `transfer order [number] is being edited by another user` error even if the Transfer Order was already in the `released` status.

**Resolution**  
The issue has been fixed. Now, if a Transfer Order has been released, users can open and view that Transfer Order without any issues.

### JSON-based Sales Order History Export API: No data returned with the SellToEmail filter configured

`Build 6.38.98.0: DS-2853`

We've fixed the issue where export via JSON-based Sales Order History API with the **SellToEmail** filter configured could return no data.

### Ship Memo deposit capture issue

`Build 6.38.98.0: PRO-8957`

At the backend, we've introduced updates that allow for preventing situations when one Ship Memo could occasionally use deposit captured for another Ship Memo.

### Sales Receipt: Missing information on SeasonId and SeasonName for items

`Build 6.38.98.0: DS-2993`

We've fixed the issue where information on **SeasonId** and **SeasonName** could occasionally be missing for the Sales Receipt items at the database level.

### Payment details missing in Sales Orders

`Build 6.38.98.0: DS-2916`

We've fixed the issue where Sales Orders сould occasionally be imported in CHQ without payment method details.

### Multiple requests to Mandrill to send the same email

`Build 6.38.98.0: DS-2964`

We’ve fixed the issue where multiple requests were created to send the same email via Mandrill.

### Complete Ship Memo task failure

`Build 6.38.98.0: DS-2957`

We've fixed the issue where the *Complete Ship Memo* task would occasionally fail with an error message under `chq > settings > server tasks > tasks`.

### Items not calculated as held for RTA

`Build 6.38.98.0: DS-3003`

**Issue**  
Prior to 6.38.98.0, items added to Sales Receipts that were put on hold in POS PRO, would not be included in the **held** column in the item's **location availability** table (`chq > inventory > styles & items > [selected item] > check qty`). Thus, the item quantity would not be substracted from RTA for this item.

**Resolution**  
The issue has been fixed. Now, the item quantity is correctly calculated for RTA and **held** column in the item's **location availability** is correctly populated.

### Transfer Orders list view: Incorrect rejected qty value

`Build 6.38.98.0: PRO-2565`

**Issue**  
Under `inventory > transfer orders > list`, the **rejected qty** column would sometimes show `0` for Transfer Orders that included rejected items.

Also, the **reject reason** column in such Transfer Orders would show no value even if the reject reason was specified by the source location.

**Resolution**  
The issue has been fixed. Now, the **rejected qty** column in the Transfer Orders list view shows correct values, and the **reject reason** column stays populated.

### LRP: Coupon reward not emailed to customers

`Build 6.38.121.0: DS-3074`

Prior to version 6.38.121.0, customers that participated in the Loyalty Reward Program (LRP) and fulfilled the conditions of the respective program would not be emailed with a coupon as their reward.

The issue has been fixed. Now, the customers that fulfilled the conditions of the program receive their coupons via email as expected.

### Inability to access payment processing logs

`Build 6.38.121.0: DS-2880`

We've fixed the issue where accessing the **payment processing logs** area under `settings > server tasks > payment processing logs` сould occasionally fail with the `Problem has occurred. Please contact support team to fix the problem` error message.

### Multiple Sales Receipts created for one order

`Build 6.38.121.0: DS-3006`

We've fixed the issue where multiple Sales Receipts could occasionally be generated for a Sales Order with only one line item and, respectively, one Ship Memo.

### The Add Z Report Info Task Handler job error

`Build 6.38.121.0: DS-3076`

We've fixed the issue where the *Add Z Report Info Task Handler* job would not be performed, resulting in no new Z reports created.

### Item(s) total incorrectly populated on creating appease memos

`Build 6.38.121.0: DS-3046`

**Issue**  
Prior to version 6.38.121.0, on creating a new appease memo for several items selected from a Sales Receipt under `chq > sales > sales receipt > [selected sales receipt] > items > create appease memo`, the **item(s) total** field would include the price of only one item instead of total for all the selected items. Accordingly, it was impossible to set the right discount amount. 

However, the **refund amount** field would be populated correctly, showing the summed price of all items in the receipt.

**Resolution**  
The issue has been fixed. Now,  the **item(s) total** field is correctly populated and displays the summed price of the items from the Sales Receipt.

### Coupons are not generated

`Build 6.38.131.0: DS-3115`

We've fixed the issue where coupons could fail to generate for eligible customers according to the active loyalty reward program.

### JSON-based Sales Order History API: Error when SellCreditLocation and SellToEmail filters are defined

`Build 6.38.131.0: DS-3085`

We've fixed the issue where JSON-based Sales Order History API could return an error when both the **SellCreditLocation** and **SellToEmail** filters were configured in the request.

### Sales Order: Payment is not captured in full

`Build 6.38.131.0: DS-3131`

Prior to version 6.38.131.0, when an order was split into several shipments, the payment was sometimes captured only for the first shipment. That happened under the following conditions:

- the order included 3 item units that were shipped separately from different fill locations
- payment was done via Klarna payment method with Adyen
- a return was initiated for one item unit

The issue has been fixed. Now, payment for the order is captured in full as expected.

### JSON-based Secure Customer Export API: Incorrect data type returned

`Build 6.38.131.0: DS-3090`

We've fixed the issue where JSON-based Secure Customer Export API would incorrectly return **CustomLookup1**, **CustomLookup2**, and **CustomLookup5** as objects instead of string values.

### RMA Orders: RecModified is changed when the Order was not modified

`Build 6.38.131.0: DS-3153`

We’ve fixed the issue where RMA Orders could sometimes change the **RecModified** value when no data changes were made to the respective RMA Order.

Now, the **RecModified** value is changed only if any data modifications take place to the respective RMA Order.

### JSON-based RMA Worksheet Export API: New setting

`Build 6.38.131.0: DS-3133`

We've extended JSON-based RMA Worksheet Export API with **SalesReceiptIdentifierSetting**.

The following values are supported:

- `DTN`
- `ReceiptNo`
- `ExternalId`

The new setting allows for retrieving a Return Merchandise Authorization (RMA) Worksheet by referencing the associated Sales Receipt.

### JSON-based Sales Order History Export API: SellCreditLocation filter failed to work properly

`Build 6.38.145.0: DS-3192`

We’ve fixed the issue where the **SellCreditLocation** filter didn’t filter by the selected location during the JSON-based Sales Order History Export API call.

### JSON-based Digital Assets Echo Export API: Timeouts when applying the StyleIdentifier filter

`Build 6.38.145.0: DS-3203`

We’ve fixed the issue where JSON-based Digital Assets Echo Export API call could occasionally fail with the `Execution Timeout Expired` error when the **StyleIdentifier** filter was applied.

### JSON-based Sales Order Export API: Duplicate status issue

`Build 6.38.145.0: DS-3246`

Prior to 6.38.145.0, two similar statuses (`Held` and `Hold`) were available in the JSON-based Sales Order Export API.

The issue has been fixed. Now, only the `Hold` status is available in the API scheme.

### Invalid date format is treated as an unhandled exception in export API requests

`Build 6.38.145.0: DS-3172`

Prior to version 6.38.145.0, when an export API request had a date specified in the incorrect format, the system couldn’t recognize the error in formatting. This resulted in the `Service Unavailable` error.

Now, if a date has an invalid format in the API request, the following response is returned: `An error has occurred. Conversion failed when converting date and/or time from character string`.

### JSON-based Digital Assets Echo API: Imported digital assets fail to appear in CHQ

`Build 6.38.145.0: DS-3257`

**Issue**  
When importing multiple digital assets in one JSON-based Digital Assets Echo API request, and one of the assets included invalid information specified – for example, the associated item wasn’t found in CHQ – *all* the imported assets from the request would fail to appear in CHQ.

**Resolution**  
The issue has been fixed. Now, if some of the digital assets in the request have invalid information specified, those assets do not appear in CHQ UI upon import and cannot be exported. All correctly configured assets are successfully imported to CHQ.

### JSON-based Digital Assets Echo Export API error

`Build 6.38.153.0: DS-3320`

We’ve fixed the issue where calls to the asynchronous JSON-based Digital Assets Echo Export API would occasionally fail with the `An error has occurred` error message returned.

### Sales Orders from WeChat fail to import

`Build 6.38.153.0: DS-3334`

We’ve fixed the issue where Sales Orders passed from the WeChat platform sometimes couldn’t be imported in CHQ.

### Sweden fiscalization: Wrong address used for new device registration

`Build 6.38.153.0: DS-3499`

**Issue**  
Prior to 6.38.153.0, when registering a new device with Infrasec, the company information (**address 1**, **postcode** and **city**) would incorrectly be used as the cash register address instead of the respective location-level information.

**Resolution**  
The issue has been fixed. Now, the location-level information (**address 1**, **postcode** and **city**) is used as the cash register address when registering a new device with Infrasec.

### Item prices not synchronized between CHQ servers

`Build 6.38.153.0: DS-3471`

**Issue**  
Prior to 6.38.153.0, the item prices would not be synchronized between CHQ servers. This happened due to the big size of documents (12–16 MB each), where the maximum allowed size is 10 MB.

**Resolution**  
The issue has been fixed. Now, CHQ supports a larger size of documents when synchronizing between CHQ servers.

### JSON-based Sales Receipt Export API: Missing ActualReturnLocationIdentifier

`Build 6.38.153.0: DS-3329`

We’ve fixed the issue where the **ActualReturnLocationIdentifier** attribute would be missing in the JSON-based Sales Receipt Export API response.

### Duplicate Sales Receipt against a Sales Order

`Build 6.38.153.0: DS-3727`

We’ve fixed the issue where a duplicate Sales Receipt was occasionally created against a Sales Order.

### Workstations not displaying in V4 Drawer Memo app

`Build 6.38.157.0: DS-3921`

**Issue**  
In V4.93.37 Drawer Memo app, after app initialization was completed, available workstations failed to appear in the **Select Workstation** dialog.

**Resolution**  
The issue has been fixed. Now, workstations configured in CHQ are available for selection in the Drawer Memo app as expected.

### Payment methods not visible in V4.93 POS

`Build 6.38.157.0: DS-3920`

We’ve fixed the issue where, in V4.93.411 POS initialized to V6.38 CHQ, active payment methods failed to appear under `Sales Receipt > Payment`.

### Sales Orders import failure

`Build 6.38.157.0: DS-3873`

We’ve fixed the issue where multiple Sales Orders could not be imported into CHQ due to an error in the *AutoApproveSalesOrders* task. The issue occurred because, in one of the orders, the **First Name** value in the **ship-to address** exceeded the allowed value length.  

### JSON-based Secure Customer Export API: Incorrect value returned in CountryIdentifier

`Build 6.38.162.0: DS-4115`

**Issue**  
Prior to 6.38.162.0, when executing the JSON-based Secure Customer Export API call with the **CountryIdentifierSetting** set to `Code`, the **CountryIdentifier** value in the API response occasionally didn’t match the value defined for the customer in the **country** field under `chq > sales > customers > [selected customer] > ship to > [selected ship to address] > edit`.

**Resolution**  
The issue has been fixed. Now, the **CountryIdentifier** value in the API response matches the value from CHQ as expected.

<br>

[DOWNLOAD PDF](https://storage.googleapis.com/twc-pedia-prod-bucket/pdf/relguides/CHQ%20Release%20Guide%20Version%206.38.162.0.pdf)
