---
title: "Version 6.39"
date: 2022-03-14T17:42:20+02:00
draft: false
weight: 92
---

[DOWNLOAD PDF](https://storage.googleapis.com/twc-pedia-prod-bucket/pdf/relguides/CHQ%20Release%20Guide%20Version%206.39.131.0.pdf)

## Sales

### OMS: Asynchronous Ship Memo creation

`Build 6.39.100.0: PRO-9665`

As of version 6.39.100.0 of the software, the process that creates Ship Memos under `chq > sales > order management > list > create SM`, is run asynchronously.

#### Purpose

This optimization aims at improving user experience: the respective CHQ area is no longer blocked when the user tries to create Ship Memos for a large number of Sales Orders and some of those orders do not meet the criteria for Ship Memo creation (for details, see the *Creation of Ship Memos* section below).

Additionally, as a part of this update, we’ve removed the print options when creating Ship Memos from Order Management list view.

#### Creation of Ship Memos

On clicking **create SM** under `chq > sales > order management > list > create SM`, the system now checks if the following conditions are respected:

- the payment due is less than or equals the credit card authorized amount
- the Sales Order status is `accepted`
- there are items in the `accepted` status
- a fill location is defined for all items in the `accepted` status
- `ship partial` is selected or there are no items in the `suspended` status.

If Ship Memo *cannot* be created for *all* selected Sales Orders, then the following error message displays:
{{% gimg src="V6.39 CHQ Release Guide/639_chq_SM1.png" title="Creation of Ship Memos" width="300px"%}}

If Ship Memo *cannot* be created for *some* of the selected Sales Orders, then the following error message displays:
{{% gimg src="V6.39 CHQ Release Guide/639_chq_SM2.png" title="Creation of Ship Memos" width="300px"%}}

If Ship Memo *can* be created for all selected Sales Orders and the **show confirmation when "create SM" in sales order list** checkbox is selected in CHQ, the following message displays:
{{% gimg src="V6.39 CHQ Release Guide/639_chq_SM3.png" title="Creation of Ship Memos" width="300px"%}}
{{% notice note %}}
In CHQ, go to `settings > order management > customer orders` to configure the **show confirmation when "create SM" in sales order list** setting.
{{% /notice %}}

#### See also

[Cloud HQ User Manual - Sales & eCommerce](https://twdocs.netlify.app/userdoc/chq/manuals/ "CHQ Manual Version 6")

### New "buy at least X, get discount" promotion type

`Build 6.39.100.0: PRO-10001`

As of version 6.39.100.0, we've introduced a new promotion type - "buy (at least) X, get discount".

{{% notice note %}}
Please be advised that as a part of this update, the existing *"buy X, get discount"* promotion has been renamed to *"buy multiples of X, get discount"*.
{{% /notice %}}

#### Purpose

This update aims at extending our existing promotion engine logic with the capability to apply the promotion when the customer purchases the minimum number of items defined for this promotion.

Users can configure if the discount for this promotion is a percentage (%) or amount($):

- The percentage discount is applied to all items that qualify for the promotion. For example, if the customer buys 4 items, the discount applies to all the four items, regardless of how many additional items were purchased.
- The amount discount is applied without amount changes. For example, if the promotion is “Buy at least 2, Get $10 Off”, the customer will receive $10 off regardless of how many additional items were purchased.

To understand the difference between "Buy (at least) X, get discount" and "Buy multiples of X, get discount", let’s review the case when the customer wants to buy 9 items and there are the following discounts:

1. *"Buy Multiples of 5, get discount"*: this promotion will be applied once to the **set of 5 items**, as the remaining set of 4 doesn’t meet the requirement specified in the promo. This promotion is applied only to those items that fulfill the requirement.
2. *"Buy (at least) 5, get discount"*: the discount will be applied to all the 9 items as the requirement to buy at least 5 is met. The promotion is applied to all the items once the requirement is met.

#### Creating a new promotion

1. In CHQ, go to `sales > promotion engine > new`.
2. In the **promotion type** field, select `buy (at least) X, get discount` and click **ok**:  
{{% gimg src="V6.39 CHQ Release Guide/639_chq_promotion1.jpg" title="Selecting a new promotion type" width="400px"%}}
3. In the dialog that opens, fill in the required fields:  
{{% gimg src="V6.39 CHQ Release Guide/639_chq_promotion2.jpg" title="Creating a new promotion type" width="600px"%}}

- **promotion name**
- **and get discount**: select `amount` or `percent`
- **rank**

4. On the **options** tab, select the additional conditions for your promotion application if needed:  
{{% gimg src="V6.39 CHQ Release Guide/639_chq_promotion3.jpg" title="Creating a new promotion type" width="600px"%}}
5. **Save** your changes.

#### See also

- [V6.39 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.39_mobile_rel_guide/)
- [Cloud HQ User Manual - Sales & eCommerce](https://twdocs.netlify.app/userdoc/chq/manuals/ "CHQ Manual Version 6")

### Virtual Gift Card delivery updates

`Build 6.39.100.0: PRO-8223, PRO-8353`

As of version 6.39.100.0, we've introduced updates to the Gift Card delivery functionality in CHQ. In particular, with this update:

- rearranged and renamed the existing settings in the **gift card** dialog
- renamed one of the Gift Card related transactional email types.

The update aims at improving user experience when configuring Gift Card delivery settings.

#### Updates in the gift card dialog

In CHQ, under `sales > gift cards > [your Gift Card] > delivery`, the following updates were made:  
{{% gimg src="V6.39 CHQ Release Guide/639_chq_GC1.jpg" title="Updated delivery tab of the gift card dialog" width="600px"%}}

1. The existing settings have been regrouped into the following sections:

- **virtual gift card delivery**
- **virtual gift card delivery confirmation**
- **details**
- **gift message**

2. In the **virtual gift card delivery** section:

- **giftee email** has been renamed to **send gift card to email**
- **giftee name** has been renamed to **send gift card to name**
- **giftee email status** has been renamed to **delivery email status**

3. In the **virtual gift card delivery confirmation** section:

- **buyer email** has been renamed to **send notification to email**
- **buyer name** has been renamed to **send notification to name**
- **send confirmation to buyer** has been renamed to **send notification**

#### Updates in the transactional email types

In CHQ, under `settings > company settings > transaction emailing`, the existing "virtual gift card delivery to giftee" email type has been renamed to "virtual gift card delivery".

#### See also

- [Virtual Gift Card delivery in CHQ Release Guide V6.34](https://twdocs.netlify.app/userdoc/chq/relguides/6.35_chq_relguide/#virtual-gift-card-delivery)
- [Cloud HQ User Manual - Sales & eCommerce](https://twdocs.netlify.app/userdoc/chq/manuals/ "CHQ Manual Version 6")

## Purchasing

### Support of custom fields added for Purchase Order import

`Build 6.39.100.0: PRO-10305`

The following fields are now supported for import of a Purchase Order (PO) via CHQ UI:

- custom text 1-4
- custom date 1-4
- custom number 1-4
- custom decimal 1-4
- custom flag 1-4
- custom lookup 1-8

{{% notice note %}}
In CHQ, to create a new PO import, go to `purchasing > purchase orders > import > new`.
{{% /notice %}}

The imported fields are then available under `chq > purchasing > purchase orders > [your PO] > general > the custom section`.

#### New columns in the PO import template

Respectively, the following columns have been added to the PO import template:

Columns  | Value |
:---------- | :----------- |
custom text 1–4 |If the value is more than 256 characters, in the PO, the text is truncated |
custom date 1–4 |Possible values range from `01/01/1753` to `12/31/9999`. If the value is not in the date format, error displays |
custom number 1–4 |Possible values range from `-1000000` to `1000000`. Only integers are allowed |
custom decimal 1–4 |Possible values range from `-1000000` to `1000000`. Only decimals are allowed |
custom flag 1–4 |For the respective checkbox to be selected in the PO, the value should be one of the following: `1`, `TRUE`, `YES` or `Y` |
custom lookup 1–8 |The value should be one of the available options in the respective dictionary. If the value is not present in the dictionary, error displays |

#### See also

[Cloud HQ User Manual: Purchasing](https://twdocs.netlify.app/userdoc/chq/manuals/ "CHQ Manual Version 6")

## Services

### Configuring a password for the RT Printer

`Build 6.39.100.0: PRO-5520`

As of version 6.39.100.0, we've extended the settings to allow indicating a password for the RT printer in CHQ.

{{% notice tip %}}
The RT printer is a fiscal printer that sends data to fiscal authorities in Italy. Its usage is mandatory to be compliant with Italian fiscal regulations. The RT printer password is provided by the manufacturer.
{{% /notice %}}

#### Purpose

With this update, the user can now add a password for the RT printer in CHQ. Once the password is configured, the user can control and enable various functions in the RT Printer.

Also, using the password aims at increasing security on the devices.

#### How to configure

1. In CHQ, go to `services > device controller`.
2. Find your device and click it.
3. In the **edit device** dialog that opens, go to the **app settings** tab.
4. Under the **fiscal device** section, in the **device type** field, choose the required RT device.  
Selecting **[your RT device]** enables the following new fields for configuration:

Setting  | Description | Value |
:---------- | :----------- | :---------- |
**internal memory password** |the password used to allow POS to log into the RT printer. This provides POS access to the printer's internal functions and memory (journal). This password is also necessary when reprinting a receipt.|Values can range from 8 to 40 characters – letters and numbers only. Empty by default.|
**URL authentication username**|URL authentication credentials (username and password) are used to Implement an extra layer of security for the API calls (i.e., URL authentication). The username should not contain white spaces.|Values can range from 3 to 64 characters – letters and numbers only. Empty by default.|
**URL authentication password**|URL authentication credentials (username and password) are used to Implement an extra layer of security for the API calls (i.e., URL authentication).|Required if **URL authentication username** is defined. Values can range from 8 to 64 characters – letters and numbers only|

{{% gimg src="V6.39 CHQ Release Guide/639_chq_rtprinter1.jpg" title="New settings for the RT printer" width="600px"%}}
5. **Save** the changes.
{{% notice note %}}
Please note that changes in the **fiscal device** section made at the CHQ side are automatically synchronized with the POS Pro device and vice versa.
{{% /notice %}}

#### See also

[V6.39 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.39_mobile_rel_guide/)

## Settings

### Enabling automated detached payment check

`Build 6.39.100.0: PRO-9503`

We've introduced the capability to enable/disable the automated detached payment check in POS PRO V6. This applies to checks performed for finalized Sales Receipts and during the End-of-Day process.

#### Purpose

Detached payment is an extra payment or a duplicate payment that is not attached to a receipt payment record (Sales Receipt).

Detached payments can be caused by an application crash, losing connectivity with the terminal, canceling the transaction, or a slow response from the payment processor (for example, Adyen).

In POS PRO, the automated detached payment check is performed in the following cases:

- application crash recovery
- payment timeouts or user cancellation
- Sales Receipt finalization
- End-of-Day (EOD)

In CHQ, it has become possible to turn on/off the payment check only for the Sales Receipt finalization and Drawer Memo End-of-Day scenarios.

Users cannot turn off automatic payment checks for app crash recovery and payment timeout or user cancellation.

{{% notice note %}}
This process applies to the following payment types:

- credit card
- Gift Card (Teamwork, Givex, Fortress)
- Credit Memo
{{% /notice %}}

#### How to configure

1. In CHQ, go to `settings > sales > payment processing`.
2. In the new **general** section above the page, make sure that the following settings are selected:
{{% gimg src="V6.39 CHQ Release Guide/639_chq_detached1.jpg" title="Enabling automated detached payment check" width="800px"%}}

- **automatically perform payment check - post sale finalization**: if the checkbox is selected (set by default), on finalizing a sale, POS PRO checks for detached payments and, if found, suggests auto-voiding.
- **automatically perform payment check - end of day**: if the checkbox is selected (set by default), on launching the drawer memo end-of-day process, POS PRO checks for detached payments and, if found, suggests auto-voiding.

3. **Save** your changes.

#### See also

- [V6.39 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.39_mobile_rel_guide/)
- [Cloud HQ User Manual: Settings](https://twdocs.netlify.app/userdoc/chq/manuals/ "CHQ Manual Version 6")

### Renamed setting for different verification login for SOD/EOD

`Build 6.39.100.0: PRO-9474`

As of version 6.39.100.0, we've renamed the **require verification login for start/end of day** setting to **require different verification login for start/end of day**.

The old label of the setting did not correctly describe that the verification user login must be different from that of the currently logged in user.

{{% notice note %}}
The **require different verification login for start/end of day** setting is available in the **drawer memo** section under `chq > settings > location settings > locations/location settings > general settings`.
{{% /notice %}}

{{% gimg src="V6.39 CHQ Release Guide/639_chq_verif1.jpg" title="Renamed setting for different verification login for SOD/EOD" width="600px"%}}

#### See also

- [V6.39 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.39_mobile_rel_guide/)
- [Cloud HQ User Manual: Settings](https://twdocs.netlify.app/userdoc/chq/manuals/ "CHQ Manual Version 6")

### Configuring price and quantity limits for Open Returns

`Build 6.39.100.0: PRO-9838`

We've introduced the capability to limit the item price and quantity for Open Returns.

#### Purpose

With an open return, a user could define a price that greatly exceeds the price of the item, returning both the sale price and extra cash to the customer.

Another way that users can commit fraud is to take an open return for the sale price, but change the quantity returned, also giving the customer additional cash.

By defining the maximum percent over the sale price and/or the maximum quantity on Open Returns, the user is limited in the amount of cash they can give to the customer.

#### How to configure

1. In CHQ, go to `settings > location settings > locations / location settings`.
2. Click to select your location record and then click **edit**.
3. In the dialog that opens, go to the **sales** tab.
4. Scroll down to the bottom of the **sales** section to configure the following new settings:
{{% gimg src="V6.39 CHQ Release Guide/639_chq_sales1.jpg" title="Configuring price and quantity limits for Open Returns" width="450px"%}}

- **maximum open return value (%)**: indicates the % over the original price of the return item that is allowed for an open return item. Values range from `0` to `999`. Empty by default. If empty, indicates no restrictions in POS PRO.  
For example: The item’s original price is $100.00. The setting is 10%. Thus, the user may define a maximum current price of $110.00.
- **maximum open return quantity**: indicates the maximum quantity for an open return item. Values range from `0` to `99999`. Empty by default. If empty, indicates no restrictions in POS PRO.  
For example: If the setting is `4`, the user may not enter a quantity greater than `-4`.

5. Click **save**.

#### See also

- [V6.39 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.39_mobile_rel_guide/)
- [Cloud HQ User Manual: Settings](https://twdocs.netlify.app/userdoc/chq/manuals/ "CHQ Manual Version 6")

### Renamed web order guest checkout – link to registered customer

`Build 6.39.100.0: PRO-8994`

Starting from version 6.39.100.0, we've renamed the **web order guest checkout - link to registered customer** section to **guest checkout - link to registered customer**.

This section settings allow for linking imported Sales Receipts to personal information records of registered customers.

{{% notice note %}}
To access the **guest checkout - link to registered customer** section, in CHQ go to `settings > customer > customer settings`.
{{% /notice %}}

#### See also

- [Linking a customer’s temporary account to the registered account in CHQ Release Guide V6.33](https://twdocs.netlify.app/userdoc/chq/relguides/6.33_chq_relguide/#linking-a-customers-temporary-account-to-the-registered-account)
- [Cloud HQ User Manual: Settings](https://twdocs.netlify.app/userdoc/chq/manuals/ "CHQ Manual Version 6")

### Configuring location visibility for various operation reasons

`Build 6.39.100.0: PRO-9369`

We've added the capability to define the visibility of operation reasons (for example, adjustment or transfer reasons) by locations.

Also, as a part of this update, we've added multi-language support to the customer's titles. Once configured, translation becomes available in POS PRO.

#### Purpose

This update allows for the user to configure which reason records should be visible for the selected locations.

The configuration is available using the **visibility** button in the respective CHQ area:

- `chq > settings > inventory/catalog > adjustment reasons`
- `chq > settings > inventory/catalog > adjustment hold reasons`
- `chq > settings > inventory/catalog > reserve reasons`
- `chq > settings > customer > titles`
- `chq > settings > sales > reprint reasons`
- `chq > settings > sales > hold reasons`
- `chq > settings > order management > shipment reject reasons`
- `chq > settings > drawer management > cash management reasons`
- `chq > settings > drawer management > drawer opening reasons`
- `chq > settings > purchasing > hold reasons`
- `chq > settings > transfers > transfer reasons`
- `chq > settings > transfers > hold reasons`

#### How to configure visibility for adjustment reasons

1. In CHQ, go to `settings > inventory/catalog > adjustment reasons`.
2. Click to select your record and then click **visibility** above the grid:
{{% gimg src="V6.39 CHQ Release Guide/639_chq_visibility1.jpg" title="The visibility button in the adjustment reasons area" width="700px"%}}
3. In the dialog that opens, use the **search** field at the top to find the required location. Then, in the **selected** column, select the checkbox next to those locations for which your adjustment reason should be visible ({{% inum "A" %}} in the screenshot below):
{{% gimg src="V6.39 CHQ Release Guide/639_chq_visibility2.jpg" title="Selecting a location for which your reason should be visible" width="500px"%}}
Alternatively, click **select all** to make your adjustment reason visible in all the locations.
4. **Save** your changes.

#### How to add translations to the customer's titles

1. In CHQ, go to `settings > customer > titles`.
2. In the **titles** area, click to select your record and then click **edit**.
3. To add multiple translations, click the *globe* icon.
{{% gimg src="V6.39 CHQ Release Guide/639_chq_visibility3.jpg" title="How to add translations to the customer's titles" width="300px"%}}
On tapping the icon, the **description: [default field name]** dialog opens.
4. In the dialog, enter the required translation.
5. **Save** your changes.
{{% notice tip %}}
Please be advised that if no translation is defined in CHQ for the language that is used for the user interface in POS PRO, default field labels and values display in POS.
{{% /notice %}}

#### See also

- [V6.39 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.39_mobile_rel_guide/)
- [Cloud HQ User Manual: Settings](https://twdocs.netlify.app/userdoc/chq/manuals/ "CHQ Manual Version 6")

### Configuring auto-lock for POS PRO

`Build 6.39.100.0: PRO-9666`

To respect the changes made in POS PRO version 6 related to automatic and manual screen locking, we’ve added a new setting and new security right in CHQ.

Also, as a part of this update, under `chq > settings > location settings > locations / location settings > [selected location] > edit > general settings` the following sections have been renamed as they are related to Version 4 POS only:

- **sales auto logout** has been renamed to **sales auto logout (V4)**
- **shipments auto logout** has been renamed to **shipments auto logout (V4)**

#### Purpose

Screen locking allows users to protect their data in POS PRO – for example, an open transaction – when there’s a need to put down the device for some time. To unlock the screen, the user is required to enter their credentials. Only the user who locked the screen or a manager/user with the Lock screen (override) security right (see the description below) can log in.

#### New security right

We’ve added a new security right – **Lock screen (override)**:

Area | Right | Description |
:----------- |:----------- |:----------- |
General | Lock screen (override) | Allows access to another user's locked session |

This new security Right allows the user to log in to another user's locked session.

#### How to configure auto-lock

1. In CHQ, go to `settings > location settings > locations / location settings`.
2. Click to select your location record and then click **edit**.
3. In the dialog that opens, go to the **general settings** tab.
4. In the **general** section, in the new **seconds before auto-lock (V6)** field, enter a value from `0` to `99999` to autolock POS PRO V6 after the defined amount of seconds of inactivity anywhere within the app. The field is empty by default:
{{% gimg src="V6.39 CHQ Release Guide/639_chq_autoloc1.jpg" title="Configuring auto-lock for POS PRO" width="500px"%}}
5. **Save** your changes.

#### See also

- [V6.39 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.39_mobile_rel_guide/)
- [Cloud HQ User Manual: Settings](https://twdocs.netlify.app/userdoc/chq/manuals/ "CHQ Manual Version 6")

### Configuring the auto-logout in CHQ

`Build 6.39.100.0: PRO-10095`

We've added a new auto-logout functionality in CHQ to enhance security.

With this update, the logout will be performed automatically if the user stays inactive for some period of time.

#### How to configure

1. In CHQ, go to `settings > security settings`.
2. In the new **minutes before auto logout if CHQ user is idle** setting, enter the value from `0` to `100000`. `0` is set by default:
{{% gimg src="V6.39 CHQ Release Guide/639_chq_security1.jpg" title="Configuring the auto-logout in CHQ" width="700px"%}}
{{% notice note %}}
Please note that the user must have the **Add/Edit Security Settings CHQ** security right to perform this configuration.
{{% /notice %}}
3. **Save** your changes.

#### See also

[Cloud HQ User Manual: Settings](https://twdocs.netlify.app/userdoc/chq/manuals/ "CHQ Manual Version 6")

### Gift Card balance transfer: removed setting

`Build 6.39.100.0: PRO-10040`

As of version 6.39.100.0, we've introduced updates to the Gift Card transfer process.

Now, when transferring the balance from one Teamwork Gift Card to the other, the inventory quantity of the gift card stock item for the selected Gift Card is decreased.

This resulted in removing the **balance transfer - qty adjustment PLU** setting previously available in CHQ under `settings > company settings > credit & reward platform > fiscal zones > new/edit > the gift cards tab`.

#### See also

[Cloud HQ User Manual: Settings](https://twdocs.netlify.app/userdoc/chq/manuals/ "CHQ Manual Version 6")

### Managing transfer discrepancy reasons

`Build 6.39.100.0: PRO-10067`

As of version 6.39.100.0, we've added the capability to manage Transfer Memo discrepancy reasons in CHQ.

Also, as a part of this update, we've added the capability to post Transfers In for “In Transit” Transfer Memos from CHQ as well as create supplemental (corrective) transfers for posted Transfers In.

#### Purpose

This update aims at avoiding the problem of discrepancies between transfer senders and receivers and having better stock management. This helps validate the quantities when there is a discrepancy, for example, when there is a case of loss during transportation between 2 stores.

#### How to access the transfer discrepancy reasons area

The new **transfer discrepancy reasons** area is available under `chq > settings > transfers > transfer discrepancy reasons`.

To find a specific record, use the **search field** ({{% inum "A" %}} in the screenshot) at the top-right.

By clicking **filter** above the grid ({{% inum "B" %}}), you can filter the records by the **active/inactive** status.
{{% gimg src="V6.39 CHQ Release Guide/639_chq_tdr1.jpg" title="The transfer discrepancy reasons area in CHQ" width="800px"%}}

Additionally, above the table the following buttons are available:

- **new**: allows for adding a new transfer discrepancy reason record.
- **edit**: allows for modifying the existing record
- **visibility**: allows for configuring for which locations your reason record is available.

##### Creating a new transfer discrepancy reason

1. In CHQ, go to `settings > transfers > transfer discrepancy reasons`.
2. Click **new**.
3. In the dialog that opens, populate the following fields:
{{% gimg src="V6.39 CHQ Release Guide/639_chq_tdr2.jpg" title="New transfer discrepancy reason" width="400px"%}}

    - **code**: the code assigned to the reason, required
    - **description**: text description of the reason
    - **auto transfer shortage to location**: the location to which the auto transfer is performed
    - **qty status for auto transfer**: the qty status of your transfer discrepancy reason, visible when **auto transfer shortage to location** is populated
    - **list order**: the position of transfer discrepancy reasons
    - **inactive**: select the checkbox to make the reason inactive

4. **Save** your changes.

#### Posting a transfer in

In CHQ, it is now possible to post a transfer to the target location while the document is still in transit. Prior to this update, this functionality was only available via POS PRO.

To do so:

1. In CHQ, under `inventory > transfer memos > list > [selected transfer memo] > view`, click the **post transfer in** button:
{{% gimg src="V6.39 CHQ Release Guide/639_chq_tdr3.jpg" title="Posting a transfer in" width="600px"%}}
{{% notice note %}}
The **post transfer in** button active when:

- transfer memo status is `in transit`
- the user has the **Transfer Memos - Add/Edit** security right
{{% /notice %}}

On clicking **post transfer in**, the following dialog opens:
{{% gimg src="V6.39 CHQ Release Guide/639_chq_tdr4.jpg" title="Posting a transfer in" width="400px"%}}
{{% notice note %}}
Please note that the options in the **post transfer in** dialog are not visible if "qty in" = 0 and "qty out" = 0 in all the item records of the **items** tab in the **[selected transfer memo]** dialog.
{{% /notice %}}

2. In the dialog, select your **qty in**:

- `use recorded qty in`: selected by default, not visible when "qty in" = 0 in all transfer memo item records or "qty in" = "qty out" in all transfer memo item records
- `set qty in = qty out`: selected by default when "qty in" = "qty out" in all transfer memo item records
- `set qty in = 0`: selected by default when "qty in" = 0 in all transfer memo item records.

3. Select the required **discrepancy reason**.

{{% notice note %}}
Please note that that the **discrepancy reason** field:

- is not visible when "qty in" = 0 and "qty out" = 0 in all transfer memo item records
- is not editable and empty if "set qty in = qty out" option is selected.
{{% /notice %}}

4. Then click **ok**.

Once the transfer is posted, the item will be transferred to the location indicated on the selected discrepancy reason.

#### New columns in Transfer Memo items

In CHQ, under `inventory > transfer memos > list > [selected transfer memo] view > the items tab`, we've added the following new columns to the table:

- **discrepancy reason**
- **discrepancy TM**
- **discrepancy location**

These columns are not visible by default. To add them to the table,right-click the table header and then select the columns required for display.

#### Creating a supplemental transfer

In CHQ, it is now possible to manually correct (supplement) item quantities for Transfer Memos in the "posted" status.

To do so:

1. In CHQ, under `inventory > transfer memos > list > [selected transfer memo] view > the items tab`, click the **supplemental transfer** button:
{{% gimg src="V6.39 CHQ Release Guide/639_chq_tdr6.jpg" title="Creating a supplemental transfer" width="600px"%}}
On clicking, the following dialog opens:
{{% gimg src="V6.39 CHQ Release Guide/639_chq_tdr7.jpg" title="Creating a supplemental transfer" width="400px"%}}
{{% notice note %}}
If there is an auto transfer linked to the current transfer line, then **original transfer qty** (in the **supplemental transfer** dialog) is calculated as minimum of **qty out** and **qty in**.
{{% /notice %}}

2. In the **new transfer qty** field of the **supplemental transfer** dialog enter the updated qty that was transferred.
3. Then click **supplement**.

#### See also

- [Cloud HQ User Manual: Settings](https://twdocs.netlify.app/userdoc/chq/manuals/ "CHQ Manual Version 6")
- [Cloud HQ User Manual - Inventory](https://twdocs.netlify.app/userdoc/chq/manuals/ "CHQ Manual Version 6")

### Updates in the cash payment rounding settings

`Build 6.39.100.0: PRO-8996`

As of version 6.39.100.0, we've introduced support of cash payment rounding for cash payments made in POS PRO.

This update resulted in the following changes in CHQ:

- updating the available options for **amount rounding** for currency settings
- updating the **total rounding type** options at the company level
- adding a new **cash rounding adjustment** payment method.

#### Purpose

This feature allows for rounding of the receipt total when paying with the cash payment method in POS PRO.

For example, cash payment rounding is required in Canada and Australia, where the smallest denomination of cash in circulation is 5 cents.

{{% notice note %}}
Please note that, currently, rounding is applied to base currency only and is not available for foreign currency payments in POS PRO.
{{% /notice %}}

#### Updated options for cash rounding settings

1. Under `chq > settings > company settings > currencies > [your currency] > edit`, in the **amount rounding** field:
{{% gimg src="V6.39 CHQ Release Guide/639_chq_rounding1.jpg" title="Configuring your currency record settings" width="300px"%}}

- the `nearest` option has been renamed to `nearest - bankers`(set by default). The new name better reflects the actual method used in the system.
- the `nearest` option has been added. This option uses the actual nearest method for amount rounding.
{{% notice note %}}
For company locations in Canada, it’s recommended that **amount rounding** is set to `nearest`.
{{% /notice %}}

2. Under `chq > settings > sales > sales documents`, in the **sales** section, in the **total rounding type** field:
{{% gimg src="V6.39 CHQ Release Guide/639_chq_rounding2.jpg" title="Configuring the total rounding type setting" width="700px"%}}

- the `round nearest` option has been renamed to `round nearest - bankers`(set by default).
- the `round nearest` option has been added.
{{% notice note %}}
For company locations in Canada, it’s recommended that **total rounding type** is set to `round nearest`.
{{% /notice %}}

#### New cash rounding adjustment payment method

In CHQ, a new **cash rounding adjustment** payment method is now always created on CHQ installation or upgrade to version 6.39.100.0.

This payment method is automatically used by Teamwork system in the background to store the cash rounded values associated with a particular transaction.

Additionally, this payment method is available for reporting to allow the retailer to keep track of the rounded values.

{{% notice warning %}}
Please note that **cash rounding adjustment** is not visible in the list of payment methods and cannot be created manually in CHQ. Also, this payment method is not visible in POS PRO.
{{% /notice %}}

**Cash rounding adjustment** is available for all locations by default and cannot be removed or deactivated.

#### See also

- [V6.39 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.39_mobile_rel_guide/)
- [Cloud HQ User Manual: Settings](https://twdocs.netlify.app/userdoc/chq/manuals/ "CHQ Manual Version 6")

### ShippyPro: Configuring the request for customer signature on shipment delivery

`Build 6.39.100.0: PRO-10306`

As of version 6.39.100.0, we've added the capability to configure if a request for the customer’s signature on shipment delivery should be passed from POS PRO. The request is passed to the carrier service via ShippyPro.

#### Purpose

Collecting the customer’s signature allows the retailer to confirm and keep proof of shipment delivery.

This update allows for configuring if the delivery signature should be always requested, optional to request, or never requested when processing a Ship Memo with ShippyPro.

#### How to configure

1. In CHQ, go to `settings > company settings > shipping services`.
2. Click to select ShippyPro and then click **configure methods**.
3. Click to select one of the available TW shipping methods, then click **edit**.
4. In the dialog that opens, configure the following new settings:  
{{% gimg src="V6.39 CHQ Release Guide/639_chq_sign.jpg" title="Configuring delivery signature settings" width="400px"%}}

- **require delivery signature**. The following options are available:
    - `not available`: the signature is never requested, and the **Delivery Confirmation Signature** field does not appear in POS PRO. Set by default
    - `optional`: in POS PRO, the user can choose if the signature is required by configuring the **Delivery Confirmation Signature** field
    - `required`: the signature is always requested. In POS PRO, the **Delivery Confirmation Signature** field is set to `Yes` and is not editable
- **delivery signature request code**: the request code specific to the carrier service. Valid entries are from 1 to 100 characters; letters, numbers, and special characters are permitted  
Empty by default, required if **require delivery signature**=`optional` or `required`, and if **require delivery signature threshold** is set to a non-zero value.

{{% notice warning %}}
Please note that it’s the retailer’s responsibility to ensure that a correct code for the required carrier service is entered.
{{% /notice %}}

- **require delivery signature threshold**: shipment value threshold at which the signature automatically becomes required. Possible values range from `0.01` to `9,999,999.99`, blank by default.

Please note that if the threshold is reached, the **require delivery signature threshold** setting overrides the **require delivery signature** setting.
#### See also

- [V6.39 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.39_mobile_rel_guide/)
- [Cloud HQ User Manual: Settings](https://twdocs.netlify.app/userdoc/chq/manuals/ "CHQ Manual Version 6")

### Configuring tax statuses and tax indicators for printing

`Build 6.39.100.0: PRO-9014`

We’ve introduced a number of settings that allow for additional tax-related configurations. In particular, it’s now possible to:

- define how charged tax rates are presented on the printed receipt
- set tax indicators for various tax types
- prevent users in POS PRO from changing the tax exempt status of a tax jurisdiction

#### New settings at the tax area level

In CHQ under `settings > company settings > taxes > tax areas > new/edit`, the following new fields have been added:
{{% gimg src="V6.39 CHQ Release Guide/639_chq_taxes1.jpg" title="New settings at the tax area level" width="400px"%}}

- **combine jurisdiction details for printing**: the option to print a single tax indicator on the sales receipt without a breakdown by tax jurisdiction. The field is visible only for `sales tax`. Empty by default.
{{% notice info %}}
The **combine jurisdiction details for printing** setting may be useful, for example, for stores in Canada where Harmonized Sales Tax (HST) is charged.

Technically, HST rate may cover both Goods and Services Tax (GST) and Provincial Sales Tax (PST) but the customer still pays only a total of HST. In that case, the retailer may choose not to print the tax rate breakdown by the GST and PST jurisdictions on the receipt.
{{% /notice %}}

- **tax type indicator**: the single tax type indicator printed on the receipt (see the **combine jurisdiction details for printing** setting above for details). Maximum 3 letters are allowed, empty by default. Visible only when tax type is `sales tax` and the **combine jurisdiction details for printing** checkbox is selected.  

Additionally, **combine jurisdiction details for printing** and **tax type indicator** were added as columns to the list view of tax areas under `chq > settings > company settings > taxes > tax areas`:  
{{% gimg src="V6.39 CHQ Release Guide/639_chq_taxes2.jpg" width="700px"%}}

#### New settings at the tax jusridiction level

In CHQ, under `settings > company settings > taxes > sales tax jurisdictions > new / edit`, the following new fields have been added:
{{% gimg src="V6.39 CHQ Release Guide/639_chq_taxes3.jpg" title="New settings at the tax jusridiction level" width="400px"%}}

- **disable tax exempt**: the option to prevent the user in POS PRO from marking the tax jurisdiction as tax exempt. The checkbox is empty by default
{{% notice info %}}
Users in POS PRO have the option to set a tax jurisdiction to be tax exempt on a certain transaction or an individual item. For example, if the Provincial Sales Tax (PST) jurisdiction is set to exempt, PST will not be collected either on any items from the transaction or on certain items.

If in CHQ the **disable tax exempt** checkbox is selected for a tax jurisdiction, users in POS PRO cannot configure the status of that jurisdiction.
{{% /notice %}}

- **tax type indicator**: the tax type indicator that represents the tax jurisdiction and is printed on the receipt. Maximum 3 letters are allowed, empty by default.

Additionally, **disable tax exempt** and **tax type indicator** were added as columns to the list view of sales tax jurisdictions under `chq > settings > company settings > taxes > sales tax jurisdictions`:  
{{% gimg src="V6.39 CHQ Release Guide/639_chq_taxes4.jpg" width="700px"%}}

#### New non-taxable indicator setting

In CHQ, under `settings > sales > sales documents`, in the **sales** section, we've added a new **non-taxable indicator** setting:
{{% gimg src="V6.39 CHQ Release Guide/639_chq_taxes5.jpg" title="New non-taxable indicator setting" width="700px"%}}

In the field, it’s possible to set an indicator that will be printed on the receipt for items that are charged 0% tax. For example, food items may be non-taxable.

In the field, maximum 3 letters are allowed. Empty by default.

#### See also

- [V6.39 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.39_mobile_rel_guide/)
- [Cloud HQ User Manual: Settings](https://twdocs.netlify.app/userdoc/chq/manuals/ "CHQ Manual Version 6")

### New tax exemption related settings

`Build 6.39.100.0: PRO-9015`

We’ve made updates to the **tax exempt** area in CHQ. The following has been added:

- new **Reprint receipt with Tax Exempt** security right
- a setting to define a tax exemption indicator printed on the sales receipt
- an option to define a text providing information on what customer data must be collected for tax exemption.

#### New security right

We’ve added a new security right – **Reprint receipt with Tax Exempt**:

Area | Right | Description |
:----------- |:----------- |:----------- |
Sales | Reprint receipt with Tax Exempt | Allows a user to reprint a sales receipt with at least one item marked as tax exempt |

#### Updates in the tax exempt area

1. **The tax exempt reasons** area has been renamed to **tax exempt**. This area is available under `chq > settings > sales > tax exempt`.
2. In the **tax exempt** area, the **general** section has been added with the following new settings:
{{% gimg src="V6.39 CHQ Release Guide/639_chq_taxes6.jpg" title="New tax exemption related settings" width="700px"%}}

- **printed receipt tax exempt indicator**: the indicator that is printed on the sales receipt next to the tax exempt items. Maximum 3 characters are allowed, empty by default.
- **tax exempt requirement text**: a text that provides instructions to store associates on what customer information must be collected to confirm tax exemption. The text displays in POS PRO under `Sales Receipt > Cart > [item name] - edit > Taxes > Tax Exempt Customer - ADD > Required Data`.  
Maximum 4000 characters are allowed, empty by default.

3. The **tax exempt reasons** section has been moved down to the bottom of the page.

#### See also

- [V6.39 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.39_mobile_rel_guide/)
- [Cloud HQ User Manual: Settings](https://twdocs.netlify.app/userdoc/chq/manuals/ "CHQ Manual Version 6")

### Enabling iOS push notifications for Ship Memos

`Build 6.39.100.0: PRO-6686`

We’ve added the capability to enable iOS push notifications of new Ship Memos on all iPad devices initialized at a specific location.

#### Purpose

This new feature when enabled allows the Teamwork POS user to immediately receive notifications on their iPad device once a Ship Memo is created and its status is "Prepare Shipment" or "Prepare Pickup".

These notifications display on iPads even if the POS app itself is not running or is minimized. As such notifications also contain the Ship Memo shipping method, the user can easily decide on that Ship Memo urgency.

#### How to enable notifications for a location

1. In CHQ, go to `settings > location settings > locations / location settings`.
2. Click to select your location record and then click **edit**.
3. In the dialog that opens, go to the **general settings** tab.
4. On the **general settings** tab, in the **general** section, select the **show OS notifications** checkbox:
{{% gimg src="V6.39 CHQ Release Guide/639_chq_notif1.jpg" title="The show OS notifications checkbox in your location dialog " width="500px"%}}
5. Click **save**.

#### See also

- [V6.39 Mobile Release Guide](https://twdocs.netlify.app/userdoc/pos/relguides/6.39_mobile_rel_guide/)
- [Cloud HQ User Manual: Settings](https://twdocs.netlify.app/userdoc/chq/manuals/ "CHQ Manual Version 6")

### Loyalty Reward Program: Updated conversion of loyalty points into amount coupons

`Build 6.39.122.0: PRO-10698`

We’ve updated how amount-type coupons are generated within a loyalty reward program.

In CHQ, when configuring settings of a loyalty reward program, users can choose coupons as the reward. When the *Generate Lrp Rewards* job is run, rewards are generated automatically based on the rules defined by the user.

The rules can be defined under `settings > company settings > credit & reward platform > fiscal zones > [your fiscal zone] > LRP > the reward section`.

When amount coupons are selected as the reward, it’s possible to set the rules of conversion of loyalty reward points (LRPs) by configuring the following:
{{% gimg src="V6.39 CHQ Release Guide/639_chq_LRP1.jpg" title="Updated conversion of loyalty points into amount coupons" width="600px"%}}

- **conversion threshold**: how many LRPs the customer must accumulate for a reward to be generated
- **conversion rate - each threshold amount equals [...] currency unit(s)**: the value of the coupon that is generated once the conversion threshold is reached

On the screenshot above, it is configured that for 1000 LRPs ({{% inum "A" %}} in the screenshot above) a $10 coupon ({{% inum "B" %}}) is generated.

Prior to version 6.39.122.0, that meant that if the *Generate Lrp Rewards* job was run when the customer had 2000 LRPs accumulated, a single $20 coupon was generated as the reward.

This logic has been changed. Now, under the conditions described above, multiple coupons are generated instead of a single coupon with the cumulative face value.

That means that in the example considered above, the customer who has 2000 LRPs will get two $10 coupons.

#### See also

- [Managing Loyalty Reward Programs in CHQ Release Guide V6.33](https://twdocs.netlify.app/userdoc/chq/relguides/6.33_chq_relguide/#managing-loyalty-reward-programs-in-chq)
- [Cloud HQ User Manual: Settings](https://twdocs.netlify.app/userdoc/chq/manuals/ "CHQ Manual Version 6")

### New payments section in the sales documents area

`Build 6.39.122.0: PRO-10911`

We’ve added a new **payments** section in CHQ under `settings > sales > sales documents`:

The following settings previously available in the **returns** section have been moved to the **payments** section:
{{% gimg src="V6.39 CHQ Release Guide/639_chq_salesdoc1.jpg" title="New payments section in the sales documents area" width="600px"%}}

- **restrict to one credit card per sale**
- **manual select payment method for change due before finalize**
- **allow to make changes in sales receipt with payments**

#### See also

[Cloud HQ User Manual: Settings](https://twdocs.netlify.app/userdoc/chq/manuals/ "CHQ Manual Version 6")

### European fiscal compliance: New fiscal server type setting for Sweden

`Build 6.39.122.0: PRO-10914`

We’ve extended the fiscalization settings for Sweden with a new **fiscal server type** setting that allows for specifying if the integrated fiscal server is a test or production server.

The setting is available under `settings > company settings > country > [Sweden record] – fiscal settings > fiscal > the infrasec section`:
{{% gimg src="V6.39 CHQ Release Guide/639_chq_swe1.jpg" title="New fiscal server type setting for Sweden" width="600px"%}}

The **fiscal server type** setting is required. The following options are possible:

- `test`
- `production`

#### See also

[Cloud HQ User Manual: Settings](https://twdocs.netlify.app/userdoc/chq/manuals/ "CHQ Manual Version 6")

### The give rate field removed from sales tax jurisdictions

`Build 6.39.100.0: PRO-6730`

As a part of optimization updates applied to the **sales tax jurisdictions** area in CHQ, we’ve removed the **give rate** field previously available under `chq > settings > company settings > taxes > sales tax jurisdictions > set up tax details`.

## Other enhancements

### JSON-based Ship Memo Control Flow API: Updating ExternalId and TrackingNo of a Ship Memo in the “pick up ready” status

`Build 6.39.100.0: PRO-10410`

We’ve extended the JSON-based Ship Memo Control Flow API with the capability to update the external ID and tracking number of a Ship Memo in the `pick up ready` status.

To accommodate this update, we’ve allowed requests with the *UpdateTrackingNumber* action type to be made for Ship Memos that have the `pick up ready` status in CHQ.

{{% notice note %}}
In case of Ship Memos in the `ship ready` status, a request with the *UpdateTrackingNumber* action type is only applicable if the Ship Memo has multiple cartons (packages) defined.
{{% /notice %}}

### JSON-based Drawer Memo Export API: New setting added

`Build 6.39.100.0: DS-2982`

We’ve extended the JSON-based Drawer Memo Export API with the new *CashDrawerActionIdentifierSetting*.

The following values are supported:

- `Code`
- `Description`
- `TeamworkId`
- `Default Code`

The new setting allows to specify how a cash movement action is applied to the drawer cash (for example, Paid In or Paid Out) is defined in the request.

### JSON-based Discount Reason Export API

`Build 6.39.100.0: DS-3187`

We’ve made available JSON-based Discount Reason Export API that allows for exporting discount reasons from CHQ.

### JSON-based Drawer Memo Export API: New DeviceTransaction Number field

`Build 6.39.122.0: DS-3382`

We’ve added support of the **DeviceTransactionNumber** (DTN) field to JSON-based Drawer Memo Export API. The field contains the unique device transaction number of the exported Drawer Memo.

### JSON-based Digital Assets Echo Export API: New SnapshotNo filter added

`Build 6.39.131.0: DS-3435`

As of version 6.39.131.0, we’ve enhanced the JSON-based Digital Asset Echo Export API with the **SnapshotNo** filter that supports the following operators: `Equal` and `Contains`.

## Impacted Areas

Teamwork Commerce PRO Suite allows for unique client-specific configurations. If the above is your case, we recommend that the areas and workflows listed below be additionally checked to ensure the existing functionality works as expected in conjunction with the newly released features.

{{% notice note %}}
Please be advised that the information below does not include details on the configurations and conditions required for testing the new features. For detailed information, see the respective feature description in this release guide.
{{% /notice %}}

|Feature| Impact|
|-------|-------|
|Updates in the cash payment rounding settings|Configure methods of cash rounding at the currency and company level. In POS, test workflows related to finalizing a sale with cash payment taken. Pay attention to applied cash rounding.|
|ShippyPro: Configuring the request for customer signature on shipment delivery| Configure settings related to delivery signature. In POS, test workflows   related to finalizing a Ship Memo with Shippy Pro. Pay attention to the state of the Delivery Confirmation Signature field based on settings configuration.|
|Configuring tax statuses and tax indicators for printing| Define tax indicators for various tax types. Configure if a tax jurisdiction can be marked as tax exempt. In POS, test workflows related to finalizing a sale with tax exemption applied, including marking a tax jurisdiction as tax exempt. Print the receipt and check tax indicators.|
New tax exemption related settings|In CHQ, define tax exemption indicator and customer data requirements text. In POS, test workflows related to finalizing a sale with tax exemption applied as well as adding a tax exempt customer. Print the receipt and check the tax indicator.|
Enabling iOS push notifications for Ship Memos|Enable push notifications of Ship Memos. Check the appearance of Ship Memo notifications on the device screen regardless of whether POS PRO is running at the moment.|
Support of custom fields added for Purchase Order import|Test import of Purchase Order via CHQ UI with custom fields defined.|
OMS: Asynchronous Ship Memo creation|Create Ship Memos for a large number of Sales Orders with some of the orders not meeting the criteria for Ship Memo creation.|
New “buy at least X, get discount” promotion type|Set up a new “buy at least X, get discount” promotion.|
Indicating password for the RT printer|Configure passwords for the fiscal RT printer. In POS, test workflows in the Sales Receipt and Drawer Memo areas related to the fiscal printer.|
Enabling automated detached payment check|Enable automated detached payment check for various scenarios. In POS, test workflows related to transaction with detached payment finalization. Pay attention to different conditions where detached payments can appear.|
Configuring price and quantity limits for Open Returns|Configure Open Return limits in CHQ. In POS, test workflows related to Open Return. Check if price and/or quantity limits are respected.|
Configuring location visibility for various operation reasons|Configure visibility of operation reasons by location. Add translations for customer titles. In POS, test the visibility of reasons in POS at a specific store location. Additionally, check translations of customer titles in customer records.|
Configuring auto-lock for POS PRO|Grant a user with the Lock screen (override) security right. Define the time interval for auto-lock. In POS, test the Lock Screen workflow in various POS areas paying attention to the user’s security rights. Check if auto-lock time limit is observed.|
Configuring the auto-logout in CHQ|Define the time interval for user auto-logout. In POS, check if auto-logout time interval is observed.|
Managing transfer discrepancy reasons|Test workflows related to creating and managing Transfer Memo discrepancy reasons in CHQ. Also, test posting a Transfer In for Transfer Memo in transit as well as creating supplemental transfer for a posted Transfer In.|

{{% notice warning %}}
WE DO NOT WARRANT AND SHALL NOT BE RESPONSIBLE FOR THE PERFORMANCE OF ANY THIRD-PARTY VENDOR’S PRODUCTS OR SERVICES. ALL SOFTWARE AND HARDWARE IS ACQUIRED SUBJECT TO THE END USER LICENSE AGREEMENT, WARRANTY, AND OTHER TERMS PROVIDED BY THE MANUFACTURER OR SUPPLIER OF SUCH THIRD-PARTY PRODUCT.   YOU AGREE TO BE BOUND BY AND COMPLY WITH ANY SUCH MANUFACTURER LICENSE AGREEMENT, WARRANTY, OR OTHER TERMS AND CONDITIONS, AND YOU UNDERSTAND AND AGREE TO LOOK SOLELY TO THE THIRD-PARTY VENDOR OF THE PRODUCT FOR MAINTENANCE AND SUPPORT, INCLUDING BUT NOT LIMITED TO RESOLUTION OF SYSTEM ERRORS, BUGS, PATCHES, HOT FIXES, ETC. YOUR SOLE AND EXCLUSIVE RIGHTS AND REMEDIES WITH RESPECT TO ANY THIRD-PARTY PRODUCT OR SERVICE, INCLUDING RIGHTS AND REMEDIES IN THE EVENT A THIRD-PARTY PRODUCT OR SERVICE GIVES RISE TO AN INFRINGEMENT CLAIM, WILL BE AGAINST THE THIRD-PARTY VENDOR AND NOT AGAINST US.

TO THE MAXIMUM EXTENT PERMITTED BY LAW, WE DISCLAIM ANY AND ALL PROMISES, REPRESENTATIONS, AND WARRANTIES, EXPRESS OR IMPLIED, WITH RESPECT TO THE VERSION OF THE PROGRAM SET FORTH HEREIN, SPECIFICALLY INCLUDING ANY UNDERLYING THIRD PARTY TECHNOLOGIES AND/OR PLATFORMS USED IN CONJUNCTION WITH SAME, MATERIALS AND ANY OTHER DATA, INFORMATION, OR OTHER MATERIAL FURNISHED TO USER HEREUNDER, INCLUDING, WITHOUT LIMITATION, THE CONDITION THEREOF; AND WARRANTIES OF NON-INFRINGEMENT, TITLE, MERCHANTABILITY, OR FITNESS FOR A PARTICULAR PURPOSE OR USE.
{{% /notice %}}

## Issue resolutions

### JSON-based Sales Order Full Export API: Missing information on deposit Sales Receipt

`Build 6.39.100.0: DS-2948, DS-2949`

We’ve fixed the issue where the response from the JSON-based Sales Order Full Export API would be missing reference to the associated Sales Receipt with the deposit payment.

Now, the reference to the deposit Sales Receipt is exported in the **ReceiptIdentifier** field as expected.

### Search for vendor invoices with “&” in the invoice number fails

`Build 6.39.100.0: DS-1823`

Prior to 6.39.100.0, under `purchasing > vendor invoices`, search for a vendor invoice that contained ampersand (&) in the number could occasionally fail with an error.

The issue has been fixed. Now, searching for vendor invoices with & in the number can be performed without any issues.

### Discount reason not visible in POS PRO

`Build 6.39.100.0: DS-2973`

We’ve fixed the issue where a discount reason would fail to appear in POS PRO when the device was initialized at a specific store location.

### JSON-based Quantity Status Reset API: Execution timeout error

`Build 6.39.100.0: DS-3260`

We’ve fixed the issue where JSON-based Quantity Status Reset API call could occasionally fail with the `Execution Timeout Expired` error.

### Transfer Memo: Time of posting and acknowledgement use different time standards

`Build 6.39.100.0: DS-2932`

**Issue**  
If a transfer memo was finalized with acknowledgement in POS PRO, in CHQ under `inventory > transfer memos > list > [selected transfer memo] > user info`, the time of transfer memo posting and acknowledgement would be shown in different time standards.

In particular, the **posted in date** value would use the device local time, and the **acknowledgement in date** value – UTC.

**Resolution**  
The issue has been fixed. Now, the **posted in date** and **acknowledgement in date** fields use the same time standards.

### JSON-based Digital Assets Echo Export API: Requests with CatalogLinkType filter configured fail

`Build 6.39.100.0: DS-3305`

We’ve fixed the issue where JSON-based Digital Assets Echo Export API requests with **CatalogLinkType** filter set to `Style` would fail with an error.

### The custom lookup value display setting is not respected

`Build 6.39.100.0: DS-3269`

**Issue**  
In CHQ, the **custom lookup value display** setting available under `chq > settings > inventory / catalog > inventory settings` wasn’t respected.

In particular, when the setting was set to `both`, possible values for custom lookup fields should display with both **value** and **alias**. For example, if the **value** is `127`, and the **alias** is `Shirt`, the full value should display as follows: `127 Shirt`.

However, under `chq > inventory > styles & items > [selected style/model] > the custom tab`, only values would display without aliases even when the **custom lookup value display** setting was set to `both`.

**Resolution**  
The issue has been fixed. Now, when the **custom lookup value display** setting is set to `both`, both values and aliases display for custom lookups as expected.

### Gift Card: The reason code column is empty in the list view

`Build 6.39.100.0: DS-3110`

We’ve fixed the issue where, under `chq > sales > gift cards > list`, the **reason code** column would be empty even if the respective gift card had the reason code defined.

### JSON-based Digital Assets Echo Export API error

`Build 6.39.100.0: DS-3320`

We’ve fixed the issue where calls to the asynchronous JSON-based Digital Assets Echo Export API would occasionally fail with the `An error has occurred` error message returned.

### Gift Card import with more than 1000 items fails

`Build 6.39.100.0: DS-3082`

Prior to version 6.39.100.0, Gift Card imports that included more than 1000 gift cards would sometimes fail with an error. The error message stated that the first gift card in the list already existed.

The issue has been fixed. Now, Gift Card imports with more than 1000 items can be executed as expected.

### JSON-based Sales Receipt Export API: Missing ActualReturnLocationIdentifier

`Build 6.39.100.0: DS-3329`

We’ve fixed the issue where the **ActualReturnLocationIdentifier** attribute would be missing in the JSON-based Sales Receipt Export API response.

### Sales Orders from WeChat fail to import

`Build 6.39.100.0: DS-3334`

We’ve fixed the issue where Sales Orders passed from the WeChat platform sometimes couldn’t be imported in CHQ.

### JSON-based Inventory Import API: Error on importing a style

`Build 6.39.122.0: DS-3371`

**Issue**  
When an item style was imported via JSON-based Inventory Import API, the API request could fail with “The field primary vendor is invalid” error.

That happened when the imported vendor was in the `held` status at the database level. According to the validation rules, the imported vendor must be in the `released` status for a successful import.

**Resolution**  
To resolve this issue, at the database level, we’ve changed the default status assigned to all vendors on creation to `released`.

### The "inactivity log out" warning message delayed

`Build 6.39.122.0: DS-3394`

We’ve fixed the issue where the **minutes before auto logout if CHQ user is idle** setting available under `chq > settings > security > security settings` wasn’t respected.

In particular, the **inactivity log out** warning message would appear one minute later with respect to the configured time limit.

### Error on opening the [style] - digital asset(s) echo dialog

`Build 6.39.122.0: DS-3340`

We’ve fixed the issue where opening the **[style] - digital asset(s) echo** dialog under `chq > inventory > styles & items > list > [your style or item]` could occasionally fail with the `A problem has occurred` error message.

### V4 POS transactions with Adyen payment cannot synchronize with CHQ

`Build 6.39.122.0: DS-3385`

Prior to version 6.39.122.0, when V4 POS was run in conjunction with V6.39 CHQ, transactions with an Adyen payment failed to synchronize with CHQ.

The issue has been fixed. Now, such transactions can be synchronized as expected.

### European fiscal compliance – Sweden: Updated POS software model name

`Build 6.39.122.0: DS-3399`

For store locations in Sweden, at the database level, we’ve updated the POS software model name to be displayed as **Teamwork POS Pro SE 6.X** across all devices. This change is required to ensure compliance with fiscalization requirements.

### Transfer Memo: Quantity discrepancy when setting qty in = qty out

`Build 6.39.122.0: DS-3397`

**Issue**  
For Transfer Memos where the Transfer In was posted manually via CHQ, a discrepancy in quantities would incorrectly display.

In particular, that happened under the following conditions:

1. Under `inventory > transfer memos`, the user opened a Transfer Memo in the `in transit` status.
2. The user selected **post transfer in**.
3. For the Transfer In, the user set the **qty out** for each item to equal the **qty in**.
4. The user saved the changes.

Then, when viewing the respective Transfer Memo under `inventory > transfer memos > list`, the **discrepancy** and **difference** columns would be filled out even though no discrepancy was present.

**Resolution**  
The issue has been fixed. Now, if **qty in = qty out** is selected for the Transfer In, no discrepancy is present on the Transfer Memo.

### European fiscal compliance – Sweden: Updated Software Version and Model Name sent to INRASEC

`Build 6.39.127.0: DS-3463`

As of version 6.39.127.0, we’ve updated the **SW Model** and **SW Version** values sent from CHQ to INFRASEC when registering a new device:

- **SW Model**: Teamwork POS Pro SE
- **SW Version**: 6.X (where "X" is the app major version number)

This change is required to ensure compliance with fiscalization requirements.

### European fiscal compliance – Sweden: Updated root certificates for fiscal servers

`Build 6.39.127.0: PRO-10987`

At the database level, separate root certificates are now used for test and production fiscal servers.

{{% notice note %}}
In CHQ, it’s possible to define if the integrated fiscal server is test or production by configuring the **fiscal server type** setting under `settings > company settings > country > [Sweden record] – fiscal settings > fiscal > the infrasec section`.
{{% /notice %}}

### Inability to retrieve Sales Receipts via Find Receipt in POS V4

`Build 6.39.131.0: DS-3512`

**Issue**  
In POS version 4.93.400, searching for Sales Receipts under `Sales Receipt > Return > Find Receipt` could occasionally fail with the `No records found` error message. This applied to Receipts created before the date of the upgrade from version 6.17 to 6.39 of CHQ.

**Resolution**  
The issue has been fixed. Now, searching for Sales Receipts in POS V4.93 is performed as expected and all the Sales Receipts are found.

### JSON-based Sales Receipt Export API: No response if RecModified is greater than "2022.05.12"

`Build 6.39.131.0: DS-3514`

**Issue**  
Prior to 6.39.131.0, exporting Sales Receipt via JSON-based Sales Receipt Export API could result in no response to the API call if the RecModified filter was set to be greater than `2022.0512`.

**Resolution**  
The issue has been fixed. Now, Sales Receipts are exported via JSON-based Sales Receipt Export API as expected.

### Sweden fiscalization: Wrong address used for new device registration

`Build 6.39.131.0: DS-3499`

**Issue**  
Prior to 6.39.131.0, when registering a new device with Infrasec, the company information (**address 1**, **postcode** and **city**) would incorrectly be used as the cash register address instead of the respective location-level information.

**Resolution**
The issue has been fixed. Now, the location-level information (**address 1**, **postcode** and **city**) is used as the cash register address when registering a new device with Infrasec.

### Item prices not synchronized between CHQ servers

`Build 6.39.131.0: DS-3471`

**Issue**  
Prior to 6.39.131.0, the item prices would not be synchronized between CHQ servers. This happened due to the big size of documents (12–16 MB each), where the maximum allowed size is 10 MB.

**Resolution**
The issue has been fixed. Now, CHQ supports a larger size of documents when synchronizing between CHQ servers.

### Customer external ID is missing after synchronization with CHQ

`Build 6.39.131.0: DS-3528`

After synchronizing Teamwork POS Version 4 with CHQ Version 6, the customer **external ID** (**EID**) value would be missing for customer records created in POS V4.93.400.

The issue has been fixed. Now, after POS V4.93.400 is synchronized with CHQ, the customer **external ID** value displays as expected in CHQ Version 6.

### Inability to sell new Gift Cards

`Build 6.39.131.0: PRO-11251`

**Issue**  
Prior to 6.39.131.0, when the **Sell Only Registered Gift Cards** setting was set to `FALSE` at the database level, adding new Gift Cards to Sales Receipt in POS PRO failed. In particular, after entering the **Gift Card #** value, the `Gift Card not found and can't be used` error message would appear.

**Resolution**  
The issue has been resolved. Now, when the **Sell Only Registered Gift Cards** setting is set to `FALSE` at the database level, new Gift Cards are added to the Sales Receipt as expected in POS PRO.


<br>

[DOWNLOAD PDF](https://storage.googleapis.com/twc-pedia-prod-bucket/pdf/relguides/CHQ%20Release%20Guide%20Version%206.39.131.0.pdf)
